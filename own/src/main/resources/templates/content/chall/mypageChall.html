<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="ko">
<head>
<!-- jquery -->
<script type="text/javascript" src="/band/js/jquery-3.2.1.js"></script>
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<meta content="Free HTML Templates" name="keywords" />
<!-- Favicon -->
<link href="/chall/img/favicon.ico" rel="icon" />
<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link
	href="https://fonts.googleapis.com/css2?family=Handlee&family=Nunito&display=swap"
	rel="stylesheet" />
<!-- Font Awesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
	rel="stylesheet" />
<!-- Flaticon Font -->
<link href="/chall/lib/flaticon/font/flaticon.css" rel="stylesheet" />
<!-- Libraries Stylesheet -->
<link href="/chall/lib/owlcarousel/assets/owl.carousel.min.css"
	rel="stylesheet" />
<link href="/chall/lib/lightbox/css/lightbox.min.css" rel="stylesheet" />
<!-- Customized Bootstrap Stylesheet -->
<link href="/chall/css/style.css" rel="stylesheet" />
<!-- JavaScript Libraries -->
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="/chall/lib/easing/easing.min.js"></script>
<script src="/chall/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/chall/lib/isotope/isotope.pkgd.min.js"></script>
<script src="/chall/lib/lightbox/js/lightbox.min.js"></script>
<!-- Contact Javascript File -->
<script src="/chall/mail/jqBootstrapValidation.min.js"></script>
<script src="/chall/mail/contact.js"></script>
<!-- Template Javascript -->
<script src="/chall/js/main.js"></script>
<meta charset="utf-8">
<title>OWN _ 도전 _ 마이페이지</title>
</head>
<body>

	<!-- Navbar Start -->
	<div class="container-fluid bg-light position-relative shadow">
		<nav
			class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0 px-lg-5">
			<a href="" class="navbar-brand font-weight-bold text-secondary"
				style="font-size: 50px"> <i
				class="flaticon-043-teddy-bear"></i> <span class="text-primary">OWN_Challenges</span>
			</a>
			<button type="button" class="navbar-toggler" data-toggle="collapse"
				data-target="#navbarCollapse">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse justify-content-between"
				id="navbarCollapse">
				<div class="navbar-nav font-weight-bold mx-auto py-0">
					<a href="index.html" class="nav-item nav-link">Home</a> <a
						href="about.html" class="nav-item nav-link">About</a> <a
						href="class.html" class="nav-item nav-link">Classes</a> <a
						href="team.html" class="nav-item nav-link">Teachers</a> <a
						href="gallery.html" class="nav-item nav-link">Gallery</a>
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle"
							data-toggle="dropdown">Pages</a>
						<div class="dropdown-menu rounded-0 m-0">
							<a href="blog.html" class="dropdown-item">Blog Grid</a> <a
								href="single.html" class="dropdown-item">Blog Detail</a>
						</div>
					</div>
					<a href="contact.html" class="nav-item nav-link active">Contact</a>
				</div>
				<a href="" class="btn btn-primary px-4">Join Class</a>
			</div>
		</nav>
	</div>
	<!-- Navbar End -->

	<!-- Header Start -->
	<div class="container-fluid bg-primary mb-5">
		<div
			class="d-flex flex-column align-items-center justify-content-center"
			style="min-height: 400px">
			<h3 class="display-3 font-weight-bold text-white">Contact Us</h3>
			<div class="d-inline-flex text-white">
				<p class="m-0">
					<a class="text-white" href="">Home</a>
				</p>
				<p class="m-0 px-2">/</p>
				<p class="m-0">Contact Us</p>
			</div>
		</div>
	</div>
	<!-- Header End -->
	<div style="margin: auto 0px">
		<div th:if="${session.loginUser}">
			오운_마이페이지
			<h1 th:text="${session.loginUser.userId}"></h1>
		</div>
		<a href="/own/chall/myAmount">내 예치금</a> 
		<a href=#>내 인증내역들</a> 
		<a href="/own/chall/myChall">내 도전들</a>

		<h3>마이 프로필</h3>
<!-- 		<ul>
			<input id ="userId" type="hidden" name="challLeader" th:value="${session.loginUser.userId}">
			<li>회원정보<span th:text="{memInfo}"></span>
				<li>내 닉네임:<span th:text="${memInfo.memNickname}"></span>
					<li>내 소개:</li>
					<li><textarea rows="10" cols="10" th:text="${memInfo.memIntro}">내용을 입력해주세요.</textarea></li>
					<form action="/own/chall/updateImg" method="post" enctype="multipart/form-data">
						<input type = "hidden" th:value="${memInfo.memNo}" id="memNo" name="memNo">
						<li><label for="inputFile">프로필 사진:<input type="file" name = "uploadfile"></input></label>
						<button type="submit" id="updBtn">등록/수정</button> 
						</form>
		</ul> -->
	</div>
	<!-- Contact Start -->
	<div class="container-fluid pt-5">
		<div class="container">
			<div class="text-center pb-2">
				<p class="section-title px-5">
					<span class="px-2">MY PAGE</span>
				</p>
				<h1 class="mb-4">my profile</h1>
			</div>
		<div class="row">
          <div class="col-12 text-center mb-2">
            <ul class="list-inline mb-4" id="portfolio-flters">
              <li class="btn btn-outline-primary m-1 active" data-filter="*" >
                내 정보
              </li>
              <li class="btn btn-outline-primary m-1" data-filter=".first"  href="/own/chall/myAmount">
               <a href="/own/chall/myAmount">내 예치금</a> 
              </li>
              <li class="btn btn-outline-primary m-1" data-filter=".second">
                내 도전
              </li>
              <li class="btn btn-outline-primary m-1" data-filter=".third">
                Reading
              </li>
            </ul>
          </div>
        </div>
        
			<div class="row">
 			<div class="col-lg-5 mb-5">
					<!-- <div class="col-md-5 col-lg-3 text-center team mb-5"> -->
						<div class="position-relative overflow-hidden mb-4" style="border-radius: 100%; width: 200px">
							<div class="w-100 h-100">
							<div th:if="${memImg}"> <!-- 도전프로필이 있는경우 -->
							<img class="img-fluid"  alt="" 
							 th:src="|/imgView/${memImg.mediaServerFile}|" />
							</div>					
							<div th:if="${memImg == null}"> <!-- 이미지없을때 기본이미지 -->
							<img class="img-fluid"  alt="" 
							 th:src="|/imgView/d87e37df-45a0-491e-bcf2-28482284c8d0_2513B53E55DB206927.png|" />
							</div>		
							</div>
						</div>
						<h4>Jhon Doe</h4>
						<i>Language Teacher</i>
<!-- 					</div> -->
				</div>
				<div class="col-lg-7 mb-5">
					<div class="contact-form">
						<div id="success"></div>
						<input id ="userId" type="hidden" name="challLeader" th:value="${session.loginUser.userId}">
							<div class="control-group">
								<input type="email" class="form-control" id="memNick"
									th:value="${memInfo.memNickname}"
									data-validation-required-message="Please enter your email" />
								<p></p>
							</div>
							<div class="control-group">
								<textarea class="form-control" rows="6" id="memIntro"
									placeholder="당신의 도전 다짐을 입력해주세요!" th:text="${memInfo.memIntro}"
									data-validation-required-message="Please enter your message"></textarea>
								<p class="help-block text-danger"></p>
							</div>
							<div>
							<form action="/own/chall/updateImg" method="post" enctype="multipart/form-data">
								<input type = "hidden" th:value="${memInfo.memNo}" id="memNo" name="memNo">
								<label for="inputFile">프로필 사진:
								<input type="file" name = "uploadfile"></input></label>
								<button type="submit" class="btn btn-primary py-2 px-4"  id="updBtn">등록 / 수정하기</button>
							</form>
							</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Contact End -->

	<!-- Footer Start -->
	<div
		class="container-fluid bg-secondary text-white mt-5 py-5 px-sm-3 px-md-5">
		<div class="row pt-5">
			<div class="col-lg-3 col-md-6 mb-5">
				<a href=""
					class="navbar-brand font-weight-bold text-primary m-0 mb-4 p-0"
					style="font-size: 40px; line-height: 40px"> <i
					class="flaticon-043-teddy-bear"></i> <span class="text-white">KidKinder</span>
				</a>
				<p>Labore dolor amet ipsum ea, erat sit ipsum duo eos. Volup
					amet ea dolor et magna dolor, elitr rebum duo est sed diam elitr.
					Stet elitr stet diam duo eos rebum ipsum diam ipsum elitr.</p>
				<div class="d-flex justify-content-start mt-4">
					<a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-twitter"></i></a> <a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-facebook-f"></i></a> <a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-linkedin-in"></i></a> <a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-instagram"></i></a>
				</div>
			</div>
			<div class="col-lg-3 col-md-6 mb-5">
				<h3 class="text-primary mb-4">Get In Touch</h3>
				<div class="d-flex">
					<h4 class="fa fa-map-marker-alt text-primary"></h4>
					<div class="pl-3">
						<h5 class="text-white">Address</h5>
						<p>123 Street, New York, USA</p>
					</div>
				</div>
				<div class="d-flex">
					<h4 class="fa fa-envelope text-primary"></h4>
					<div class="pl-3">
						<h5 class="text-white">Email</h5>
						<p>info@example.com</p>
					</div>
				</div>
				<div class="d-flex">
					<h4 class="fa fa-phone-alt text-primary"></h4>
					<div class="pl-3">
						<h5 class="text-white">Phone</h5>
						<p>+012 345 67890</p>
					</div>
				</div>
			</div>
			<div class="col-lg-3 col-md-6 mb-5">
				<h3 class="text-primary mb-4">Quick Links</h3>
				<div class="d-flex flex-column justify-content-start">
					<a class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Home</a> <a class="text-white mb-2"
						href="#"><i class="fa fa-angle-right mr-2"></i>About
						Us</a> <a class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Our Classes</a> <a
						class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Our Teachers</a> <a
						class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Our Blog</a> <a class="text-white"
						href="#"><i class="fa fa-angle-right mr-2"></i>Contact
						Us</a>
				</div>
			</div>
			<div class="col-lg-3 col-md-6 mb-5">
				<h3 class="text-primary mb-4">Newsletter</h3>
				<form action="">
					<div class="form-group">
						<input type="text" class="form-control border-0 py-4"
							placeholder="Your Name" required="required" />
					</div>
					<div class="form-group">
						<input type="email" class="form-control border-0 py-4"
							placeholder="Your Email" required="required" />
					</div>
					<div>
						<button class="btn btn-primary btn-block border-0 py-3"
							type="submit">Submit Now</button>
					</div>
				</form>
			</div>
		</div>
		<div class="container-fluid pt-5"
			style="border-top: 1px solid rgba(23, 162, 184, 0.2);">
			<p class="m-0 text-center text-white">
				&copy; <a class="text-primary font-weight-bold" href="#">Your
					Site Name</a>. All Rights Reserved.

				<!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
				Designed by <a class="text-primary font-weight-bold"
					href="https://htmlcodex.com">HTML Codex</a> <br />Distributed
				By: <a href="https://themewagon.com" target="_blank">ThemeWagon</a>
			</p>
		</div>
	</div>
	<!-- Footer End -->

	<!-- Back to Top -->
	<a href="#" class="btn btn-primary p-3 back-to-top"><i
		class="fa fa-angle-double-up"></i></a>
	<script>
		//아작스로 데이터수정해서다시 화면에뿌려주깅
		$('#updBtn').on("click", function(){
			let nick = $("#memNick").val();
			let intro = $("#memIntro").val();
			let userId = $("#userId").val()
			console.log(nick, intro, userId);
			$.ajax({
				url: '/own/chall/myprofileUpdate',
				method: 'post',
				data : JSON.stringify({userId: userId, 
									   memNickname: nick, 
									   memIntro: intro}
									   ),
				contentType: "application/json"
			}).then(res => {
				console.log(res)
			})
		})
	</script>
</body>
</html>