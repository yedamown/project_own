<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/band_layout}"
      lang="ko">
    <head>
        <!-- <script src="/css/band/js/jquery-3.2.1.js"></script> -->
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" href="/css/band/image/favicon.png" type="image/png">
        <title>Royal Hotel</title>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="/css/band/css/bootstrap.css">
        <link rel="stylesheet" href="/css/band/vendors/linericon/style.css">
        <link rel="stylesheet" href="/css/band/css/font-awesome.min.css">
        <link rel="stylesheet" href="/css/band/vendors/owl-carousel/owl.carousel.min.css">
        <link rel="stylesheet" href="/css/band/vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.css">
        <link rel="stylesheet" href="/css/band/vendors/nice-select/css/nice-select.css">
        <link rel="stylesheet" href="/css/band/vendors/owl-carousel/owl.carousel.min.css">
        <!-- main css -->
        <link rel="stylesheet" href="/css/band/css/style.css">
        <link rel="stylesheet" href="/css/band/css/responsive.css">
        <script src="/css/band/js/jquery-3.2.1.js"></script>
        <!--  -->
         <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <!-- <script src="/css/band/js/popper.js"></script> -->
        <!-- <script src="/css/band/js/bootstrap.min.js"></script> -->
        <script src="/css/band/vendors/owl-carousel/owl.carousel.min.js"></script>
       <!--  <script src="/css/band/js/jquery.ajaxchimp.min.js"></script> -->
        <script src="/css/band/js/mail-script.js"></script>
        <script src="/css/band/vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.js"></script>
        <script src="/css/band/vendors/nice-select/js/jquery.nice-select.js"></script>
        <script src="/css/band/js/mail-script.js"></script>
        <script src="/css/band/js/stellar.js"></script>
        <script src="/css/band/vendors/lightbox/simpleLightbox.min.js"></script>
        <script src="/css/band/js/custom.js"></script>
         <script src="/css/band/js/time.js"></script>
        <style type="text/css">
        	.modal {
				display: none;
				z-index: 500;
				width: 100%;
				height: 100vh;
				position: fixed;
				top: 0;
				left: 0;
				background-color: rgba(0, 0, 0, 0.3);
			}
			
			.modal button {
				position: absolute;
				top: 3rem;
				right: 3rem;
				background: transparent;
				border: 0;
				color: #ffffff;
				font-size: 3rem;
			}
			
			.modalBox {
				position: relative;
				top: 20%;
				left: 50%;
				transform: translate(-50%, -20%);
				background-color: #ffffff;
				width: 30%;
				height: 30%;
				text-align: center;
			}
			
			.modalBox img {
				width: 100%;
			}
			
			.modalBox p {
				color: #ffffff;
				background-color: #000;
				font-size: 2rem;
				padding: .2rem;
			}
			@import url('https://fonts.googleapis.com/icon?family=Material+Icons');

		.dropdown{
		  position : relative;
		  display : inline-block;
		}
		
		.dropbtn_icon{
		  font-family : 'Material Icons';
		}
		.dropbtn{
		  border-radius : 4px;
		  background-color: #f5f5f5;
		  font-weight: 400;
		  color : rgb(37, 37, 37);
		  width :200px;
		  text-align: left;
		  cursor : pointer;
		  font-size : 12px;
		}
		.dropdown-content{
		  display : none;
		  position : absolute;
		  z-index : 1; /*ë‹¤ë¥¸ ìš”ì†Œë“¤ë³´ë‹¤ ì•ì— ë°°ì¹˜*/
		  font-weight: 400;
		  background-color: #f9f9f9;
		  min-width : 200px;
		}
		
		.dropdown-content a{
		  display : block;
		  text-decoration : none;
		  color : rgb(37, 37, 37);
		  font-size: 12px;
		  padding : 12px 20px;
		}
		
		.dropdown-content a:hover{
		  background-color : #ececec
		}
		.dropdown:hover .dropdown-content {
		  display: block;
		}
		.clickBoard {
			color : blue;
			text-decoration : underline;
		}
		#ifr {
			 width: 800px;
			 height: 1000px;
		}
        </style>
    </head>
    <body>
    <div layout:fragment="content">
    <!-- <input type="hidden" th:value="${band.bandNo}" 				id="bandNumber" > -->
    <input type="hidden" th:value="${band.bandNo}" 				id="bandNo" >
   	<input type="hidden" th:value="${session.loginUser.userId}" id="userId" >
   	<input type="hidden" th:value="${band.bandLeaderid}" id="bandLeaderid" >
    <input type="hidden" th:name="${_csrf.parameterName}"
					th:value="${_csrf.token}">
	<!-- ê²Œì‹œíŒ ë„˜ê¸°ê¸°ìš© -->
	<input type="hidden" th:value="${bandBoardDetailNo}" id="bandBoardDetailNo" >
        <!--================Header Area =================-->
        <header><aside class="single_sidebar_widget search_widget">
            <div class="br"></div>
        </aside>
            <div class="container">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
                    <!--================ ì „ì²´ ê²€ìƒ‰ =================-->    
                        <aside class="single_sidebar_widget search_widget">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="ì˜¤ìš´ ê°€ì¹˜ ê²€ìƒ‰"  name="bandName">
                            <span class="input-group-btn">
                                <button class="btn btn-default searchBtn" type="button"><i class="lnr lnr-magnifier"></i></button>
                            </span>
                        </div>
                   <!--================ ì „ì²´ ê²€ìƒ‰ ë =================-->    
                        <div class="br"></div>
                    </aside>
                        <ul class="nav navbar-nav menu_nav ml-auto">
                            <li class="nav-item"><a class="nav-link" th:href="@{/own/band/bandGroup(bandNo=${band.bandNo})}">ê°€ì¹˜ í™ˆ</a></li>
                            <li class="nav-item"><div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}"><a class="nav-link" id="bandPhoto">ì•¨ë²”</a></div></li>
                            <li class="nav-item"><div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}"><a class="nav-link" id="bandCalendar">ì¼ì •</a></div></li>
                            <!--================ ì±„íŒ…ê¸°ëŠ¥ì„ ìœ„í•œ ì„ì‹œ =================-->
                            <li class="nav-item"><div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}"><a class="nav-link" th:href="@{/own/band/memberTest(bandNo = ${band.bandNo})}">ë©¤ë²„</a></div></li>
                        </ul>
                    </div> 
                </nav>
            </div>
        </header>
        <!--================Header Area =================-->
        
        <!--================Blog Area =================-->
        <section class="blog_area" style="padding-top: 0px">
            <div class="container" style="display: flex;">
                <div style="display: flex; flex-direction: row; justify-content: center;">
                    <div style="flex-grow:1; width: 260px">
                        <div class="blog_right_sidebar">
                            <aside class="single_sidebar_widget author_widget">
                                <div class="hotel_img">
                                    <img th:src="|/imgView/${band.bandImg.mediaServerFile}|"  alt=""  style="width: 200px; height: 200px;">
                                </div>
                                <h3 th:text="${band.bandName}" class="typo-list" style="display:inline;"></h3>
                                <hr>
                                <div>
                                    <b><i class="fa fa-user"></i>ë©¤ë²„ <span th:text="${band.memcount}"></span></b>
                                    <div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}"><b><i class="fa fa-plus-square" aria-hidden="true"></i> ì´ˆëŒ€</b></div>
                                    <p><i class="fa fa-map-marker" aria-hidden="true"></i> <span th:text="${band.bandLocation}"></span></p>
                                    <p><i class="fa fa-futbol-o" aria-hidden="true"></i> <span th:text="${band.bandCategory}"></span></p>
                                </div>
                                <hr>
                                <div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}">
	                                <div>
	                                	<p id="myOption"><i class="fa fa-cog" aria-hidden="true"></i>[[${BandMemberDetail.bandNickname}]]([[${BandMemberDetail.userId}]])<b th:if="${#strings.equals(session.loginUser.userId, band.bandLeaderid)}"><i class="fa fa-solid fa-crown"></i></b></p>
	                                    <p id="bandOption"><i class="fa fa-cog" aria-hidden="true"></i> ê°€ì¹˜ ì„¤ì •</p>
	                                    <p id="bandOption9"><i class="fa fa-cog" aria-hidden="true"></i> ê°€ì¹˜ ì„¤ì •(ê²Œì‹œíŒ)</p>
	                                </div>
	                                <hr>

                                </div>
                                <div th:if="${#strings.isEmpty(BandMemberDetail)}"  id="signUpBand">
                                <!-- =======ê°€ì…======= -->
                                	<h4 class="widget_title" style="color:white;">íšŒì›ê°€ì…</h4>
                                </div>
                                <div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA01'}">
                                <!-- =======ìŠ¹ì¸ì¤‘======= -->
                                	<h4 class="widget_title" style="color:white;">ìŠ¹ì¸ëŒ€ê¸°ì¤‘</h4>
                                </div>
                            </aside>
                            <div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}">
	                            <aside class="single_sidebar_widget post_category_widget">
	                                <h4 class="widget_title" id="writeBoard">ê¸€ì“°ê¸°</h4>
	                                <div class="d-flex justify-content-between smallBoard" id="totalBoard">
	                                    <p name=""><i class="fa fa-file-text" style="padding-right: 7px"></i>ì „ì²´ ê¸€ë³´ê¸°</p>
	                                    <p th:text="${boardCount}">2538</p>
	                                </div>
	                                <hr style="margin-bottom: 20px; margin-top: 0px;">
	                                <ul class="list_style cat-list">
	                                    <li th:each="board: ${boardList}">
	                                    	<p th:if="${board.bandBoardLine}!=0" class="smallBoard" th:name="${board.bandBoardOptionNo}"><i class="fa fa-file-text" style="padding-right: 7px"></i>[[${board.bandBoardName}]]</p>
	                                    	<b th:if="${board.bandBoardLine}==0" th:text="${board.bandBoardName}"></b>
	                                    </li>											
	                                </ul>
	                                <div class="br"></div>
	                            </aside>
	                            <aside class="single-sidebar-widget tag_cloud_widget">
	                                <h4 class="widget_title">ê°€ì¹˜ íƒœê·¸</h4>
	                            	<ul class="list_style">
	                                    <li th:if="${keyword != null}" th:each="tag: ${keyword}">
	                                    	<a href="#"  th:text="${tag}"></a>
	                                    </li>
	                                </ul>
	                            </aside>
	                    	</div>        
                        </div>
                    </div>
                    <div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}">
	                    <div style="flex-grow:3; width: 740px">
		  <!-- ================== ì—¬ê¸°ë¶™ìŒ================== -->                    	
	                        <div id="mainTemplate">
	                            <article style="border: 1px solid #eeeeee;padding:30px; ">
	                            <!-- ================== ê²€ìƒ‰================== -->
	                            	  
	                                <div class="input-group">
	                                    <input type="text" class="form-control" id="searchBox" placeholder="Search Posts">
	                                    <span class="input-group-btn">
	                                        <button class="btn btn-default" id="searchBoxBtn" type="button"><i class="lnr lnr-magnifier"></i></button>
	                                    </span>
	                                </div>
                                 <!-- ================== ê²€ìƒ‰================== -->  
	                            </article>
	                            <div id="articleArea" class="arty">
				               </div>
	                        </div>
	                        <!-- <iframe id="ifr" onload="iframeHeight()" frameborder="0" scrolling="no"></iframe> -->
	      <!-- ================== ì—¬ê¸°ë¶™ìŒ================== -->
	                    </div>
                    </div>
                    <div th:unless="${BandMemberDetail}">
                    	<div style="flex-grow:3; width: 740px">
	                    	<input type="hidden" th:value="${band.bandNo}" id="bandNumber" >
	                    	<input type="hidden" id="userId" th:value="${session.loginUser.userId}">
	                        <div id="mainTemplate">
	                        	<div>
		                            <div id="articleArea">
		                            	<article style="border: 1px solid #eeeeee;padding:30px; height: 470px;">
							                    <div style="display: flex; flex-direction: column;">
							                    <div>
							                        <div  style="display: inline-flex; justify-content: space-between; padding-top: 20px;">
							                            <img class="rounded-circle" src="/css/band/image/blog/author.png" alt="" style="width: 70px; height: 70px;">
							                            <div  style="display: block; width: 300px; padding: 10px;">
							                                <ul class="blog_meta list_style" style="display: inline-block;">
							                                </ul>
							                            </div>
							                        </div>
							                        <h4></h4>
							                        <div>
							                            <p>íšŒì›ê°€ì… í›„ ì´ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
							                        </div>
							                    </div>
							                    <div class="" style="display: inline-flex; justify-content: space-between; padding-top: 20px;">
							                        <div><span></span></div>
							                    </div>
							                </div>
							            </article>
					               </div>
				               </div>
	                        </div>
	                    </div>
                    </div>
                    <div style="flex-grow:1; width: 260px">
                        	<div th:if="${BandMemberDetail} and ${BandMemberDetail.bandMemberStatus=='BA02'}">
	                        	<div class="blog_right_sidebar">
		                            <aside class="single_sidebar_widget popular_post_widget">
		                                <div class="dropdown">
		                                	<h3 class="widget_title dropbtn">ë‹¤ê°€ì˜¤ëŠ” ì¼ì •<i class="fa fa-cog" aria-hidden="true"></i></h3>
										    <div class="dropdown-content">
										        <a id="7">7ì¼ ì´ë‚´</a>
										        <a id="14">14ì¼ ì´ë‚´</a>
										        <a id="30">30ì¼ ì´ë‚´</a>
										      </div>
		                                </div>
		                                <div id="groupCal">
			                                <div class="media post_item" th:each="c : ${calendar}">
			                                    <div class="media-body">
			                                        <h3><a class="goToCal" th:text="${c.bandCalendarTitle}" th:style="|background-color:${c.bandCalendarMark}|"></a></h3>
			                                        <span th:text="${#dates.format(c.bandCalendarStart, 'yyyy-MM-dd')}" style="font-size: 12px"></span> ~
			                                        <span th:text="${#dates.format(c.bandCalendarEnd, 'yyyy-MM-dd')}" style="font-size: 12px"></span>
			                                    </div>
			                                </div>
		                                </div>
		                                <div class="br"></div>
		                            </aside>
		                    	</div>
	                    	</div>
	                    	<div th:unless="${BandMemberDetail}">
	                    		<div class="blog_right_sidebar" style="height: 470px;">
	                    			<aside class="single_sidebar_widget popular_post_widget"></aside>
	                    		</div>
	                    	</div>
                    </div>
                </div>
            </div>
        </section>
        <!--================Blog Area =================-->
        
        
    
	<div class="modal">
		<button>&times;</button>
		<div class="modalBox">
			<img src="" alt="">
			<p></p>
		</div>
	</div>
        <script th:inline="javascript">
        var header = /*[[${_csrf.headerName}]]*/
        	console.log(header);
        var token = /*[[${_csrf.token}]]*/
           console.log(token);
        var bandNo= $('#bandNo').val();
        $(function(){
        	let bandBoardDetailNo = $('#bandBoardDetailNo').val();
        	console.log(bandBoardDetailNo+'??ì™œ ì•ˆê°€ì ¸');
        	$('#mainTemplate').load("/own/band/bandGroup/bandBoardDetail?bandBoardDetailNo="+bandBoardDetailNo);
        	
        	//ë”ë³´ê¸° í˜ì´ì§€ìš©
         	//1í˜ì´ì§€
	        let bandNo = $('#bandNo').val();
	        let articleArea = $('#articleArea');
	        let multi = '';
	        let userId = $('#userId').val();
	        let bandLeaderid = $('#bandLeaderid').val();
		    function makeBoard(bandNo, bandBoardDetailNo){
	        	$.ajax({
		            url:'/own/band/bandGroup/fiveBoard?bandNo='+bandNo+'&bandBoardDetailNo='+bandBoardDetailNo,
		            dataType: 'json',
		            method: 'get',
		            contentType : "application/text; charset=utf-8;"
		        }).then(result => {
		                console.log(result);
		                //ìˆœí™˜ì‹œì‘
		                //ë²„íŠ¼ì— ë¶™ì¼ ê²Œì‹œíŒ ëë²ˆí˜¸(í˜ì´ì§•ìš©)
	                	let bandBoardDetailNo = ''
		                $(result).each(function(idx, ele){
		                	//likeTAG i class="fa fa-heart" aria-hidden="true"></i>
		                	let likeTag = '';
		                	if(ele.likeList['userId']!=null&&ele.likeList['userId']!=""){
		                		likeTag = `â¤`
		                	} else {
		                		likeTag = `ğŸ¤`
		                	}
		                	//ì‚¬ì§„ì´ ìˆëŠ”ì§€ ì²´í¬ // iframeì´ ìˆìœ¼ë©´ ì´ê±¸ë¡œ ëŒ€ì²´
		                	let imgTag = '';
		                	if(ele.bandImg!=null){
		                		imgTag = `<img src="/imgView/${ele.bandImg.mediaServerFile}" alt="" class="imgss" style="width: 678px; height: 280px;">`;
		                	}

		                	//iframeì„ ì°¾ê¸°ìœ„í•¨
		                	//ë™ì˜ìƒì€ ë‚´ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë”°ë¡œ ë¶™ì´ëŠ”ë°(ì—¬ê¸°ì„œëŠ” ì •ê·œí™” í•œ ë’¤..) ë™ì˜ìƒì€ htmlë¡œ ì‚½ì…ë˜ì–´ ì•ˆë¨..ì •ê·œí™”ì‹œ ë‹¤ ë‚ ì•„ê°€ë²„ë¦¼..
		                	//ë”°ë¡œ ë™ì˜ìƒë¶™ì—¬ì¤Œ.. ê¸°ìˆ ìƒ ë™ì˜ìƒë”°ë¡œ ì˜¬ë¦¬ëŠ”ê²Œ ì•ˆë¨..ã…œã…œ ë™ì˜ìƒì˜¬ë¦¬ê³  ë§Œì•½ ë”°ë¡œ ì‚¬ì§„ë„ ì˜¬ë ¸ë‹¤ë©´ ì´ê±´ ì—†ì•°..
		                	console.log(ele.bandBoardContent);
		                	if(ele.bandBoardContent.indexOf('<iframe')>0){
		                		let con = ele.bandBoardContent.substr(0, ele.bandBoardContent.indexOf('</iframe>'));
		                		console.log(con+'11111####################################');
		                		con = con.substr(ele.bandBoardContent.indexOf('<if'),con.length);
		                		con += con+'</iframe>';
		                		console.log(con+'</iframe>2222222####################################');
		                		//ì‚¬ì§„ì´ ìˆë‹¤ë©´ ë™ì˜ìƒìœ¼ë¡œ ë°”ê¿”ì£¼ê¸°
		                		imgTag = con;
		                	}
		                	//ë°´ë“œì¥ì´ë©´...<b><i class="fa fa-solid fa-crown"></i></b>
		                	let bandNickname = ele.bandNickname;
		                	if(bandLeaderid == userId){
		                		bandNickname += '<b><i class="fa fa-solid fa-crown"></i></b>'
		                	}
		                	//ì •ê·œí‘œí˜„ì‹ htmlíƒœê·¸ ì œê±°
		                	const reg = /<[^>]*>?/g;
		                	let newContent = ele.bandBoardContent.replace(reg,'');
		                    let articleTag = `<article style="border: 1px solid #eeeeee;padding:30px; ">
							                    <div style="display: flex; flex-direction: column;" class="tagg">
							                    <div>
							                        <div  style="display: inline-flex; justify-content: space-between; padding-top: 20px;">
							                            <img class="rounded-circle" src=/imgView/${ele.mediaServerFile} alt="" style="width: 70px; height: 70px;">
							                            <div  style="display: block; width: 300px; padding: 10px;">
							                                <ul class="blog_meta list_style" style="display: inline-block;">
							                                    <li style="display: block;">${bandNickname}</li>
							                                    <li style="display: block;">${ele.bandBoardDate}</li>
							                                </ul>
							                            </div>
							                        </div>
							                        
							                        <h4>${ele.bandBoardTitle}</h4>
							                        ${imgTag}
							                        <div class="blog_details${ele.bandBoardDetailNo}">
							                            <p>${newContent}</p>
							                        </div>
							                    </div>
							                    <a href="#" class="view_btn button_hover boardDett" id="${ele.bandBoardDetailNo}">View More</a>
							                    <div class="parentUnit" style="display: inline-flex; justify-content: space-between; padding-top: 20px;">
							                        <div class="heartt" name="${ele.bandBoardDetailNo}" style="display: flex; justify-content:space-between">
							                             <div class="heartClick" name="${ele.bandBoardDetailNo}">${likeTag}</div>
							                        	<span  class="heartClick" name="${ele.bandBoardDetailNo}">${ele.likeList["likeCount"]}</span>
							                        </div>
							                        <div class="boardDett" id="${ele.bandBoardDetailNo}">
							                        	<i class="lnr lnr-bubble boardDett" id="${ele.bandBoardDetailNo}"></i>
							                        	<span></span>${ele.reply}
							                        </div>
							                    </div>
							                </div>
							            </article>`;
			            
				                $(articleArea).append(articleTag);
				                //í˜ì´ì§€ ë²„íˆ°ì— ê²Œì‹œíŒ ë ìˆ«ìë‹¬ê¸°
				                bandBoardDetailNo = ele.bandBoardDetailNo;
				                
				              //ìº˜ë¦°ë” ë¶™ì´ê¸°
			                	if(ele.bandCalendar!=null){
			                		let calendar = ele.bandCalendar;
			                		//íƒ€ì´í‹€
			                		let title = calendar.bandCalendarTitle;
			                		//ë‚ ì§œ
			                		let startDay = calendar.bandCalendarStart;
			                		let endDay = calendar.bandCalendarEnd;
			                		let sYear = startDay.substr(0, 4);
			                		let eYear = endDay.substr(0, 4);
			                		
			                		startDay = new Date(calendar.bandCalendarStart);
			                		endDay = new Date(calendar.bandCalendarEnd);
			                		
			                		//ë‹¬
			                		let sMonth = (1+startDay.getMonth());
			                		let eMonth = (1+endDay.getMonth());
			                		//ë‚ 
			                		let sDay = startDay.getDate();
			                		let eDay = endDay.getDate();
			                		//ì‹œê°„
			                		let startTime = startDay.getHours();
			                		let endTime = endDay.getHours();
			                		//ë¶„
			                		let startTime2 = startDay.getMinutes()
			                		let endTime2 = endDay.getMinutes()
			                		//ìƒì„¸ì‹œì‘ì‹œê°„
			                		let sTime = (startTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" "
			                			sTime += startTime+"ì‹œ "
			                			sTime += startTime2+"ë¶„";
			                		//ìƒì„¸ëë‚˜ëŠ”ì‹œê°„
			                		let eTime = (endTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" " //ì˜¤ì „ ì˜¤í›„
			                				 + endTime+"ì‹œ " //12ì‹œê°„í‘œê¸°
			                				 + endTime2+"ë¶„";
			                		//ì‹œì‘ ìš”ì¼
			                		let mon = getDayOfWeek(startDay);
			                		//ë§ˆí¬ìƒ‰
			                		let color = calendar.bandCalendarMark;
			                	    let cal  = `<div style="width:678px; height:80px; border: 0.3rem solid ${color}; display:flex; justify-content:space-between" id="calendarModal">`
			                	    			cal += `<div style="padding:10px;"><h3 style="margin-bottom:0px">${sDay}</h3>`
			                					cal += `<p>${mon}</p></div>`
			                					cal += `<div style="padding:10px;"><h5>${title}</h5>`
			                					cal += `<p>${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}</p></div>`
			                				cal += `</div>`;
			                		//ìš”ì¼ë½‘ê¸°
			                		function getDayOfWeek(ë‚ ì§œë¬¸ìì—´){ //ex) getDayOfWeek('2022-06-13')
			                	    	const week = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
			                	    	const dayOfWeek = week[new Date(ë‚ ì§œë¬¸ìì—´).getDay()];
			                	    	return dayOfWeek;
			                		}
			                		let spot = ".blog_details"+ele.bandBoardDetailNo
			                		$(spot).prepend(cal);
			                	}
				                
			                })
			                if(result.length==5){
				                //more ëˆ„ë¥´ë©´ ë‚˜ì˜¤ëŠ” í˜ì´ì§€
				            	let btnTag = `<nav class="blog-pagination justify-content-center d-flex" id="multiId">
							                <a class="view_btn button_hover" id="nextBtn" style="width: 555px;">View More</a>
							                <input type="hidden" id="multivalue" value=${bandBoardDetailNo}>
							                </nav>`
							              
				                $(articleArea).append(btnTag);
				            	console.log('ë²„íŠ¼ value ë¶™ì€ê±° í™•ì¸'+$('#multivalue').val());           
			                } else {
			                	/* let endtag = `<div><h5>ëì…ë‹ˆë‹¤</h5></div>` */
			                	$(articleArea).append(endtag);
			                }
			                
		            	});
		    }
			    //ì²˜ìŒ 5ê°œ ë¶ˆëŸ¬ì˜´
			    makeBoard(bandNo, "");
	                
			    //ë²„íŠ¼ëˆ„ë¥´ë©´ more
			    $('#articleArea').on('click', '#nextBtn', function(){
			    	let mul = $('#multivalue').val();
			    	$('#multiId').empty();
			    	$('#multiId').remove();
	        		console.log('ëˆ„ë¥¸ ë©€í‹°'+mul)
	        		makeBoard(bandNo, mul);
	        	})
	        	
	        //ì´ë¯¸ì§€.. ì¸ë¼ì¸ img ìˆ¨ê¸°ê¸°..ì´ê±° ì´ë¯¸ì§€ ì—†ìœ¼ë‹ˆê¹Œ ì—ëŸ¬ëœ¸ ì´ê±° ì™œë§Œë“¤ì—ˆì§€??? ë°´ë“œê°€ì…í•  ë•Œ ì—ëŸ¬ë– ì„œ ì£¼ì„ì²˜ë¦¬ í•¨
	        /* $('#articleArea').find('img').each(function(idx,ele){
	        	console.log(ele);
	           	ele.hide();
	      	}) */
	        
	       	// 	ì´ë¯¸ì§€ í´ë¦­ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ ëª¨ë‹¬
				$('#articleArea').on('click', $("img"), function(e){
					//ì„ì‹œ ë°‘ì— ì´ ì¡°ê±´ ë‚´ê°€ ì”€
					if($(e.target).attr('class')=='imgss'){
						$(".modal").show();
					} else {
						return false;
					}
					// í•´ë‹¹ ì´ë¯¸ì§€ ê°€ê²¨ì˜¤ê¸°
					var imgSrc = $(e.target).attr("src");
					var imgAlt = $(e.target).attr("alt");
					console.log(imgSrc);
					console.log(imgAlt);
					
					$(".modalBox img").attr("src", imgSrc);
					$(".modalBox img").attr("alt", imgAlt);
					
					// í•´ë‹¹ ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
					var imgTit =  $(this).children("p").text();
					$(".modalBox p").text(imgTit);
					
			   // í•´ë‹¹ ì´ë¯¸ì§€ì— altê°’ì„ ê°€ì ¸ì™€ ì œëª©ìœ¼ë¡œ
					//$(".modalBox p").text(imgAlt);
				})
				
				//.modalì•ˆì— buttonì„ í´ë¦­í•˜ë©´ .modalë‹«ê¸°
				$(".modal button").click(function(){
					$(".modal").hide();
				});
				
				//.modalë°–ì— í´ë¦­ì‹œ ë‹«í˜
				$(".modal").click(function (e) {
			    if (e.target.className != "modal") {
			      return false;
			    } else {
			      $(".modal").hide();
			    }
			  });
	       	
			//ë‹¤ê°€ì˜¤ëŠ” ì¼ì • _7_14_30
			$('.dropdown-content').on('click', function(e){
				console.log(e.target.id);
				if(e.target.id!=null){
					$.ajax({
			            url:'/own/band/bandGroup/calendarDay?bandNo='+bandNo+'&day='+e.target.id,
			            dataType: 'json',
			            method: 'get',
			            contentType : "application/text; charset=utf-8;"
			        }).then(result => {
			        	console.log(result);
			        	//ì¼ì •ë§Œë“¤ê¸°..ê¸°ì¡´ ê²ƒ ì§€ìš°ê¸°..time.jsíŒŒì¼ì´ìš©
			        	$('#groupCal').empty();
			        	$(result).each(function(idx,ele){
			        		let sDay = SimpleDateTimeFormat(new Date(ele.bandCalendarStart));
			        		let cDay = SimpleDateTimeFormat(new Date(ele.bandCalendarEnd));
				        	let tag = `<div class="media post_item">
							        		<div class="media-body">
						        			<h3><a class="goToCal" style="background-color:${ele.bandCalendarMark}">${ele.bandCalendarTitle}</a></h3>
						        			<span style="font-size: 12px">${sDay}</span> ~
						        			<span style="font-size: 12px">${cDay}</span>
						        		</div>
						        	</div>			
						        	`
						   $('#groupCal').append(tag);
						   console.log(sDay+cDay);
			        	})
					})
				}
			})
			//ë“œë¡­ë°•ìŠ¤ css
			$('.dropdown-content a').on('click', function(){
				//0.2ì´ˆí›„
				setTimeout(() => {
					$('.dropdown-content').css('display','none');
				}, 200);
			})
			$('.dropbtn').hover(function(){
				//0.2ì´ˆí›„
				setTimeout(() => {
					$('.dropdown-content').css('display','block');
				}, 200);
			})
			
	       	//ê²Œì‹œíŒì´ë™
	    	$('.smallBoard').on('click', function(e){
	    		let bandBoardOptionNo = $(e.target).attr('name');
	    		$('#mainTemplate').load("/own/band/bandGroup/bandBoardList?bandNo="+bandNo+"&bandBoardOptionNo="+bandBoardOptionNo);	
	    	})
	    	//ê¸€ì“°ê¸°
	    	$('#writeBoard').on('click', function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/bandBoardWrite?bandNo="+bandNo);
	    		//$('#mainTemplate').empty();
	    		 // document.getElementById("ifr").src = "/own/band/bandGroup/bandBoardWrite?bandNo="+bandNo;
	    	})
	    	//ë‚´ ì •ë³´ìˆ˜ì •ìœ¼ë¡œ ì´ë™
	    	$('#myOption').on('click', function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/myOption?bandNo="+bandNo);
	    	})
	    	//ê°€ì¹˜ ì„¤ì •ìœ¼ë¡œ ì´ë™
	    	$('#bandOption').on('click', function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/bandOptionMain?bandNo="+bandNo);
	    	})
	    	$('#bandOption2').on('click', function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/bandOption2?bandNo="+bandNo);
	    	})
	    	//ìº˜ë¦°ë”ë¡œ ì´ë™
	    	$('#bandCalendar').on('click', function(){
	    		console.log(bandNo);
	    		$('#mainTemplate').load("/own/band/bandGroup/bandCalendar?bandNo="+bandNo);
	    	})
	    	//ìº˜ë¦°ë”ë¡œ ì´ë™2(ë“œë¡­ë°•ìŠ¤ì¼ì •ëˆŒëŸ¬ì„ ë•Œ) goToCal
	    	$('#groupCal').on('click', $('.goToCal'), function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/bandCalendar?bandNo="+bandNo);
	    	})
	    	//ì•¨ë²”ìœ¼ë¡œ ì´ë™
	    	$('#bandPhoto').on('click', function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/bandPhoto?bandNo="+bandNo);
	    	})
	    	//ê°€ì…ë²„íŠ¼
	    	 $('#signUpBand').on('click', function(){
	    		 $('#mainTemplate').load("/own/band/bandGroup/signUpBand?bandNo="+bandNo);
	    	 })
	    	//ê²€ìƒ‰ë²„íŠ¼
	        $('.searchBtn').on('click', function(){
	        	boardNo = $('.searchBtn').val();
	        	window.location = "/own/band/bandSearch?boardNo="+boardNo;
	        })
	        //ê²Œì‹œíŒê´€ë¦¬
	        $('#bandOption9').on('click', function(){
	    		$('#mainTemplate').load("/own/band/bandGroup/bandOption9?bandNo="+bandNo);
	    	})
	    	//ê²Œì‹œíŒìƒì„¸ë¡œ ì´ë™
	    	$('.arty:eq(0)').on('click', $('.boardDett'), function(e){
	    		let BoardNo = $(e.target).attr('id');
	    		if(BoardNo!=null&&BoardNo.indexOf('BDD_')>=0){
	    			$('#mainTemplate').load("/own/band/bandGroup/bandBoardDetail?bandBoardDetailNo="+BoardNo);
	    		}
	    	})
	    	//ê²€ìƒ‰
	    	$('#searchBoxBtn').on('click', function(){
	    		let searchValue = $('#searchBox').val();
	    		//ë°´ë“œë²ˆí˜¸ê¼­ë³´ë‚´ì•¼í•˜ê³ ..BandBoardDetailSearchVOì— ë“¤ì–´ê°€ì„œ ê²€ìƒ‰ì¡°ê±´ìœ¼ë¡œ ì“°ì¼ ê²ƒì„
	    		$('#mainTemplate').load("/own/band/bandGroup/bandBoardList?bandNo="+bandNo+"&searchValue="+searchValue);
	    	})
	    	
	    	/* function iframeHeight(){
			    var frm = document.getElementById('ifr').contentDocument; 
			    if (typeof frm == 'undefined') {//ie7ì´í•˜ 
			        frm = window.frames['testframe'].document; 
			    } 
			    document.getElementById('testframe').height = frm.body.clientHeight + 'px';
			} */
			//í•˜íŠ¸ //heartClick 
			$('.arty:eq(0)').on('click', $('.heartClick'), function(e){
				console.log($(e.target));
				let userId = $('#userId').val();
	    		let categoryNo = $(e.target).attr('name');
	    		console.log(categoryNo);
	    		let category = 'Band';
	    		data={userId, categoryNo, category}
	    		$.ajax({
		            url:'/own/likeAjax',
		            data: JSON.stringify(data),
		            contentType : "application/json;",
		            method: 'post',
		              beforeSend: function(xhr){
		                  xhr.setRequestHeader(header,token);
		                }
		        }).then(result => {
		        	console.log(result);
		        	let number = $(e.target).parentsUntil('.parentUnit').children(':eq(1)').text();
		        	if(result == 'add'){
		        		$(e.target).parentsUntil('.parentUnit').children(':eq(0)').text('â¤');
		        		$(e.target).parentsUntil('.parentUnit').children(':eq(1)').text(number-1+2);
		        	} else if(result == 'del'){
		        		$(e.target).parentsUntil('.parentUnit').children(':eq(0)').text('ğŸ¤');
		        		$(e.target).parentsUntil('.parentUnit').children(':eq(1)').text(number-1);
		        	}
		        })
	    	})
       })
    	</script>
    </div>
    </body>
</html>