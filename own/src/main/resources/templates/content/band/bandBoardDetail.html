<html xmlns:th="http://www.thymeleaf.org"lang="ko">

<style>
	.lis {
		list-style: none;
		padding: 10px;
		border-bottom: 1px solid #eeeeee;
		border-top: 1px solid #eeeeee;
	}
	.textarea{
	width:500px; 
	height:150px; 
	    resize:none;/* í¬ê¸°ê³ ì • */ 
	/*   resize: horizontal; // ê°€ë¡œí¬ê¸°ë§Œ ì¡°ì ˆê°€ëŠ¥ 
		resize: vertical;  ì„¸ë¡œí¬ê¸°ë§Œ ì¡°ì ˆê°€ëŠ¥  */
	}
 	.decoLine {
 		text-decoration-line: underline;
  		text-decoration-color: f3c300;
 	}
	/*ì§€ë„*/
	.map_wrap {
		position: relative;
		width: 100%;
		height: 350px;
	}
	
	.title {
		font-weight: bold;
		display: block;
	}
	
	.hAddr {
		position: absolute;
		left: 10px;
		top: 10px;
		border-radius: 2px;
		background: #fff;
		background: rgba(255, 255, 255, 0.8);
		z-index: 1;
		padding: 5px;
	}
	
	#centerAddr {
		display: block;
		margin-top: 2px;
		font-weight: normal;
	}
	
	.bAddr {
		padding: 5px;
		text-overflow: ellipsis;
		overflow: hidden;
		white-space: nowrap;
	}
	/*ì§€ë„ ë*/
	.modal {
		display: none;
		z-index: 500;
		width: 100%;
		height: 100vh;
		position: fixed;
		top: 0;
		left: 0;
		background-color: rgba(0, 0, 0, 0.3);
	}
	
	.modal button {
		position: absolute;
		top: 3rem;
		right: 3rem;
		background: transparent;
		border: 0;
		color: #ffffff;
		font-size: 3rem;
	}
	
	.modalBox {
		position: relative;
		top: 20%;
		left: 50%;
		transform: translate(-50%, -20%);
		background-color: #ffffff;
		width: 30%;
		height: 30%;
		text-align: center;
	}
	
	.modalBox img {
		width: 100%;
	}
	
	.modalBox p {
		color: #ffffff;
		background-color: #000;
		font-size: 2rem;
		padding: .2rem;
	}
	
	#my_calendar_modal {
		display: none;
		width: 650px;
		padding: 20px 30px;
		background-color: #fefefe;
		border: 1px solid #888;
		border-radius: 3px;
		position: fixed;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
	
	#my_calendar_modal .modal_close_btn {
		position: absolute;
		top: 10px;
		right: 10px;
	}
	
	.bgg {
		position: fixed;
		z-index: 500;
		left: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
		overflow: auto;
		/* ë ˆì´ì–´ ìƒ‰ê°ˆì€ ì—¬ê¸°ì„œ ë°”ê¾¸ë©´ ë¨ */
		background-color: rgba(0, 0, 0, 0.4);
	}
	
	.cModal {
		position: fixed;
		display: block;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
	/* //í˜ì´ì§• ë²„íŠ¼ */
	.pageNum .clickable{
	  display: inline-block;
	  padding: 3px 5px;
	  margin-right: 10px;
	  font-family:Tahoma;
	  background: #ccc;
	  color: #6ab0cd;
	  text-decoration: none;
	  cursor:pointer;
	}
	.pageNum active {
	  background: #00394f;
	  background: #333;
	  color: #fff;
	}
	.off-screen {
	  display: none;
	  cursor:pointer;
	}
	.replyPagination  {
	  width: 500px;
	  text-align: center;
	  cursor:pointer;
	}
	.replyPagination  .pageNum {
	  display: inline-block;
	  padding: 3px 5px;
	  margin-right: 10px;
	  font-family:Tahoma;
	  background: #ccc;
	  color: #fff;
	  text-decoration: none;
	  cursor:pointer;
	  border-radius: 10px;
	}
	.replyPagination .pageNum.active {
	  background: #6ab0cd;
	  color: #fff;
	}
	/* ì¶”ê°€ */
	.bandBox {
	    width: 260px;
	    height: 270px; 
	    border-radius: 30%;
	    overflow: hidden;
	}
	.bandProfile {
	    width: 260px;
	    height: 270px;
	    object-fit: cover;
	}
	.dropdown{
		  position : relative;
		  display : inline-block;
		}
		
		.dropbtn_icon{
		  font-family : 'Material Icons';
		}
		.dropbtn{
		  border-radius : 4px;
		  background-color: #f5f5f5;
		  font-weight: 400;
		  color : rgb(37, 37, 37);
		  width :200px;
		  text-align: left;
		  cursor : pointer;
		  font-size : 12px;
		}
		.dropdown-content{
		  display : none;
		  position: absolute;
		  z-index: 999;
		  font-weight: 400;
		  background-color:white;
		  min-width: 200px;
		  top: 40px;
		}
		.dropdown-content a{
		  display : block;
		  text-decoration : none;
		  color : rgb(37, 37, 37);
		  font-size: 12px;
		  padding : 12px 20px;
		  cursor: pointer;
		}
		
		.dropdown-content a:hover{
		  background-color : #ececec
		}
		.dropdown:hover .dropdown-content {
		  display: block;
		}
		.clickBoard {
			color : blue;
			text-decoration : underline;
		}
		#ifr {
			 width: 800px;
			 height: 1000px;
		}
		.nav-item, .nav-link, .dropdown-item {
			cursor: pointer;
		}
</style>
<div id="template" style="flex-grow: 3; width: 740px">
		<article style="border: 1px solid #eeeeee; padding: 30px;">
			<h4 class="hoverBtn" id="toBoard" th:name="${board.bandBoardOptionNo}" style="display: inline">[[${board.bandBoardName}]]</h4>
			<p class="hoverBtn"  style="display: inline; margin-top: 5px;"><i class="fa-solid fa-chevron-right"></i></p>
			<input type="hidden" id="bandBoardDetailNo"
				th:value="${board.BandBoardDetailNo}"> <input type="hidden"
				id="bandNo" th:value="${board.bandNo}"> <input type="hidden"
				id="userId" th:value="${session.loginUser.userId}">
				<input type="hidden" th:value="${board.bandBoardOptionNo}" id="bandBoardOptionNo">
				<input type="hidden" th:value="${board.bandBoardWriter}" id="bandBoardWriter">
<!-- ============ ê²Œì‹œíŒì‹œì‘ ============= -->
				<hr>
				<div style="display: flex; justify-content: space-between;">
					<div style="display: flex;">
						<h5 id="bandRemarks" th:if="${board.bandRemarks }" th:text="|[${board.bandRemarks }]|" style="display:inline; margin-right: 10px;"></h5>
						<h4 id="title" th:text="${board.bandBoardTitle }" style="display:inline"></h4>
					</div>
					<div>
						<button type="button" id="btnUpdate" class="btn btn-primary mb-2"
						th:if="${#strings.equals(session.loginUser.userId, board.bandBoardWriter)}"
						>ìˆ˜ì •</button>
						<button type="button" id="btnDelete" class="btn btn-primary mb-2"
						th:if="${#strings.equals(session.loginUser.userId, board.bandBoardWriter)}"
						>ì‚­ì œ</button>
					</div>
				</div>
				<div style="display: flex; flex-direction: column;" class="tagg">
	                <div>
	                    <div style="display: inline-flex; justify-content: space-between; width: 700px;">
	                        <img class="" th:src="|/imgView/${board.mediaServerFile}|" alt="" style="width: 70px; margin-top:10px; height: 70px; box-shadow: 5px 5px 10px grey; border: #6a60cd; border-radius:15px;">
	                        <div  style="display: block; width: 350px; padding: 12px; margin-right: 180px;">
	                            <ul class="blog_meta list_style hoverCursor" style="display: inline-block;">
	                                <li style="display: block;" id="writer">[[${board.bandNickname}]]</li>
	                                <li style="display: block;"id="RegDate" th:text="${#dates.format(board.bandBoardDate, 'yyyy-MM-dd HH:mm:ss')}"></li>
	                            </ul>
	                            <p id="cnt">ì¡°íšŒ [[${board.bandBoardCnt}]]</p>
	                        </div>
	                        <div class="nav-item dropdown droMom" style="margin-right: 20px;">
                                <a class="nav-item nav-link" data-toggle="dropdown"><i class="fa-solid fa-ellipsis" id="bchild"></i></a>
                                       <div class="dropdown-menu rounded-0 m-0" name="bchilds" style="top: 30px;">
                                   <a class="dropdown-item">ì‹ ê³ </a>
                                   <a class="dropdown-item">ë‹«ê¸°</a>
                                </div>
                            </div>   
						</div>
					</div>
				</div>
<!--=============== ì»¨í…ì¸  ===============-->
				<hr style="margin-top: -1rem;">
				<div>			
					<div class="form-group">
						<div id="bCalendar"></div>
						<div th:utext="${board.bandBoardContent }"></div>
					</div>
				</div>	
			<div>
<!--=============== ëŒ“ê¸€ ===============-->			
				<div style="display: flex; justify-content: flex-start;">
					<div id="bandLike" class="hoverBtn" style="display: inline-block; margin-right: 10px;"></div>
					<th:block th:if="${#strings.equals(board.bandBoardTag, 'BH01')}">
					<div id="bandReply" style="display: inline-block;"><i class="lnr lnr-bubble"></i><span id="replyCnt">3</span></div>
					</th:block>
				</div>
			</div>
			<div id=repp th:if="${#strings.equals(board.bandBoardTag, 'BH01')}">
				<h5 style="margin-top: 10px;">ëŒ“ê¸€</h5>
				<table class="table" id="replybody">
				</table>
				<div class="btnContent">
					<div class="replyPagination " id="replyPagination" style="margin: 0 auto;"></div>
				</div>
				</div>
				<div>
				<hr>
				<th:block th:if="${#strings.equals(board.bandBoardTag, 'BH01')}">
				<form id="frmRe">
					<div class="form-group">
						<textarea class="form-control" rows="5" id="reply" maxlength="150" placeholder="ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”" style="resize: none;"onfocus="this.placeholder = ''" onblur="this.placeholder = 'ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”'" required></textarea>
						<input type="hidden" class="form-control" id="replyer" th:value="${session.loginUser.userId}">
						<button type="button" id="btnReployInsert"class="btn btn-primary mb-2" style="margin-top: 5px; margin-bottom:10px; float: right;">ëŒ“ê¸€ì‘ì„±</button>
					</div>
				</form>
				</th:block>
			</div>
		</article>
	</div>
	<!-- ========ì´ë¯¸ì§€ íŒì—… ë  ê³³======== -->
	<div class="modal">
		<button>&times;</button>
		<div class="modalBox">
			<img src="" alt="">
			<p></p>
		</div>
	</div>
	<!-- ========ì´ë¯¸ì§€ íŒì—… ë======== -->
	<!-- ========ì¼ì • ëª¨ë‹¬======== -->
	<!--==ìº˜ë¦°ë” ëª¨ë‹¬ì°½ ==-->
	<div id="my_calendar_modal">
		<div id="modalform">
			<div th:if="${not #strings.isEmpty(board.bandCalendar)}">
				<!--================ ì¼ì •ìƒì„¸ =================-->
				<div>
					<div
						style="width: 500x; height: 100px; display: flex; justify-content: space-between"
						id="calendarModal2">
						<input type="hidden" th:value="${board.bandCalendar.bandCalendarNo}" id="bandCalendarNo">
						<div style="padding: 10px 30px;">
							<h3 id="jsDD" style="margin-bottom: 0px; text-align:center;"></h3>
							<p style=" text-align:center;" id="jsDay"></p>
							<!-- ì´ê±´ ë°‘ì—ì„œ ë¶™ì„ -->
						</div>
						<div style="padding: 10px;">
							<h5 th:text="${board.bandCalendar.bandCalendarTitle}"></h5>
							<p id="jsDeDay" style="margin-bottom: 0px"></p>
							<span
								th:style="|color: ${board.bandCalendar.bandCalendarMark}; margin-right:10px;|"><i class="fa-regular fa-calendar-check"></i></span>
							<span th:text="${board.bandBoardWriter}"></span>
						</div>
					</div>
				</div>
				<!--================ ì¼ì •ìƒì„¸ ë =================-->
				<!--================ ifì°¸ì„ì—¬ë¶€ ================= not ë¶™ì—¬ì•¼ í•¨..ì„ì‹œ-->
				<div th:if="${not #strings.isEmpty(board.bandCalendar.bandCalendarOption)}" style="margin-top:20px;">
					<h6 class="typo-list"  style="color: #6ab0cd;">ì°¸ì„ì—¬ë¶€ <b>íˆ¬í‘œë§ˆê°ì¼: <b th:text="|${#dates.format(board.bandCalendar.bandCalendarOptionDay, 'yyyy-MM-dd HH:mm')}" style="color: white; background-color:#6ab0cd; font-weight: 300; font-size: 13px;"></b></b></h6>
					<div id="attendChk"> 
						<!-- <ul style="list-style: none;">
							<!-- bandCalendarOptionDayë³´ë‹¤ ëŠ¦ìœ¼ë©´ ì²´í¬ ëª»í•˜ê²Œ ë§‰ì•„ì•¼í•¨ -->
							<!-- <li><span>ğŸ¤</span>ì°¸ì„<span style="float: right;">ğŸ’§</span></li>
							<li><span>ğŸ¤</span>ë¶ˆì°¸ì„<span style="float: right;">ğŸ’§</span></li>
							<li><span>ğŸ¤</span>ë¯¸ì •<span style="float: right;">ğŸ’§</span></li>
						</ul> -->
					</div>
				</div>
				<!--================ ifì°¸ì„ì—¬ë¶€ ë =================-->
				<!--================ ifì§€ë„ =================-->
				<div
					th:if="${not #strings.isEmpty(board.bandCalendar.bandCalendarLocation)}">
					<h6 class="typo-list" style="color:#6ab0cd;"
						th:text="${board.bandCalendar.bandCalendarLocation}"></h6>
					<div id="map" style="width:100%;height:350px;"></div>
				</div>
				<!--================ ifì§€ë„ ë =================-->
			</div>
			<!-- <button type="button" id="calBtn">ì´ ì¼ì •ì´ ì²¨ë¶€ëœ ê¸€ í™•ì¸í•˜ê¸°</button> -->
			
		</div>
		<a class="modal_close_btn hoverBtn" style="text-decoration: none;">ë‹«ê¸°</a>
	</div>
	<!--==ìº˜ë¦°ë” ëª¨ë‹¬ì°½ ==-->

<script src="/css/band/js/time.js"></script>
<script th:inline="javascript">
        var header = /*[[${_csrf.headerName}]]*/
        	console.log(header);
        var token = /*[[${_csrf.token}]]*/
           console.log(token);
        console.log(bandLeaderid);
$(function(){
	//ë°´ë“œì¥ì´ë©´(ì „ì—­ë³€ìˆ˜ì‚¬ìš©) ë§ˆí¬ë‹¬ì•„ì£¼ê¸°
	if(bandLeaderid==$('#bandBoardWriter').val()){
		let val = $('#writer').text()+'<small style="color:#f8b600"><i class="fa-solid fa-crown"></i></small>';
		$('#writer').html(val);
	}
	//ì¼ì •ì¶”ê°€í•˜ê¸°....
	/*<![CDATA[*/
	var calendar = /*[[${board.bandCalendar}]]*/
	console.log(calendar);
	if(calendar!=null){
		//íƒ€ì´í‹€
		let title = calendar.bandCalendarTitle;
		//ë‚ ì§œ
		let startDay = calendar.bandCalendarStart;
		let endDay = calendar.bandCalendarEnd;
		let sYear = startDay.substr(0, 4);
		let eYear = endDay.substr(0, 4);
		
		startDay = new Date(calendar.bandCalendarStart);
		endDay = new Date(calendar.bandCalendarEnd);
		
		//ë‹¬
		let sMonth = (1+startDay.getMonth());
		let eMonth = (1+endDay.getMonth());
		//ë‚ 
		let sDay = startDay.getDate();
		let eDay = endDay.getDate();
		//ì‹œê°„
		let startTime = startDay.getHours();
		let endTime = endDay.getHours();
		//ë¶„
		let startTime2 = startDay.getMinutes()
		let endTime2 = endDay.getMinutes()
		//ìƒì„¸ì‹œì‘ì‹œê°„
		let sTime = (startTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" "
			sTime += startTime+"ì‹œ "
			sTime += startTime2+"ë¶„";
		//ìƒì„¸ëë‚˜ëŠ”ì‹œê°„
		let eTime = (endTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" " //ì˜¤ì „ ì˜¤í›„
				 + endTime+"ì‹œ " //12ì‹œê°„í‘œê¸°
				 + endTime2+"ë¶„";
		//ì‹œì‘ ìš”ì¼
		let mon = getDayOfWeek(startDay);
		//ë§ˆí¬ìƒ‰
		let color = calendar.bandCalendarMark;
	    let cal  = `<div style="width:678px; height:80px; cursor: pointer; border: 0.2rem solid ${color}; border-radius:20px; padding:0px 10px; margin:10px 0px;display:flex; justify-content:space-between" id="calendarModal">`
	    			cal += `<input type="hidden" value="${calendar.bandCalendarNo}">`
	    			cal += `<div style="margin-bottom:0px; padding-top:10px; padding-left:10px; text-align:center;pointer-events: none;"><h3 style="margin-bottom:0px">${sDay}</h3>`
					cal += `<p style="text-align:center;pointer-events: none;">${mon}</p></div>`
					cal += `<div style="padding:10px;pointer-events: none;"><h5 style="color:${color};"><span style="color:${color}; margin-right:10px;"><i class="fa-regular fa-calendar-check"></i></span>${title}</h5>`
					cal += `<p style="pointer-events: none;">${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}</p></div>`
				cal += `</div>`;
		//ìš”ì¼ë½‘ê¸°
		function getDayOfWeek(ë‚ ì§œë¬¸ìì—´){ //ex) getDayOfWeek('2022-06-13')
	    	const week = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
	    	const dayOfWeek = week[new Date(ë‚ ì§œë¬¸ìì—´).getDay()];
	    	return dayOfWeek;
		}
		$('#bCalendar').append(cal);
		
		//ëª¨ë‹¬ë¡œ ë‚˜ì˜¤ëŠ” ê³³ì— ëª‡ ê°œ ë¶™ì„
		$('#jsDay').text(mon);
		$('#jsDD').text(sDay);
		$('#jsDeDay').text(`${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}`);
		
	}
	//ìœ ì €ì•„ì´ë””
	let userId = $('#userId').val();
	let bandNo = $('#bandNo').val();
	console.log(userId);
	//ì¢‹ì•„ìš”ë¦¬ìŠ¤íŠ¸..ëŒ“ê¸€ë¦¬ìŠ¤íŠ¸
	let DetailNo = $('#bandBoardDetailNo').val();
	//ì¢‹ì•„ìš”í•¨ìˆ˜
	function heartIt(){
		$.ajax({
			url: '/own/band/bandGroup/bandBoardDetailLike?bandBoardDetailNo='+DetailNo,
			dataType: 'json',
			method: 'get',
			contentType : "application/text; charset=utf-8;"
		}).then(result => {
			console.log(result);
			let likeTag = '';
			$(result).each(function(idx, ele){
	        	//likeTAG
	        	if(ele.userId==userId){
	        		likeTag = 'ğŸ’—'
	       			return false;
	        	}
			})
			if(likeTag == ''){
				likeTag = 'ğŸ¤'
			}
			//ì¢‹ì•„ìš” ìˆ˜
			let r = result.length;
			if(r == null){
				r = 0;
			}
			$('#bandLike').append('<span class="likeIt">'+likeTag+'</span><span class="likeIt">ì¢‹ì•„ìš” '+r+'</span>');
		})
	}
	heartIt();
	//í´ë¦­ì´ë²¤íŠ¸
	$('#bandLike').on('click', $('.likeIt'), function(){
		let bandBoardDetailNo = $('#bandBoardDetailNo').val();
		console.log(bandBoardDetailNo);
		
		let userId = $('#userId').val();
   		let categoryNo = bandBoardDetailNo;
   		let category = 'Band';
   		data={userId, categoryNo, category}

   		$.ajax({
            url:'/own/likeAjax',
            data: JSON.stringify(data),
            contentType : "application/json;",
            method: 'post',
              beforeSend: function(xhr){
                  xhr.setRequestHeader(header,token);
                }
        }).then(result => {
        	console.log(result);
        	if(result == 'add'||result == 'del'){
        		$('#bandLike').empty();
        		heartIt();
        	} else if(result == 'del'){
        		alert('ì¢‹ì•„ìš”ì‹¤íŒ¨');
        	}
        })
	})
	//
// 	ì´ë¯¸ì§€ í´ë¦­ì‹œ í•´ë‹¹ ì´ë¯¸ì§€ ëª¨ë‹¬
	$("img").click(function(){
		$(".modal").show();
		// í•´ë‹¹ ì´ë¯¸ì§€ ê°€ê²¨ì˜¤ê¸°
		var imgSrc = $(this).attr("src");
		var imgAlt = $(this).attr("alt");
		console.log(imgSrc);
		console.log(imgAlt);
		
		$(".modalBox img").attr("src", imgSrc);
		$(".modalBox img").attr("alt", imgAlt);
		
		// í•´ë‹¹ ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
		var imgTit =  $(this).children("p").text();
		$(".modalBox p").text(imgTit);
		
   // í•´ë‹¹ ì´ë¯¸ì§€ì— altê°’ì„ ê°€ì ¸ì™€ ì œëª©ìœ¼ë¡œ
		//$(".modalBox p").text(imgAlt);
	});
	
	//.modalì•ˆì— buttonì„ í´ë¦­í•˜ë©´ .modalë‹«ê¸°
	$(".modal button").click(function(){
		$(".modal").hide();
	});
	
	//.modalë°–ì— í´ë¦­ì‹œ ë‹«í˜
	$(".modal").click(function (e) {
    if (e.target.className != "modal") {
      return false;
    } else {
      $(".modal").hide();
    }
	
  });
	//ê¸€ ì‚­ì œ
	$('#btnUpdate').on('click', function(){
    		$('#template').load("/own/band/bandGroup/bandBoardUpdate?BandBoardDetailNo="+DetailNo+'&bandNo='+bandNo);
	})
	//ì‚­ì œ
   $('#btnDelete').on('click', function(){
      //ì‚­ì œë§¤í¬ë¡œë¥¼ ì˜µì…˜ë²ˆí˜¸ë¡œ ë§Œë“¤ì–´ë†”ì„œ ê¸€ë²ˆí˜¸ì§€ë§Œ ì´ê±¸ë¡œ ë³´ë‚´ê² ìŒ
      let bandBoardOptionNo = $('#bandBoardDetailNo').val();
      console.log('?')
      if(confirm('ê¸€ì„ ì‚­ì œí•©ë‹ˆë‹¤.')){
         $.ajax({
               url:'/own/band/bandGroup/bandBoardDeleteEach?bandBoardOptionNo='+bandBoardOptionNo,
               dataType: 'json',
               method: 'get',
               contentType : "application/text; charset=utf-8;"
           }).then(result => {
              console.log(result);
              if(result>0){
                 bandBoardOptionNo = $('#bandBoardOptionNo').val();
                 $('#template').load("/own/band/bandGroup/bandBoardList?bandBoardOptionNo="+bandBoardOptionNo);
              } else {
                 alert('ì‚­ì œ ì‹¤íŒ¨');
              }
           })
      }
   })
	//ëª¨ë‹¬
	function calModal(id) {
        var cModal = document.getElementById(id);
		console.log(cModal);	
        // ëª¨ë‹¬ div ë’¤ì— í¬ë„ë¬´ë ˆí•œ ë ˆì´ì–´
        var bgg = document.createElement('div');
        console.log(bgg);
        bgg.classList.add('bgg');
        document.body.append(bgg);
		
        cModal.classList.add('cModal');
        cModal.style.display='block';
        document.body.append(cModal);        
        // ë‹«ê¸° ë²„íŠ¼ ì²˜ë¦¬, ì‹œêº¼ë¨¼ ë ˆì´ì–´ì™€ ëª¨ë‹¬ div ì§€ìš°ê¸°
        cModal.querySelector('.modal_close_btn').addEventListener('click', function() {
            bgg.remove();
            cModal.style.display = 'none';
        });
        if(calendar!=null){
        	let latLong = calendar.bandCalendarLocationLatlong;
        	console.log(latLong);
            let lat = latLong.substr(1, latLong.indexOf(',')-1);
            let longg = latLong.substr(latLong.indexOf(' ')+1);
            longg = longg.substr(0, longg.indexOf(')')-1);
            console.log(lat+'+'+longg);
       		map.setCenter(new daum.maps.LatLng(lat, longg));
        	map.relayout();
        	mapOption = { 
        		    center: new kakao.maps.LatLng(lat, longg), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
        		    level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
        		};
        	marker.setMap(new kakao.maps.Map(document.getElementById('map'), mapOption));
        	//ëª¨ë‹¬ ì¼¤ ë•Œ ë§ˆë‹¤ ì¼ì •ë°›ì•„ì˜¤ê¸°
 	       let bandCalendarNo = $('#bandCalendarNo').val();
 	       console.log('ìº˜ë¦°ë”ë²ˆí˜¸'+bandCalendarNo)
 	       $.ajax({
		            url:'/own/band/bandGroup/CalendarAttend?bandCalendarNo='+bandCalendarNo,
		            dataType: 'json',
		            method: 'get',
		            contentType : "application/text; charset=utf-8;"
		        }).then(result => {
					console.log(result);
					if(result != null){
						makeCalModal(result)
					}
		        })
        }
    }
	//ì¼ì •ì²´í¬í´ë¦­ëª¨ë‹¬
	$('#attendChk').on('click', $('.attch'), function(e){
		//ë§ˆê°ì¼ ì§€ë‚˜ì„œ íˆ¬í‘œ
		console.log('ë§ˆê°ì¼'+new Date(calendar.bandCalendarOptionDay))
		console.log('ë§ˆê°ì¼'+new Date())
		if(calendar.bandCalendarOptionDay==null || new Date(calendar.bandCalendarOptionDay)<new Date()){
			alert('íˆ¬í‘œê¸°í•œì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.');
			return false;
		}
		if($(e.target).attr('class')=='attch'){
			//ì„ íƒí•œ ê²ƒì˜ name
			let heartChk = $(e.target).attr('name');
			//ë‚´ ì²´í¬ í™•ì¸ ìš°ì„  ë‹¤ ì§€ìš°ê³  ëˆŒë¦°ê²Œ ì²´í¬ë¼ë©´ ì²´í¬í•´ì£¼ê¸°...ê·¸ì™¸ì— ì²´í¬=>ë¹„ì²´í¬ë©´ ê·¸ëƒ¥ ë‹¤ ë¹ˆ ì¹¸ë¨
			let myBk1 = 'ğŸ¤';
			let nameBk1 = 'BK01'
			let myBk2 = 'ğŸ¤';
			let nameBk2 = 'BK02'
			let myBk3 = 'ğŸ¤';
			let nameBk3 = 'BK03'
			//ë„˜ê¸¸ ê°’ìš©
			let result = 0;
			if(heartChk=='BK01') {
				myBk1 = 'â¤';
				nameBk1 = 'BK01chk';
				result = 'BK01';
			} else if (heartChk=='BK02') {
				myBk2 = 'â¤';
				nameBk2 = 'BK02chk';
				result = 'BK02';
			} else if (heartChk=='BK03') {
				myBk3 = 'â¤';
				nameBk3 = 'BK03chk';
				result = 'BK03';
			}
			//ì„¸ê°œì˜ name ìƒíƒœê°€ ì¶œë ¥ë¨..( ì´ì¤‘ ì²´í¬ëœ ê²ƒ í˜¹ì€ ì „ë¶€ ë„ì´ë©´ ë„ì¸ ìƒíƒœë¡œ ì•„ì‘ìŠ¤ë¡œ ë³´ë‚¼ ì˜ˆì •)
			/* $(e.currentTarget).find('.attch').each(function(idx,ele){
				console.log($(ele).attr('name'));
			}) */
			let bandCalendarNo = $('#bandCalendarNo').val();
			let bandUserId = $('#userId').val();
			let bandAttend = result==0?null:result;
			
			$.ajax({
				url: '/own/band/bandGroup/calendarUpdel?bandCalendarNo='+bandCalendarNo+'&bandMemberNo='+bandUserId+'&bandAttend='+bandAttend,
				dataType: 'json',
				method: 'get',
				contentType : "application/text; charset=utf-8;"
			}).then(result => {
				console.log(result);
				if(result != null){
					makeCalModal(result)
				}
			})
		}
	})
	//ëª¨ë‹¬ìƒì„¸ë§Œë“¤ê¸°
	function makeCalModal(result){
		let attendChk = $('#attendChk');
		attendChk.empty();
		let ulTag = $('<ul style="list-style: none;" />')
		let bk01 = 0; //ì°¸ì„
		let bk01Per = new Array(); //ì°¸ì„ì¸ì›
		let bk02 = 0; //ë¯¸ì°¸ì„
		let bk02Per = new Array(); //ë¯¸ì°¸ì„ì¸ì›
		let bk03 = 0; //ë¯¸ì •
		let bk03Per = new Array(); //ë¯¸ì°¸ì„ì¸ì›
		let myChk = ''; // ë³¸ì¸ ê±° ì²´í¬
		$(result).each(function(idx, ele){
			if(ele.bandAttend=="BK01"){
				bk01++;
				bk01Per.push(ele.bandMemberNo);
			} else if(ele.bandAttend=="BK02"){
				bk02++;
				bk02Per.push(ele.bandMemberNo);
			} else if(ele.bandAttend=="BK03"){
				bk03++;
				bk03Per.push(ele.bandMemberNo);
			}
			let userId = $('#userId').val();
			if(ele.bandUserId==userId){
				myChk = ele.bandAttend;
			}
		})
		//ì°¸ì„ì ë„ˆë¬´ ë§ìœ¼ë©´ ìë¥´ê¸°
		if(bk01Per.length>2){
			bk01Per.splice(2, bk01Per.length, '...');
		}
		if(bk02Per.length>2){
			bk02Per.splice(2, bk02Per.length, '...');
		}
		if(bk03Per.length>2){
			bk03Per.splice(2, bk03Per.length, '...');
		}
		
		//ë‚´ ì²´í¬ í™•ì¸
		let myBk1 = 'ğŸ¤';
		let nameBk1 = 'BK01'
		let myBk2 = 'ğŸ¤';
		let nameBk2 = 'BK02'
		let myBk3 = 'ğŸ¤';
		let nameBk3 = 'BK03'
		console.log(myChk);
		if(myChk == 'BK01'){
			myBk1 = 'ğŸ’–'
			nameBk1 = 'BK01chk'
		} else if(myChk == 'BK02'){
			myBk2 = 'ğŸ’–';
			nameBk2 = 'BK02chk'
		} else if(myChk == 'BK03'){
			myBk3 = 'ğŸ’–';
			nameBk3 = 'BK03chk'
		}
		let liTag = `
			<li class="lis"><span class="attch" name=${nameBk1}>${myBk1}</span>ì°¸ì„<b class="toSt">${bk01Per.toString()}</b><span name="BK01" class="attch2" style="float: right; cursor: pointer;">ğŸŒ•</span></li>
			<li class="lis"><span class="attch" name=${nameBk2}>${myBk2}</span>ë¶ˆì°¸ì„<b class="toSt">${bk02Per.toString()}</b><span name="BK02" class="attch2" style="float: right; cursor: pointer;">ğŸŒ•</span></li>
			<li class="lis"><span class="attch" name=${nameBk3}>${myBk3}</span>ë¯¸ì •<b class="toSt">${bk03Per.toString()}</b><span name="BK03" class="attch2" style="float: right; cursor: pointer;">ğŸŒ•</span></li>
		`;
		attendChk.append(liTag);
	}
	//ì°¸ì—¬ì¤‘ì¸ì‚¬ëŒ í™•ì¸ ì°½
	$('#attendChk').on('click', $('.attch2'), function(e){
		if($(e.target).attr('class')=='attch2'){
			let bandCalendarNo = $('#bandCalendarNo').val();
			//ì–´ë˜ ìœ í˜•ì˜ ì²´í¬ë¥¼ ë³¼ ì§€ ì €ì¥
			let type = $(e.target).attr('name');
			window.open( "/own/band/bandCalendarChk?bandAttend="+type+"&bandCalendarNo="+bandCalendarNo, "Child", "width=500px, height=600px, top=50%, left=50% resizable = no, scrollbars = no" );	
		}
	})
	//ì¼ì •í´ë¦­ëª¨ë‹¬
	$('#calendarModal').on('click', function(){
		calModal('my_calendar_modal');
	})
	
	//ì—¬ê¸°ë¶€í„° ëŒ“ê¸€
	
	//ì—¬ê¸°ê¹Œì§€ ëŒ“ê¸€
	
	
})	
</script>
<script th:inline="javascript">
//ì¼ì • ì§€ë„....
/*<![CDATA[*/
var calendar = /*[[${board.bandCalendar}]]*/
/*]]>*/
console.log(calendar);
	if(calendar != null){
	
	//ëª¨ë‹¬ë¡œ ë„ìš¸ ë•Œ ì§€ë„....í¬ê¸° ë§ì¶”ê¸°
    //(37.53488514319734, 126.9881144036468)
    let latLong = calendar.bandCalendarLocationLatlong;
	console.log(latLong);
    let lat = latLong.substr(1, latLong.indexOf(',')-1);
    let longg = latLong.substr(latLong.indexOf(' ')+1);
    longg = longg.substr(0, longg.indexOf(')')-1);
    console.log(lat+'+'+longg);
		
	var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div 
	mapOption = { 
	    center: new kakao.maps.LatLng(lat, longg), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
	    level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
	};
	
	var map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
	
	//ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ì…ë‹ˆë‹¤ 
	var markerPosition  = new kakao.maps.LatLng(lat, longg); 
	
	//ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
	var marker = new kakao.maps.Marker({
	position: markerPosition
	});
	
	//ë§ˆì»¤ê°€ ì§€ë„ ìœ„ì— í‘œì‹œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
	marker.setMap(map);
	
	//ì•„ë˜ ì½”ë“œëŠ” ì§€ë„ ìœ„ì˜ ë§ˆì»¤ë¥¼ ì œê±°í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤
	//marker.setMap(null);
}
/* $(document).ready(function () {
       $('html, body').animate({
           scrollTop: $('#template').offset().top
       }, 'fast'); //slow
   }); */
 //ì•µì»¤
   location.href="#template";
</script>
<script th:inline="javascript">
//ëŒ“ê¸€
/*<![CDATA[*/
var header = /*[[${_csrf.headerName}]]
var token = [[${_csrf.token}]]*/
/*]]>*/$(function(){
		
		//ê²Œì‹œíŒ ì´ë™
	$('#toBoard').on('click', function(e){
	    let bandBoardOptionNo = $(e.target).attr('name');
	    $('#template').load("/own/band/bandGroup/bandBoardList?bandNo="+bandNo+"&bandBoardOptionNo="+bandBoardOptionNo);
	})
		
		
		replyList();
		replyInsert();
		replySelect();
		replyUpdate();
		replyDelete();
	
		
		function replyInsert(){
			$("#btnReployInsert").on("click", function(){
				let categoryNo = $('#bandBoardDetailNo').val()
				let reply = $("#reply").val();
				let userId = $("#replyer").val();
				let replyContent = $("#reply").val();
				console.log("categoryNo"+categoryNo);
				console.log(reply);
				console.log(userId);
				if(reply==''||reply==null){
					alert('ì‘ì„±ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.')
					return false;
				}
				$.ajax({
					url : "/own/band/reply",
					method: "post",
					data : {categoryNo, reply, userId, replyContent},
					dataType : "json",
	              	beforeSend: function(xhr){
	                  xhr.setRequestHeader(header,token);
	                }
				}).then( res=> {
					console.log(res)
					$("#replybody").append(makeTr(res));
					let cnt = $('#replyCnt').text();
					cnt=cnt.slice(2);
					cnt++;
					console.log(cnt);
					$('#replyCnt').text('');
					console.log(cnt);
					$('#replyCnt').text('ëŒ“ê¸€'+cnt.toString());
					//ì…ë ¥ì¹¸ ì´ˆê¸°í™”
					$("#reply").val('');
					//í˜ì´ì§•...? í›„ í˜ì´ì§• ì´ë™
					page();
					let goTopage = $('#replyPagination').children(':last-child');
					console.log(goTopage);
					goTopage.click();
				})
			})
		}
		
		//ëŒ“ê¸€ë¦¬ìŠ¤íŠ¸
		function replyList(){
			let categoryNo = $('#bandBoardDetailNo').val()
			
			$.ajax({
				url : '/own/band/reply',
				data : { categoryNo:categoryNo }
			}).then( res => {
				console.log(res);
				for(reply of res){
					let tag = makeTr(reply);
					$("#replybody").append(tag);						
				}
				let cnt = $('#replyCnt').text('ëŒ“ê¸€'+res.length);
			}) 
		}
		
		//ëŒ“ê¸€ í™•ì¸
		function replySelect(){
			$("table").on("click", "#btnSelect", function(){
				console.log($(this).closest("tr").data("id"));
				let replyNo = $(this).closest("tr").data("id");
				let tr = $(this).closest("tr");
				
				$.ajax({
					url: "/own/band/reply/"+replyNo,
					method: "get",
				}).then( res => {
					console.log(res);
					//ì‚­ì œë²„íŠ¼ ë§Œë“¤ê³  ì¡°íšŒë²„íŠ¼(ì‹¤ì œë¡œëŠ” ì‚­ì œì í˜€ìˆìŒ)ìˆ¨ê¸°ê¸°
					$(tr).find('#btnReployUpdate').show();
					$(tr).find('#btnSelect').hide();
					//ì¸íë°•ìŠ¤ë‹¬ì•„ì£¼ê¸°
					$(tr).find('.con').text('');
					$(tr).find('.con').append(`<textarea class="textarea" style="font-size:14px; width:315px; row:6; resize: none; border:#eeeeee solid 1px;">${res.replyContent}</textarea>`);
				})
			})
		}
		//í…ìŠ¤íŠ¸
		 $('textarea').on('keyup', function (e) {
	        $(this).css('height', 'auto');
	        $(this).height(this.scrollHeight - 15);
	    });
		//ëŒ“ê¸€ ìˆ˜ì •
		function replyUpdate(){
			$("table").on("click", "#btnReployUpdate", function(){
				let replyNo = $(this).closest("tr").data("id");
				let tr = $('[data-id='+replyNo+']');
				let replyContent = $(this).closest("tr").find('textarea').val();
				console.log(replyContent);
				let userId = $("#replyer").val();
				$.ajax({
					url : "/own/band/reply",
					method: "put",
					data : JSON.stringify({ replyNo, replyContent, userId}),
					contentType : "application/json;",
	              	beforeSend: function(xhr){
		                  xhr.setRequestHeader(header,token);
		                }
				}).then( res=> {
					//ì‚­ì œë²„íŠ¼ ë§Œë“¤ê³  ì¡°íšŒë²„íŠ¼(ì‹¤ì œë¡œëŠ” ì‚­ì œì í˜€ìˆìŒ)ìˆ¨ê¸°ê¸°
					$(tr).find('#btnReployUpdate').hide();
					$(tr).find('#btnSelect').show();
					//ì¸íë°•ìŠ¤ë‹¬ì•„ì£¼ê¸°
					$(tr).find('.con').text(replyContent);
				})
			})
		}
		
		//ëŒ“ê¸€ ì°ì‚­ì œ(ë¬¸êµ¬ìˆ˜ì •)
		function replyDelete() {
			$("table").on("click", "#btnDelete", function(){
				let replyNo = $(this).closest("tr").data("id");
				let tr = $(this).closest("tr");
				console.log(replyNo);
				$.ajax({
					url :  "/own/band/reply/" + replyNo,
					method : "delete",
	              	beforeSend: function(xhr){
		                  xhr.setRequestHeader(header,token);
		                }
				}).then( res => {
					if(res>0){
						$(tr).find('.pho').html('<img class="rounded-circle" src=/imgView/bandprofilnull.png alt="" style="width: 40px; height: 40px;">');
						$(tr).find('.name').text('ì´ë¦„ì—†ìŒ');
						$(tr).find('.con').text('ì‚­ì œëœ ëŒ“ê¸€ì…ë‹ˆë‹¤.');
						$(tr).find('#btnDelete').hide();
						$(tr).find('#btnSelect').hide();
					}
				})
			})
		}
		//makeTr
		function makeTr(reply){
			//ë§Œì•½ ë¦¬ë”ë¼ë©´...ì™•ê´€ë‹¬ê¸° ì—†ìœ¼ë©´ ì—†ë‹¤ê³  í‘œì‹œ
			let bandLeaderid = $('#bandLeaderid').val();
			console.log("makeTr ë¦¬ë”"+bandLeaderid);
			let nick = reply.nickName;
			if(reply.userId==bandLeaderid){
				nick += '<small style="color:#f8b600"><i class="fa fa-solid fa-crown"></i></small>';
			} else if (reply.userId == 'ì´ë¦„ì—†ìŒ'){
				//ì‚­ì œí•œ ê²½ìš°
				nick = 'ì´ë¦„ì—†ìŒ';
			}
			//ë§Œì•½ ì‚­ì œí•œ ê±°ë¼ë©´ í”„ë¡œí•„ì‚¬ì§„..ê¸°ë³¸ìœ¼ë¡œ
			//ë§Œì•½ ì‚­ì œ ìˆ˜ì •ëœ ë²„íŠ¼ì´ë©´ ì•ˆë³´ì´ê²Œ..
			let profileImg = reply.profileImg;
				/* <td><b class="decoLine">ë‹µê¸€</b></td> */
			let btnTag = `  <td style="width:75px;"><button type="button" id="btnDelete" class="btn btn-primary mb-2" style="font-size: 12px; padding: 3px; width: 45px;">ì‚­ì œ</button></td>
						  <td style="width:75px;"><button type="button" id="btnSelect" class="btn btn-primary mb-2" style="font-size: 12px; padding: 3px; width: 45px;">ìˆ˜ì •</button>
						  <button type="button" id="btnReployUpdate" class="btn btn-primary mb-2" style="display:none; font-size: 12px; padding: 3px; width: 45px;">ìˆ˜ì •</button></td>`;	
			if(reply.userId=='ì´ë¦„ì—†ìŒ'){
				profileImg = 'bandprofilnull.png';
				btnTag = `<td></td>
						  <td></td>
						  <td></td>`;	
			}
			//<img class="rounded-circle" src=/imgView/${profileImg} alt="" style="width: 70px; height: 70px;">
			//ì‘ì„±ìë©´ í‘œì‹œ writerId
			if(reply.userId==$('#writerId').val()){
				nick += '<br>ì‘ì„±ì</br>'
			}
			
			let tag = `<tr data-id="${reply.replyNo}" class= trs>
				<td class="pho" style="width: 220px; display:flex; justify-content: flex-start;"><img class="rounded-circle" src=/imgView/${profileImg} alt="" style="width: 40px; height: 40px;"><span style="font-size: 13px; display:flex; flex-direction: column;"><span>${nick}</span><span style="font-size: 16px;">${elapsedText(reply.replyDate)}</span></span></td>
				<td class="con" style="font-size: 14px; width: 500px;">${reply.replyContent}</td>
				${btnTag}
			</tr>`;
			return tag;
		}
		
		//ë§Œë“¤ì–´ì§„ í…Œì´ë¸”ì— í˜ì´ì§€ ì²˜ë¦¬

		function page(){ 
			console.log('111');
			$('#replybody').each(function() {
			var $replybody = $('#replybody');
			
			var pagesu = 10;  //í˜ì´ì§€ ë²ˆí˜¸ ê°¯ìˆ˜
			var currentPage = 0;
			var numPerPage = 5;  //ëª©ë¡ì˜ ìˆ˜
			var $table = $(this);    
			var replyPagination = $("#replyPagination");
			//lengthë¡œ ì›ë˜ ë¦¬ìŠ¤íŠ¸ì˜ ì „ì²´ê¸¸ì´êµ¬í•¨
			var numRows = $($replybody).children().length;
			console.log(numRows);
			//Math.ceilë¥¼ ì´ìš©í•˜ì—¬ ë°˜ì˜¬ë¦¼
			var numPages = Math.ceil(numRows / numPerPage);
			//ë¦¬ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
			if (numPages==0) return;
			//pagerë¼ëŠ” í´ë˜ìŠ¤ì˜ divì—˜ë¦¬ë¨¼íŠ¸ ì‘ì„±
			var $pager = $('<div class="pager navvyBtn"></div>');
			var nowp = currentPage;
			var endp = nowp+10;
	
			//í˜ì´ì§€ë¥¼ í´ë¦­í•˜ë©´ ë‹¤ì‹œ ì…‹íŒ…
			$table.bind('repaginate', function() {
			//ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ê°ì¶˜ë‹¤, í˜„ì¬í˜ì´ì§€+1 ê³±í•˜ê¸° í˜„ì¬í˜ì´ì§€ê¹Œì§€ ë³´ì—¬ì¤€ë‹¤
			$($replybody).children().hide().slice(currentPage * numPerPage, (currentPage + 1) * numPerPage).show();
			$("#replyPagination").html("");
			if (numPages > 1) {     // í•œí˜ì´ì§€ ì´ìƒì´ë©´
			if (currentPage < 5 && numPages-currentPage >= 5) {   // í˜„ì¬ 5p ì´í•˜ì´ë©´
				nowp = 0;     // 1ë¶€í„° 
				endp = pagesu;    // 10ê¹Œì§€
			}else{
				nowp = currentPage -5;  // 6ë„˜ì–´ê°€ë©´ 2ë¶€í„° ì°ê³ 
				endp = nowp+pagesu;   // 10ê¹Œì§€
			pi = 1;
			}
			if (numPages < endp) {   // 10í˜ì´ì§€ê°€ ì•ˆë˜ë©´
				endp = numPages;   // ë§ˆì§€ë§‰í˜ì´ì§€ë¥¼ ê°¯ìˆ˜ ë§Œí¼
				nowp = numPages-pagesu;  // ì‹œì‘í˜ì´ì§€ë¥¼   ê°¯ìˆ˜ -10
			}
			if (nowp < 1) {     // ì‹œì‘ì´ ìŒìˆ˜ or 0 ì´ë©´
				nowp = 0;     // 1í˜ì´ì§€ë¶€í„° ì‹œì‘
			}
			}else{       // í•œí˜ì´ì§€ ì´í•˜ì´ë©´
				nowp = 0;      // í•œë²ˆë§Œ í˜ì´ì§• ìƒì„±
				endp = numPages;
			}
			// [ì²˜ìŒ]
			$('<span class="pageNum first"><i class="fa-solid fa-angles-left"></i></span>').bind('click', {newPage: page},function(event) {
				currentPage = 0;   
				$table.trigger('repaginate');  
				$($(".pageNum")[2]).addClass('active').siblings().removeClass('active');
			}).appendTo(replyPagination).addClass('clickable');
			// [ì´ì „]
			$('<span class="pageNum back"><i class="fa-solid fa-angle-left"></i></span>').bind('click', {newPage: page},function(event) {
			if(currentPage == 0) return; 
				currentPage = currentPage-1;
				$table.trigger('repaginate'); 
				$($(".pageNum")[(currentPage-nowp)+2]).addClass('active').siblings().removeClass('active');
			}).appendTo(replyPagination).addClass('clickable');
			// [1,2,3,4,5,6,7,8]
			for (var page = nowp ; page < endp; page++) {
				$('<span class="pageNum"></span>').text(page + 1).bind('click', {newPage: page}, function(event) {
				currentPage = event.data['newPage'];
				$table.trigger('repaginate');
				$($(".pageNum")[(currentPage-nowp)+2]).addClass('active').siblings().removeClass('active');
			}).appendTo(replyPagination).addClass('clickable');
			} 
			// [ë‹¤ìŒ]
			$('<span class="pageNum next"><i class="fa-solid fa-angle-right"></i></span>').bind('click', {newPage: page},function(event) {
				if(currentPage == numPages-1) return;
				currentPage = currentPage+1;
				$table.trigger('repaginate'); 
				$($(".pageNum")[(currentPage-nowp)+2]).addClass('active').siblings().removeClass('active');
			}).appendTo(replyPagination).addClass('clickable');
			// [ë]
			$('<span class="pageNum last"><i class="fa-solid fa-angles-right"></i></span>').bind('click', {newPage: page},function(event) {
			currentPage = numPages-1;
				$table.trigger('repaginate');
				$($(".pageNum")[endp-nowp+1]).addClass('active').siblings().removeClass('active');
			}).appendTo(replyPagination).addClass('clickable');
				$($(".pageNum")[2]).addClass('active');
			});
				$pager.insertAfter($table).find('span.pageNum:first').next().next().addClass('active');   
				$pager.appendTo(replyPagination);
				$table.trigger('repaginate');
			});
		}
	  window.setTimeout(function(){page();},500);
	})
</script>