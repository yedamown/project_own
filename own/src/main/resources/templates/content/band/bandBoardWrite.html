<html xmlns:th="http://www.thymeleaf.org"lang="ko">
<script src="/css/band/js/jquery-3.2.1.js"></script>
<script src="/css/band/js/json.min.js"></script>
 <!-- Bootstrap CSS -->
<link rel="stylesheet" href="/css/band/vendors/linericon/style.css">
<link rel="stylesheet" href="/css/band/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/band/vendors/owl-carousel/owl.carousel.min.css">
<link rel="stylesheet" href="/css/band/vendors/bootstrap-datepicker/bootstrap-datetimepicker.min.css">
 	<link rel="stylesheet" href="/css/band/vendors/nice-select/css/nice-select.css">
<link rel="stylesheet" href="/css/band/vendors/owl-carousel/owl.carousel.min.css">
<!-- ì„œë¨¸ë…¸íŠ¸ë¥¼ ìœ„í•´ ì¶”ê°€í•´ì•¼í•  ë¶€ë¶„ -->
<link rel="stylesheet" href="/css/band/editor/summernote-lite.css">
<script src="/css/band/editor/summernote-lite.js"></script>
<script src="/css/band/editor/lang/summernote-ko-KR.js"></script>
 <!-- ì§€ë„ -->
 <script src="/css/band/js/map.js"></script>
<style>
	.note-resize{
		display: none !important;
		}
	.note-control-selection-bg{
		display: none !important;
	}
	.note-control-selection{
		display: none !important;
	}
	.note-popover{
		display: none !important;
	}
	.bottom note-image-popover{
		display: none !important;
	}
	#my_calendar_modal {
		display: none;
		width: 600px;
		padding: 20px 30px;
		background-color: #fefefe;
		border: 1px solid #888;
		border-radius: 3px;
	}
	
	#my_calendar_modal .modal_close_btn {
		position: absolute;
		top: 10px;
		right: 10px;
	}
</style>
<div id="template">    
<div style="flex-grow:3; width: 740px">
	<div>
	<input type="hidden" id="bandLeaderid" th:value="${band.bandLeaderid}">
	<input type="hidden" id="userId" th:value="${session.loginUser.userId}">
		<article style="border: 1px solid #eeeeee;padding:30px; ">
		<form name="frm" id="frm">
			<input type="hidden" th:name="${_csrf.parameterName}" id="headers" th:value="${_csrf.token}">
			<input type="hidden" id="bandboardwriter" name="bandBoardWriter" th:value="${session.loginUser.userId}">
			<input type="hidden" id="userId" name="userId" th:value="${session.loginUser.userId}">
			<input type="hidden" id="bandLeaderid" name="bandLeaderid" th:value="${band.bandLeaderid}">
			<!-- ì¸ë¨¸ë…¸íŠ¸ë¥¼ í†µí•´ ì¶”ê°€ë  ì´ë¯¸ì§€ -->
			<input type="hidden" id="bandBoardDetailNo" name="bandBoardDetailNo">
			<input type="hidden" id="bandNo" name="bandNo" th:value=${band.bandNo}>
			<h3>ê°€ì¹˜ ê¸€ì“°ê¸°</h3>
			<select class="form-group" th:value="*{boardList}" id="bandBoardOptionNo" name="bandBoardOptionNo"  required>
				<option disabled>::ê²Œì‹œíŒì„ ì„ íƒí•´ì£¼ì„¸ìš”::</option>
				<option th:if="${list.bandBoardLine}!='0'" th:each="list : ${boardList}" th:value="${list.bandBoardOptionNo}" th:text="${list.bandBoardName}"></option>
			</select>
			<select class="form-group" name="bandRemarks" id="bandRemarks">
				<option value="">::ë§ë¨¸ë¦¬ ì„ íƒ::</option>
			</select>
			<div class="form-group">
				<input placeholder="íƒ€ì´í‹€" type="text" class="form-control" id="bandBoardTitle" name="bandBoardTitle"  required maxlength="30">
				<div class="form-group">
					<textarea id="summernote" name="bandBoardContent"></textarea>
				</div>
				<div id="calVote"></div>
				<div id="replyee" style="display: block">
				ëŒ“ê¸€ í—ˆìš©<input type="radio" value="BH01" id="replyId" class="form-group" name="bandBoardTag">
					    <input type="radio" value="BH02" id="replyId2" class="form-group" name="bandBoardTag">
				</div>
				<button type="button" id="writeBtn" class="btn btn-primary mb-2" style="background-color: #f3c300; color:white; float: right">ë“±ë¡</button>
				<b id="writeBtnAlert">ê°€ì¹˜ì¥ë§Œ ì‘ì„±ê°€ëŠ¥í•œ ê²Œì‹œíŒì…ë‹ˆë‹¤</b>
			</div>
<!--==ìº˜ë¦°ë” ëª¨ë‹¬ì°½ ==-->
		<div id="my_calendar_modal">
			<div id="modalform">
                <div>
                	<!--================ ì¼ì •ëª… =================-->
                	<div>
	                  <h6 class="typo-list">ì¼ì •ë§Œë“¤ê¸°</h6>
	                  <div>
	                    <input type="text" name="bandCalendarTitle" id="bandCalendarTitle" placeholder="ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" onfocus="this.placeholder = ''" onblur="this.placeholder = 'ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'" required>
	                  </div>
	                </div>
	                <!--================ ì¼ì •ëª… ë =================-->
	                <!--================ ì¼ì •ë§ˆí¬ =================-->
                	<div>
	                  <h6 class="typo-list">ì¼ì •ë§ˆí¬</h6>
	                  <div>
	                    <select name='bandCalendarMark' id="bandCalendarMark">
						  <option value='0' selected disabled>-- ì„ íƒ --</option>
						  <option value='red' style='padding:15px;'>ë¹¨ê°•ğŸ”´</option>
						  <option value='orange' style='padding:15px;'>ì£¼í™©ğŸŸ </option>
						  <option value='yellow' style='padding:15px;'>ë…¸ë‘ğŸŸ¡</option>
						  <option value='blue' style='padding:15px;'>íŒŒë‘ğŸ”µ</option>
						</select>
	                  </div>
	                </div>
	                <!--================ ì¼ì •ë§ˆí¬ ë =================-->
	                <!--================ ì‹œì‘/ì¢…ë£Œ =================-->
	                <div>
	                  <h6 class="typo-list">ì‹œì‘</h6>
                      <input type="date" name="bandCalendarStartDay" id="bandCalendarStartDay">
                      <input type="time" name="bandCalendarStartTime" id="bandCalendarStartTime">
					  <input type="hidden" name="bandCalendarStart" id="bandCalendarStart">
	                </div>
	                <div>
	                  <h6 class="typo-list">ì¢…ë£Œ</h6>
                      <input type="date" name="bandCalendarEndDay" id="bandCalendarEndDay">
                      <input type="time" name="bandCalendarEndTime" id="bandCalendarEndTime">
					  <input type="hidden" name="bandCalendarEnd" id="bandCalendarEnd">
	                </div>
	                <!--================ ì‹œì‘/ì¢…ë£Œ ë =================-->
	                 <!--================ ìœ„ì¹˜ =================-->
	                <div>
	                  <h6 class="typo-list">ìœ„ì¹˜</h6>
	                  <div>
	                    <input type="text" id="bandCalendarLocation" name="bandCalendarLocation" value="">
	                    <input type="hidden" id="bandCalendarLocationLatlong" name="bandCalendarLocationLatlong" value="">
	                  </div>
	                </div>
	                <!--================ ìœ„ì¹˜ ë =================-->
	                <!--================ ì°¸ì„ì—¬ë¶€ =================-->
	                <div>
						<h6 class="typo-list" style="float: left; padding-left: 10px; margin-top: 20px;">ì°¸ì„ì—¬ë¶€ ë¬»ê¸°</h6>
	                	<input type="checkbox" name="bandCalendarOption" value="t" id="bandCalendarOption">
	                    <div id="checkDate" style="display: none">
						<h6 class="typo-list">ì°¸ì„ì—¬ë¶€ í™•ì¸ ì¢…ë£Œì¼</h6>
	                     	<input type="date" name="bandCalendarOptionDayD" id="bandCalendarOptionDayD">
                      		<input type="time" name="bandCalendarOptionDayT" id="bandCalendarOptionDayT">
							<input type="hidden" name="bandCalendarOptionDay" id="bandCalendarOptionDay">
						</div>
	                </div>
	                <!--================ ì°¸ì„ì—¬ë¶€ ë =================-->
	                <!--================ ê³µìœ  =================-->
	                <!-- <div>
						<h6 class="typo-list" style="float: left; padding-left: 10px; margin-top: 20px;">ê²Œì‹œê¸€ë¡œ ê³µìœ </h6>
	                	<input type="checkbox" name="bandCalendarOptionShare" value="t" id="bandCalendarOptionShare" checked disabled>
	                </div> -->
	                <!--================ ê³µìœ  ë =================-->
	            </div>
                <button type="button" id="calBtn">ì „ì†¡</button>
			</div>
			<a class="modal_close_btn">ë‹«ê¸°</a>
		</div>
<!--==ìº˜ë¦°ë” ëª¨ë‹¬ì°½ ==-->
		</form>	
		</article>
	</div>
</div>
<script th:inline="javascript">
/*<![CDATA[*/
var header = /*[[${_csrf.headerName}]]
var token = [[${_csrf.token}]]*/
/*]]>*/
console.log(header);
console.log(token);
 //ë³´ë“œì˜µì…˜ë¦¬ìŠ¤íŠ¸ ì €ì¥
 //ì´ˆê¸° ë³´ë“œ ì €ì¥
$(function(){
	var bandLeaderid = $('#bandLeaderid').val();
	var userId = $('#userId').val();
	$(document).ready(function() {
		//ì—¬ê¸° ì•„ë˜ ë¶€ë¶„
		$('#summernote').summernote({
			  height: 330,                 // ì—ë””í„° ë†’ì´
			  minHeight: null,             // ìµœì†Œ ë†’ì´
			  maxHeight: null,              // ìµœëŒ€ ë†’ì´
			  focus: true,                  // ì—ë””í„° ë¡œë”©í›„ í¬ì»¤ìŠ¤ë¥¼ ë§ì¶œì§€ ì—¬ë¶€
			  lang: "ko-KR",					// í•œê¸€ ì„¤ì •
			  placeholder: 'ìµœëŒ€ 2048ìê¹Œì§€ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤',	//placeholder ì„¤ì •
			  callbacks: {
		          onImageUpload : function(files, editor, welEditable){
		        	  //íŒŒì¼ìš©ëŸ‰ì²´í¬
		        	  for(var i = files.length -1; i >= 0; i--) {
		        		  if(files[i].siza > 1024*1024*50){
		        			  alert("ì´ë¯¸ì§€ëŠ” 50MBì´í•˜ë§Œ ì²¨ë¶€ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
		        			  return;
		        		  }
		        	  }
		                // íŒŒì¼ ì—…ë¡œë“œ(ë‹¤ì¤‘ì—…ë¡œë“œë¥¼ ìœ„í•´ ë°˜ë³µë¬¸ ì‚¬ìš©)
		                for (var i = files.length - 1; i >= 0; i--) {
		                    uploadSummernoteImageFile(files[i], this);
		                    }
		                },
		                onPaste: function (e) {
							var clipboardData = e.originalEvent.clipboardData;
							if (clipboardData && clipboardData.items && clipboardData.items.length) {
								var item = clipboardData.items[0];
								if (item.kind === 'file' && item.type.indexOf('image/') !== -1) {
									e.preventDefault();
								}
							}
						}
		            } 
		});
		$('.summernote').summernote({
			  toolbar: [
				    // [groupName, [list of button]]
				    ['fontname', ['fontname']],
				    ['fontsize', ['fontsize']],
				    ['style', ['bold', 'italic', 'underline','strikethrough', 'clear']],
				    ['color', ['forecolor','color']],
				    ['table', ['table']],
				    ['para', ['ul', 'ol', 'paragraph']],
				    ['height', ['height']],
				    ['insert',['picture','link','video']],
				    ['view', ['fullscreen', 'help']]
				  ],
				fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New','ë§‘ì€ ê³ ë”•','ê¶ì„œ','êµ´ë¦¼ì²´','êµ´ë¦¼','ë‹ì›€ì²´','ë°”íƒ•ì²´'],
				fontSizes: ['8','9','10','11','12','14','16','18','20','22','24','28','30','36','50','72']
		  });
		function uploadSummernoteImageFile(file, el) {
			//let header = $('#headers').attr('name');
			//let token = $('#headers').val();
			console.log(header);
			console.log(token);
	        var data = new FormData();	
	        data.append("file",file);
	            $.ajax({
            	  url: '/own/band/bandGroup/bandBoardInsertImg',
	              type: "POST",
	              enctype: 'multipart/form-data',
	              data: data,
	              cache: false,
	              contentType : false,
	              processData : false,
	              beforeSend: function(xhr){
	                  xhr.setRequestHeader(header,token);
	                },
	              success : function(data) { //dataëŠ” urlì„ ê°€ì ¸ì˜´
	            	  		console.log(data);
	                        $(el).summernote('editor.insertImage','/imgView/'+data, data);
	                        
	                        //ì—…ë¡œë“œë˜ëŠ” ì´ë¯¸ì§€ì˜ ì´ë¦„ì„ ë‹´ê¸°..ê¸€ ì—…ë¡œë“œ ë  ë•Œ ì´ë¯¸ì§€DBì‹ë³„í‚¤ìˆ˜ì •í• ê±°ì„
	                        let imgss = $('#bandBoardDetailNo').val();
	                        console.log(imgss);
	                        imgss += ('#'+data);
	                        $('#bandBoardDetailNo').val(imgss);
	                    },
	                    error : function(e) {
	                        console.log(e);
	                    }
	                });
           }
		//ì´ˆê¸°í™”
		makeSelectRe(boardListSave[0].bandBoardRemarks, boardListSave[0].bandLikeOption, boardListSave[0].bandBoardAuth, boardListSave[0].bandContentOption);
	});
	function jsonFn(jsonArray){
		console.log(jsonArray);
	}
	$("div.note-editable").on('drop',function(e){
        for(i=0; i< e.originalEvent.dataTransfer.files.length; i++){
        	uploadSummernoteImageFile(e.originalEvent.dataTransfer.files[i],$("#summernote")[0]);
        }
       e.preventDefault();
  })

	console.log($.summernote.options);
	// ì‹¤í–‰ì‹œ ì–¸ì–´ ì„¤ì •ì„ í•œê¸€ë¡œ ì„¤ì • 
	//$.summernote.options.lang = 'ko-KR';
	//$.summernote.options.airMode = false;
	// summernote ìƒì„±ì‹œ ì‚¬ì´ì¦ˆ ì§€ì •
	//$.summernote.options.width = '90%';
	//$.summernote.options.heigth = '400';
	var a = $("#summernote");
	// ë²„íŠ¼ì„ ì¶”ê°€í•˜ê¸°ìœ„í•œ ë°©ë²•
	var buttons = $.summernote.options.buttons;
	// íˆ´ë°”ì— í‘œì‹œí•  ë²„íŠ¼ ë„£ê¸°
	$.summernote.options.toolbar.push([
		  "Paragraph",
		[
		    "Calendar", // ë‹¨ë½ H1
		    "Vote", // ë‹¨ë½ P íƒœê·¸
		  ],
	]);
	// -----------------------------------------------
	// ë‹¨ë½ ê¸€ì ë³€ê²½ <h1> ~ <h6> - íˆ´ë°” ë²„íŠ¼ ì •ì˜
	var Calendar = function (context) {
	var ui = $.summernote.ui;
	var button = ui.button({
	    contents: '<i class="fa fa-pencil"/> ìº˜ë¦°ë”',
	    tooltip: "ìº˜ë¦°ë”ë„£ê¸°",
	    click: function () {
	    	//ì´ë¯¸ ì¼ì •ìˆëŠ”ì§€ í™•ì¸
	    	if($('#calVote').children().length>0){
	    		alert('ì´ë¯¸ ë“±ë¡ëœ ì¼ì •ì´ë‚˜ íˆ¬í‘œê°€ ìˆìŠµë‹ˆë‹¤.');
	    		return false;
	    	}
	    	//ìš°ì„  ëª¨ë‹¬ì°½ë„ìš°ê¸°
	    	modal('my_calendar_modal');
	    },
	  });
	  return button.render();
	};
	// íˆ´ë°”ì˜ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¶™ì´ê¸°
	buttons.Calendar = Calendar;
	//  ë‹¨ë½ í¬ë§· H1 - ì´ë²¤íŠ¸ ë²„íŠ¼ ì •ì˜
	var Calendar = function(){
	  a.summernote('formatH1');
	};
	// -----------------------------------------------
	// í˜„ì¬ ë‹¨ë½ p íƒœê·¸ë¡œ ë³€ê²½ - íˆ´ë°” ë²„íŠ¼ ì •ì˜
	var Vote = function (context) {
	var ui = $.summernote.ui;
	var button = ui.button({
	    contents: '<i class="fa fa-pencil"/> íˆ¬í‘œ',
	    tooltip: "íˆ¬í‘œí•˜ê¸°",
	    click: function () {
	      context.invoke("editor.formatPara");
	    },
	  });
	  return button.render();
	};
	// íˆ´ë°”ì˜ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¶™ì´ê¸°
	buttons.Vote = Vote;
	//  í˜„ì¬ ë‹¨ë½ p íƒœê·¸ë¡œ ë³€ê²½ - ì´ë²¤íŠ¸ ë²„íŠ¼ ì •ì˜
	var Vote = function(){
	  a.summernote('formatPara');
	};
		// -----------------------------------------------
	//ëª¨ë‹¬
	function modal(id) {
        var zIndex = 9999;
        var modal = document.getElementById(id);
	
        // ëª¨ë‹¬ div ë’¤ì— í¬ë„ë¬´ë ˆí•œ ë ˆì´ì–´
        var bg = document.createElement('div');
        bg.setStyle({
            position: 'fixed',
            zIndex: zIndex,
            left: '0px',
            top: '0px',
            width: '100%',
            height: '100%',
            overflow: 'auto',
            // ë ˆì´ì–´ ìƒ‰ê°ˆì€ ì—¬ê¸°ì„œ ë°”ê¾¸ë©´ ë¨
            backgroundColor: 'rgba(0,0,0,0.4)'
        });
        document.body.append(bg);
        // ë‹«ê¸° ë²„íŠ¼ ì²˜ë¦¬, ì‹œêº¼ë¨¼ ë ˆì´ì–´ì™€ ëª¨ë‹¬ div ì§€ìš°ê¸°
        //í•œë²ˆ ì§€ì›Œì£¼ì§€ ì•Šìœ¼ë©´ ê³„ì† ì‹¤í–‰ë¨
        modal.querySelector('.modal_close_btn').removeEventListener('click', bgRe)
        modal.querySelector('.modal_close_btn').addEventListener('click', bgRe);
        function bgRe() {
            bg.remove();
            modal.style.display = 'none';
        }
        modal.setStyle({
            position: 'fixed',
            display: 'block',
            boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)',

            // ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸°
            zIndex: zIndex + 1,

            // div center ì •ë ¬
            top: '50%',
            left: '50%',
            transform: 'translate(-50%, -50%)',
            msTransform: 'translate(-50%, -50%)',
            webkitTransform: 'translate(-50%, -50%)'
        });
      //ì¼ì •ë„£ê¸°(ëª¨ë‹¬ì˜)ë²„íŠ¼ ëˆ„ë¦„
		$('#calBtn').on('click', function(){
			let calVote = $('#calVote');
			console.log(calVote.children());
			console.log('1') 
			console.log(calVote.children().length)
			if(calVote.children().length>0){
				console.log(' ë¹ ì§');
				bgRe();
				return false;
			}
			console.log('3')
            modal.style.display = 'none';
			bg.remove();
			//ì œëª©
			let title = $('#bandCalendarTitle').val();
			//ë‚ ì§œ
			let startDay = new Date($('#bandCalendarStartDay').val());
			let endDay = new Date($('#bandCalendarEndDay').val());
			//ë…„
			let sYear = startDay.getFullYear();
			let eYear = endDay.getFullYear();
			//ë‹¬
			let sMonth = (1+startDay.getMonth());
			let eMonth = (1+endDay.getMonth());
			//ë‚ 
			let sDay = startDay.getDate();
			let eDay = endDay.getDate();
			//ì‹œê°„
			let startTime = $('#bandCalendarStartTime').val();
			let endTime = $('#bandCalendarEndTime').val();
			//ìƒì„¸ì‹œì‘ì‹œê°„
			let sTime = (startTime.substr(0, 2) < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" "
				sTime += (startTime.substr(0, 2) < 12 ? startTime.substr(0, 2) : startTime.substr(0, 2)-12)+"ì‹œ "
				sTime += startTime.substr(3)+"ë¶„";
			//ìƒì„¸ëë‚˜ëŠ”ì‹œê°„
			let eTime = (endTime.substr(0, 2) < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" " //ì˜¤ì „ ì˜¤í›„
					 + (endTime.substr(0, 2)< 12 ? endTime.substr(0, 2) : endTime.substr(0, 2)-12)+"ì‹œ " //12ì‹œê°„í‘œê¸°
					 + endTime.substr(3)+"ë¶„";
			//ì‹œì‘ ìš”ì¼
			let mon = getDayOfWeek($('#bandCalendarStartDay').val());
			//ë§ˆí¬ìƒ‰
			let color = $('#bandCalendarMark').val();
		    let cal  = `<div style="width:678px; height:80px; border: 0.3rem solid ${color}; display:flex; justify-content:space-between" id="calendarModal">`
						cal += `<div style="padding:10px;"><h3 style="margin-bottom:0px">${sDay}</h3>`
						cal += `<p>${mon}</p></div>`
						cal += `<div style="padding:10px;"><h5>${title}</h5>`
						cal += `<p>${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}</p></div>`
						cal += `<div style="float:right; margin-top:30px;"><input type="button"id="calUpBtn" value="ìˆ˜ì •"></div>`
						cal += `<div style="float:right; margin-top:30px;"><input type="button"id="calDelBtn" value="ì‚­ì œ"></div>`
					cal += `</div>`;
			calVote.append(cal);
			//ë°´ë“œìº˜ë¦°ë”ì‹œì‘ì¼ ëë‚˜ëŠ” ë‚  íˆë“  ê°’ ë„£ê¸°
			console.log(startDay)
			startDay.setHours(startTime.substr(0, 2));
			startDay.setMinutes(startTime.substr(3));
			console.log(startDay)//ì—¬ê¸°ê¹Œì§„ ë³€í™˜ì™„ë£Œ
			$('#bandCalendarStart').val(timestamp(startDay));
			console.log('ì‹œì‘ì¼'+$('#bandCalendarStart').val());
			
			console.log(endDay)
			endDay.setHours(startTime.substr(0, 2));
			endDay.setMinutes(startTime.substr(3));
			console.log(endDay)//ì—¬ê¸°ê¹Œì§„ ë³€í™˜ì™„ë£Œ
			$('#bandCalendarEnd').val(timestamp(endDay))
			//íˆ¬í‘œì¼ì •ì´ ì‡ë‹¤ë©´ ë„£ê¸°
			if($('#bandCalendarOption').prop('checked')){
				let voteDay = new Date($('#bandCalendarOptionDayD').val());
				let voteTime = $('#bandCalendarOptionDayT').val();
				console.log(voteDay);
				console.log(voteTime);
				voteDay.setHours(voteTime.substr(0, 2));
				voteDay.setMinutes(voteTime.substr(3));
				console.log(voteDay);
				$('#bandCalendarOptionDay').val(timestamp(voteDay));
				console.log('ë§ˆê°ì¼'+$('#bandCalendarOptionDay').val());
			}
			
		})
    }
		
		
		
////////////////////
	 Element.prototype.setStyle = function(styles) {
         for (var k in styles) this.style[k] = styles[k];
         return this;
     };
     $('.note-editing-area').on('click', $('img'), function(e){
			console.log(e.target);
		})
	//ìš”ì¼ë½‘ê¸°
	function getDayOfWeek(ë‚ ì§œë¬¸ìì—´){ //ex) getDayOfWeek('2022-06-13')
    	const week = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
    	const dayOfWeek = week[new Date(ë‚ ì§œë¬¸ìì—´).getDay()];
    	return dayOfWeek;
	}
	//ë‚ ì§œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë³´ë‚¼ í¬ë§·
	function timestamp(date){
		let month = date.getMonth() + 1;
        let day = date.getDate();
        let hour = date.getHours();
        let minute = date.getMinutes();
        let second = date.getSeconds();

        month = month >= 10 ? month : '0' + month;
        day = day >= 10 ? day : '0' + day;
        hour = hour >= 10 ? hour : '0' + hour;
        minute = minute >= 10 ? minute : '0' + minute;
        second = second >= 10 ? second : '0' + second;

        return date.getFullYear() + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;
	}
	
	//ì²´í¬ë°•ìŠ¤ í´ë¦­ì‹œ íˆ¬í‘œë‚ ì§œ ì‹œê°„ì œí•œ
	$('#bandCalendarOption').on('click',function(){
		if($('#bandCalendarOption').prop('checked')){
			$('#checkDate').show();
		} else {
			$('#checkDate').hide();
			//ê°’ë¹„ìš°ê¸°
			$('#bandCalendarOptionDay').val();
		}
	})
	//ìœ„ì¹˜
	$('#bandCalendarLocation').on('click', function(){
		window.open( "/own/band/map", "Child", "width=1000px, height=500px, top=50%, left=50% ,resizable = no, scrollbars = no" );
	})
/* 	let header = $('#headers').attr('name');
	let token = $('#headers').val(); */
	//ê¸€ì“°ê¸°
	$('#writeBtn').on('click', function(){
		if($('#bandBoardTitle').val()==null||($('#bandBoardTitle').val()).replace(/(\s*)/g, '')==''){
			alert('ì œëª©ì€ ë¹„ìš¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
			return false;
		}
		console.log($('#frm').serializeObject());
		$.ajax({
			url : '/own/band/bandGroup/bandBoardInsert',
			method : 'post',
			data : $('#frm').serializeObject(),
			dataType : 'json',
			beforeSend: function(xhr){
              xhr.setRequestHeader(header,token);
            }
		}).then( res =>{
			console.log(res);
			if(res.bandBoardDetailNo!=null){
				$('#template').load("/own/band/bandGroup/bandBoardDetail?bandBoardDetailNo="+res.bandBoardDetailNo);
			    window.open('','_self').close();
			} else {
				alert('ê¸€ì“°ê¸° ì‹¤íŒ¨');
			}
		})
	})
	let boardListSave = new Array();
	let board = new Object;
	/*[# th:each="board : ${boardList}"]*/
	board = new Object;
	board.bandBoardOrder = /*[[${board.bandBoardOrder}]]*/
	board.bandBoardName = /*[[${board.bandBoardName}]]*/
	board.bandBoardAuth = /*[[${board.bandBoardAuth}]]*/
	board.bandLikeOption = /*[[${board.bandLikeOption}]]*/
	board.bandContentOption = /*[[${board.bandContentOption}]]*/
	board.bandBoardRemarks = /*[[${board.bandBoardRemarks}]]*/
	board.bandBoardLine = /*[[${board.bandBoardLine}]]*/
	board.bandBoardOptionNo = /*[[${board.bandBoardOptionNo}]]*/
	board.bandNo = /*[[${board.bandNo}]]*/
	board.boardNumber = /*[[${board.boardNumber}]]*/
	boardListSave.push(board);
	/*[/]*/
	console.log(boardListSave+"???");
	//ê²Œì‹œíŒ ë°”ê¿€ ë•Œ ë§ë¨¸ë¦¬ ì…€ë ‰íŠ¸ë°•ìŠ¤ ë‹¬ê¸°+ ëŒ“ê¸€ë¶ˆëŠ¥í™•ì¸
	$('#bandBoardOptionNo').on('change',function(){
		let bandBoardOptionNo = $('#bandBoardOptionNo').val();
		let bandBoardRemarks = '';
		let bandLikeOption = '';
		let bandContentOption = '';
		$(boardListSave).each(function(idx, ele){
			if(ele.bandBoardOptionNo==bandBoardOptionNo){
				bandBoardRemarks = ele.bandBoardRemarks;
				bandLikeOption = ele.bandLikeOption;
				bandBoardAuth = ele.bandBoardAuth;
				bandContentOption = ele.bandContentOption;
			}
		})
		makeSelectRe(bandBoardRemarks, bandLikeOption, bandBoardAuth, bandContentOption)
	})
	//í˜ì´ì§€ ì—´ë¦´ë•Œ 1ë²ˆê²Œì‹œíŒë§ë¨¸ë¦¬ë¡œ ì´ˆê¸°í™” + ëŒ“ê¸€ë¶ˆëŠ¥í™•ì¸
	//ë§ë¨¸ë¦¬ í•¨ìˆ˜
	function makeSelectRe(bandBoardRemarks, bandLikeOption, bandBoardAuth, bandContentOption){
		//ìš°ì„  ë¹„ì›Œì£¼ê³ 
		let bandRemarks = $('#bandRemarks').empty();
		
		//ë°°ì—´ë¡œ ìë¥´ê¸°
		console.log(bandBoardRemarks);
		if(bandBoardRemarks!=null){
			//ë§ˆì§€ë§‰ #ë–¼ê¸°
			tag = bandBoardRemarks.slice(0, -1);
			let arr = tag.split('#');
			for(let a of arr){
				bandRemarks.append($('<option value='+a+'>'+a+'</option>'))
			}
			console.log(arr);
			
		}
		//ë¼ë””ì˜¤ë°•ìŠ¤(ëŒ“ê¸€)
		//ë§Œì•½ ëŒ“ê¸€ì‘ì„±ë¶ˆê°€ë©´..
		console.log(bandLikeOption)
		if(bandLikeOption=='BH02'){
			$('input[value=BH01]').prop('disabled', true);
			
			
			$('#replyId2').prop('checked', true);
			$('#replyId').prop('checked', false);
			console.log($('input[value=BH01]').is(':checked'));
			console.log($('input[value=BH02]').is(':checked'));
		} else if(bandLikeOption=='BH01'){
			$('input[value=BH02]').attr('disabled', false);
			$('input[value="BH01"]').attr('disabled', false);
			
			$('#replyId').prop('checked', true);
			$('#replyId2').prop('checked', false);
			console.log($('input[value=BH01]').is(':checked'));
			console.log($('input[value=BH02]').is(':checked'));
		}
		//ë°´ë“œì¥ë§Œ ì‘ì„±ê°€ëŠ¥í•˜ë©´...
		let bandLeaderid = $('#bandLeaderid').val();
		let userId = $('#userId').val();
		console.log(bandLeaderid + userId)
		console.log(bandBoardAuth + userId)
		if((bandBoardAuth=='BG01'&&bandLeaderid==userId) || bandBoardAuth=='BG02'){
			$('#writeBtn').show();
			$('#writeBtnAlert').hide();
		} else {
			$('#writeBtn').hide();
			$('#writeBtnAlert').show();
		}
		console.log(bandContentOption)
		$('#summernote').summernote('code', '');
		if(bandContentOption!=null){
			$('#summernote').summernote('code', bandContentOption);
		}
		console.log($('.note-editable'));
		console.log($('.note-editable:eq(0)'));
		$('.note-editable:eq(0)').css('height', '330px');
	}
	//ì¼ì •ìˆ˜ì •
	$('#calVote').on('click', $('#calUpBtn'), function(e){
		if(e.target.id=='calUpBtn'){
			$('#calVote').empty();
			//ìš°ì„  ëª¨ë‹¬ì°½ë„ìš°ê¸°
	    	modal('my_calendar_modal');
		}
	})
	//ì¼ì •ì‚­ì œ
	$('#calVote').on('click', $('#calDelBtn'), function(e){
		if(e.target.id=='calDelBtn'){
			$('#calVote').empty();
			$('#modalform').find('input').each(function(){
				$(this).val('');
			})
		}
	})
})
$(document).ready(function () {
       $('html, body').animate({
           scrollTop: $('#template').offset().top
       }, 'slow'); //slow
   });
</script>

</div>