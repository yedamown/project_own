<html xmlns:th="http://www.thymeleaf.org"lang="ko">
<head>
  <title>Title</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="/css/band/calendar/index.global.js"></script>
	
	<style>
		.toSt {
			margin-left: 15px;
		}
		.myPadding {
			padding-top: 10px;
		}
		.myInput {
			border: 1px solid #eeeeee;
			height: 42px; 
			padding: 0 20px;
		}
		.lis {
			list-style: none;
			padding: 10px;
			border-bottom: 1px solid #eeeeee;
			border-top: 1px solid #eeeeee;
		}
		#attendChk {
			padding: 20px;
		}
		/* ë²„íŠ¼ */
	    .button_hover2 {
			color: white;
			text-align: center;
			background-color: #6ab0cd;
			width: 150px;
			margin: 0 auto;
			border: 2px solid #6ab0cd;
			border: none;
	       }
		.button_hover2:hover {
			color: white;
			box-shadow: #6ab0cd 0 80px 0px 2px inset;
			border-radius: 10px;
			border: none;
		}
		
		.button_hover3 {
			color: white;
			text-align: center;
			background-color: #6ab0cd;
			width: 150px;
			margin: 0 auto;
			border: 2px solid #6ab0cd;
			border: none;
			height: 25px;
	       }
		.button_hover3:hover {
			color: white;
			box-shadow: #6ab0cd 0 80px 0px 2px inset;
			border-radius: 10px;
			border: none;
		}
		
		/*ì§€ë„*/
		.map_wrap {
			position: relative;
			width: 100%;
			height: 350px;
		}
		
		.title {
			font-weight: bold;
			display: block;
		}
		
		.hAddr {
			position: absolute;
			left: 10px;
			top: 10px;
			border-radius: 2px;
			background: #fff;
			background: rgba(255, 255, 255, 0.8);
			z-index: 1;
			padding: 5px;
		}
		
		#centerAddr {
			display: block;
			margin-top: 2px;
			font-weight: normal;
		}
		
		.bAddr {
			padding: 5px;
			text-overflow: ellipsis;
			overflow: hidden;
			white-space: nowrap;
		}
		/*ì§€ë„ ë*/
		#my_calendar_modal {
		display: none;
		width: 650px;
		padding: 20px 30px;
		background-color: #fefefe;
		border: 1px solid #888;
		border-radius: 3px;
		position: fixed;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
	#my_calendar_modal_input {
		display: none;
		width: 650px;
		padding: 20px 30px;
		background-color: #fefefe;
		border: 1px solid #888;
		border-radius: 3px;
		position: fixed;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
	#my_calendar_modal .modal_close_btn{
		position: absolute;
		top: 10px;
		right: 10px;
	}
	#my_calendar_modal_input .modal_close_btn_input{
		position: absolute;
		top: 10px;
		right: 10px;
	}
	.bgg {
		position: fixed;
		z-index: 500;
		left: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
		overflow: auto;
		/* ë ˆì´ì–´ ìƒ‰ê°ˆì€ ì—¬ê¸°ì„œ ë°”ê¾¸ë©´ ë¨ */
		background-color: rgba(0, 0, 0, 0.4);
	}
	
	.cModal {
		position: fixed;
		display: block;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
/* 	 #F25757'></option>
  <option value='#FFC780' style='padding:15px; background-color: #FFC780'></option>
  <option value='#F8AA94' style='padding:15px; background-color: #F8AA94'></option>
  <option value='#5A7CBF' style='padding:15px; background-color: #5A7CBF'></option>
  <option value='#BAD98B' style='padding:15px; background-color: #BAD98B */
  	.list > li:nth-child(2)  {
  		background-color: #F25757;
  		}
	.list > li:nth-child(3)  {
  		background-color: #FFC780;
  		}
	.list > li:nth-child(4)  {
  		background-color: #F8AA94;
  		}
	.list > li:nth-child(5)  {
  		background-color: #5A7CBF;
  		}
	.list > li:nth-child(6)  {
  		background-color: #BAD98B;
  		}
  	.nice-select {
  		width: 106px;
  	}
  	.list > li:nth-child(2):hover  {
  		background-color: #F25757;
  		}
	.list > li:nth-child(3):hover  {
  		background-color: #FFC780;
  		}
	.list > li:nth-child(4):hover  {
  		background-color: #F8AA94;
  		}
	.list > li:nth-child(5):hover  {
  		background-color: #5A7CBF;
  		}
	.list > li:nth-child(6):hover  {
  		background-color: #BAD98B;
  		}
  	.nice-select {
  		width: 106px;
  	}	
	</style>
</head>

<body>
	<!--== ìº˜ë¦°ë” ==-->
	<div id="template" style="flex-grow: 3; width: 740px; padding: 10px;">
		<article style=" padding: 30px; border: 1px solid #eeeeee;">
			<!-- ìì‹ì—ê²Œì„œ ë°›ì•„ì˜¬ ê°’..ê²Œì‹œíŒì´ë™ -->
			<input type="hidden" id="childBoardValue" value="">
			<div id='calendar' style="background-color: white;"></div>
		</article>
		<article style="border: 1px solid #eeeeee; padding: 30px;">
			<div id="articleArea" class="hoverBtn">
			</div>
			<div  style="padding-top:20px; text-align: center">
				<button type="button" id="loadBtn" class="more view_btn button_hover2">ë”ë³´ê¸°</button>
			</div>
		</article>
		<!--== ì´ˆê¸°ì— ì•„ì‘ìŠ¤ë¡œ ë¶ˆëŸ¬ì˜¨ ì¼ì •ë¦¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ê³³ ==-->
		<input type="hidden" id="saveCalendar" value="">
		<input type="hidden" id="saveCalendarEach" value=""><!-- ìº˜ë¦°ë”ë²ˆí˜¸-->
		<input type="hidden" id="savesavebandCalendarOptionDay" value=""><!-- bandCalendarOptionDay-->
		<input type="hidden" id="savebandCalendarTitle" value=""><!--bandCalendarTitle-->
		<input type="hidden" id="savebandBoardNum" value=""><!--bandBoarNUm-->
		<input type="hidden" id="userId" th:value="${session.loginUser.userId}">
		<!--== ìº˜ë¦°ë” ë ==-->
		<!--== ìº˜ë¦°ë” ìƒì„¸ ëª¨ë‹¬ì°½ ==-->
		<div id="my_calendar_modal" style="background-color: white">
			<div id="modalform">
				<div>
					<!--================ ì¼ì •ìƒì„¸ =================-->
					<div id="bCalendar">
						<!-- <div style="width: 500x; height: 100px; display: flex; justify-content: space-between" id="calendarModal2">
							<input type="hidden" id="bandCalendarNo">
							<div style="padding: 10px;">
								<h3 id="jsDD" style="margin-bottom: 0px"></h3>
								<p id="jsDay"></p>
							</div>
							<div style="padding: 10px;">
								<h5>íƒ€ì´í‹€</h5>
								<p id="jsDeDay" style="margin-bottom: 0px"></p>
								<span>ğŸ’­</span>
								<span>ê¸€ì“´ì´</span>
							</div>
						</div> -->
					</div>
					<!--================ ì¼ì •ìƒì„¸ ë =================-->
					<!--================ ifì°¸ì„ì—¬ë¶€ =================-->
					<div id="voteRE" style="margin-top:20px;">
						<h6 class="typo-list" style="color: #6ab0cd;">ì°¸ì„ì—¬ë¶€ <b id="voteR" style="color: white; background-color:#6ab0cd; font-weight: 300; font-size: 13px;"></b><b></b></h6>
						<div id="attendChk"> 
							<!-- <ul style="list-style: none;">
								<!-- bandCalendarOptionDayë³´ë‹¤ ëŠ¦ìœ¼ë©´ ì²´í¬ ëª»í•˜ê²Œ ë§‰ì•„ì•¼í•¨ -->
								<!-- <li><span>ğŸ¤</span>ì°¸ì„<span style="float: right;">ğŸ’§</span></li>
								<li><span>ğŸ¤</span>ë¶ˆì°¸ì„<span style="float: right;">ğŸ’§</span></li>
								<li><span>ğŸ¤</span>ë¯¸ì •<span style="float: right;">ğŸ’§</span></li>
							</ul> -->
						</div>
					</div>
					<!--================ ifì°¸ì„ì—¬ë¶€ ë =================-->
					<!--================ ifì§€ë„ =================-->
					<div>
						<h6 class="typo-list" id="mapName" style="color:#6ab0cd;"></h6>
						<div id="map" style="width:100%;height:350px;"></div>
					</div>
					<!--================ ifì§€ë„ ë =================-->
				</div>
				<div style="display: flex; margin-top:20px;">
					<button type="button" class="button_hover3" id="calBtn"></button>
					<button type="button" class="button_hover3" id="deleteBtn">ì‚­ì œ</button>
				</div>
			</div>
			<a class="modal_close_btn hoverBtn" style="text-decoration: none;">ë‹«ê¸°</a>
		</div>
		<!--== ìº˜ë¦°ë” ëª¨ë‹¬ì°½ ë ==-->
	<!-- =====ìº˜ë¦°ë” ì…ë ¥ ëª¨ë‹¬ ì°½====== -->
		<form id="my_calendar_modal_input" name="my_calendar_modal_input" class="my_calendar_modal_input" style="width: 402px;">
		<input type="hidden" th:name="${_csrf.parameterName}"
					th:value="${_csrf.token}">
			<div id="modalform_input">
                <div style="display: flex; flex-direction: column;">
                	<!--================ ì¼ì •ëª… =================-->
                	<div>
	                  <h6 class="typo-list">ì¼ì •ë§Œë“¤ê¸°</h6>
	                  <input type="hidden" th:value="${bandNo}" th:name="bandNo" id="bandNo">
	                  <div>
	                    <input type="text" class="single-input" style="border: 1px solid #eeeeee;" maxlength="14" name="bandCalendarTitle" id="bandCalendarTitle" placeholder="ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" onfocus="this.placeholder = ''" onblur="this.placeholder = 'ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'" required>
	                  </div>
	                </div>
	                <!--================ ì¼ì •ëª… ë =================-->
	                <!--================ ì¼ì •ë§ˆí¬ =================-->
                	<div>
	                  <h6 class="typo-list myPadding">ì¼ì •ë§ˆí¬</h6>
	                  <div>
	                    <select name='bandCalendarMark' id="bandCalendarMark" class="nice-select">
						  <option value='0' selected disabled> ì„ íƒ </option>
						  <option value='#F25757' style='padding:15px; background-color: #F25757'></option>
						  <option value='#FFC780' style='padding:15px; background-color: #FFC780'></option>
						  <option value='#F8AA94' style='padding:15px; background-color: #F8AA94'></option>
						  <option value='#5A7CBF' style='padding:15px; background-color: #5A7CBF'></option>
						  <option value='#BAD98B' style='padding:15px; background-color: #BAD98B'></option>
						</select>
	                  </div>
	                </div>
	                <!--================ ì¼ì •ë§ˆí¬ ë =================-->
	                <!--================ ì‹œì‘/ì¢…ë£Œ =================-->
	                <div>
	                  <h6 class="typo-list myPadding">ì‹œì‘</h6>
                      <input type="date" class="myInput" name="bandCalendarStartDay" id="bandCalendarStartDay" th:value="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}">
                      <input type="time" class="myInput" name="bandCalendarStartTime" id="bandCalendarStartTime"  value="12:00">
					  <input type="hidden" name="bandCalendarStart" id="bandCalendarStart">
	                </div>
	                <div>
	                  <h6 class="typo-list myPadding">ì¢…ë£Œ</h6>
                      <input type="date" class="myInput" name="bandCalendarEndDay" id="bandCalendarEndDay" th:value="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}">
                      <input type="time" class="myInput" name="bandCalendarEndTime" id="bandCalendarEndTime"  value="12:00">
					  <input type="hidden" name="bandCalendarEnd" id="bandCalendarEnd">
	                </div>
	                <!--================ ì‹œì‘/ì¢…ë£Œ ë =================-->
	                 <!--================ ìœ„ì¹˜ =================-->
	                <div>
	                  <h6 class="typo-list myPadding">ìœ„ì¹˜</h6>
	                  <div>
	                    <input type="text" class="myInput" id="bandCalendarLocation" name="bandCalendarLocation" value="">
	                    <input type="hidden" id="bandCalendarLocationLatlong" name="bandCalendarLocationLatlong">
	                  </div>
	                </div>
	                <!--================ ìœ„ì¹˜ ë =================-->
	                <!--================ ì°¸ì„ì—¬ë¶€ =================-->
	                <div style="display: flex; flex-direction: column; padding-bottom: 20px;">
						<h6 class="typo-list myPadding" style="float: left;">ì°¸ì„ì—¬ë¶€ ë¬»ê¸° <input type="checkbox" name="bandCalendarOption" value="t" id="bandCalendarOption"></h6>
	                    <div id="checkDate" style="display: none">
						<h6 class="typo-list myPadding">ì°¸ì„ì—¬ë¶€ í™•ì¸ ì¢…ë£Œì¼</h6>
	                     	<input type="date" class="myInput"  name="bandCalendarOptionDayD" id="bandCalendarOptionDayD" th:value="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}">
                      		<input type="time" class="myInput"  name="bandCalendarOptionDayT" id="bandCalendarOptionDayT" value="12:00">
							<input type="hidden" name="bandCalendarOptionDay" id="bandCalendarOptionDay">
						</div>
	                </div>
	                <!--================ ì°¸ì„ì—¬ë¶€ ë =================-->
	            </div>
                <button type="button" class="button_hover2" style="margin:0 auto" id="calBtn_input">ì „ì†¡</button>
			</div>
			<a class="modal_close_btn_input hoverBtn">ë‹«ê¸°</a>
		</form>
	<!-- =====ìº˜ë¦°ë” ì…ë ¥ ëª¨ë‹¬ ì°½ ë====== -->
	
	<script src="/css/band/js/time.js"></script>
	<script>
	/*<![CDATA[*/
	var header = '[[${_csrf.headerName}]]';
	var token = '[[${_csrf.token}]]';
	   console.log(header);
	   console.log(token);
	 /*]]>*/
	$(function(){ //2023-03-23íƒ€ì…ì˜ stringìœ¼ë¡œ ê³ ì³ì„œ ë³´ëƒ„..DBì—ì„œ 1ì¼ê³¼ ë§ˆì§€ë§‰ë‚ ì„ êµ¬í•´ì„œ ë³´ë‚¼ ê²ƒ..
		
		// ê¸€ê²Œì‹œ í›„ì´ë™...
		$('#childBoardValue').on("propertychange change keyup paste input", function(){
			let boardNo = $('#childBoardValue').val();
			console.log($('#childBoardValue').val())
	   		if(boardNo == null|| boardNo==''){
	   			return false;
	   		}
		$('#template').load("/own/band/bandGroup/bandBoardDetail?bandBoardDetailNo="+boardNo);
		})
		
		
		let bandNo = $('#bandNo').val();
		//me í•œë‹¬ì¼ì •ê°€ì ¸ì˜¤ê¸°
		var calendarEl = document.getElementById('calendar');
	    var calendar = new FullCalendar.Calendar(calendarEl, {
	      initialView: 'dayGridMonth',
	    	//ë‚ ì§œí¬ë§·
		    titleFormat: function (date) {
	          // YYYYë…„ MMì›”
	          return `${date.date.year}ë…„ ${date.date.month + 1}ì›”`;
	        },customButtons: {
	   		    myCustomButton: {
	   		      text: 'â•',
	   		      click: function() {
	   		      addCalendar();
	   			  $('#calBtn_input').on('click', function(){
	   				 //ì „ì†¡ì¡°ê±´ê±¸ì–´ì£¼ê¸° ì•„ ì´ê±° ë‚ ìì¡°ê±´ ì—¬ê¸°ì„œ ê±¸ì–´ì£¼ë©´ ì•ˆë˜ë„¤ ì´ê±° ë²„íŠ¼ ìˆ˜í–‰í›„ íˆë“ ì— ë„£ìŒ
	   				 if( $('#bandCalendarTitle').val()==''||
	   					 $('#bandCalendarTitle').val()==null||$('#bandCalendarMark').val()==null){
	   					 alert('ì¼ì • ì œëª©ê³¼ ë§ˆí¬ìƒ‰ì„ ì…ë ¥í•´ì£¼ì‹­ì‹œì˜¤.');
	   					 return false;
	   				 }
	   				 insertView();
	   			   })
	   		      }
	   		    }
	   		  },
	   		  headerToolbar: {
	   		    left: 'prev,next today myCustomButton',
	   		    center: 'title',
	   		    right: 'dayGridMonth'
	   		  },
	        selectable: true,
	        selectMirror: true,
	        select: function(arg) {/* 
	          var title = prompt('Event Title:');
	          if (title) {
	            calendar.addEvent({
	              title: title,
	              start: arg.start,
	              end: arg.end,
	              id: arg.id,
	              backgroundColor:"yellow",
	              textColor:"blue"
	            })
	          }
	          calendar.unselect() */
	        },
	        eventClick: function(arg) {
	        	//debugger
	        	//ëˆ„ë¥¸ ê²ƒì˜ pkì¶œë ¥
	        	console.log(arg.event.id);
	        	//ì¼ì •ìƒì„¸ì¡°íšŒ
	        	let bandCalendarLocationLatlong = MakeModalCal(arg.event.id);//ëª¨ë‹¬ë¶™ì´ê³  ìƒì„¸ ì¡°íšŒ í›„ ìº˜ë¦°ë”ë„ ë¦¬í„´
	        	calModal('my_calendar_modal', bandCalendarLocationLatlong);
	        	$('.fc-more-popover').hide();
	        /* ì‚­ì œ if (confirm('Are you sure you want to delete this event?')) {
	            arg.event.remove()
	          } */
	        },
	        editable: true,
	        dayMaxEvents: true, // allow "more" link when too many events
	        events: function(info, successCallback, failureCallback){
	            $.ajax({
	                   url: '/own/band/bandGroup/bandCalendarNow?bandNo='+bandNo+'&month='+SimpleDateTimeFormat(new Date()),
	                   dataType: 'json',
	                   success: 
	                       function(result) {
	                           var events = [];
	                           if(result!=null){
	                           		   //ìƒì„¸ë³´ê¸° ëŒ€ë¹„input hiddenì— ì €ì¥í•´ë†“ê¸°
	                           		   //ìœ ì‚¬ë°°ì—´ì´ë¼ ê·¸ëŸ°ì§€ íˆë“ ì— ì•ˆë“¤ì–´ê°€ë‹ˆ ê°€ê³µí•´ì„œ..JSON.stringify???[obj][ojb]ë¡œ ë‚˜ì˜´..ì˜¤ ëœë‹¤.
	                           		   let saveArr = []
	                                   $.each(result, function(index, element) {
	                                	saveArr.push(JSON.stringify(element));
                                        events.push({
                                               title: element.bandCalendarTitle,
                                               start: SimpleDateTimeFormat(new Date(element.bandCalendarStart)),
                                               end: SimpleDateTimeFormat(new Date(element.bandCalendarEnd)),
                                               backgroundColor : element.bandCalendarMark,
	                   		        		   borderColor : element.bandCalendarMark,
	                   		        		   textColor : 'black',
	                   		        		   id : element.bandCalendarNo                                                   
                                            }); //.push()
                                          //ì´ë²¤íŠ¸ë³´ë“œë§Œë“¤ê¸°
                                        makeBoard(JSON.stringify(element));
	                                   })
                                      //.each()
	                               //ë¦¬ìŠ¤íŠ¸ì €ì¥
	                               $('#saveCalendar').val(saveArr);
	                               console.log(events);//
	                           }//if end  
	                           successCallback(events);                               
	                       }//success: function end                          
	            }); //ajax end
	        }
	        
	    })
	   calendar.render();
	    
	    //ì¼ì •ë³´ë“œë§Œë“¤ê¸°.....ì´ë²ˆë‹¬ ê²ƒë§Œ ë§Œë“¤ì
	    function makeBoard(item){
	    	item = JSON.parse(item);
	    	//ì´ë²ˆë‹¬ë³´ë‹¤ ë’¤ì˜ ê»€ ë¦¬ìŠ¤íŠ¸ì•ˆë§Œë“¤ê±°ì„
	    	console.log(new Date(item.bandCalendarStart)+'ë¦¬ìŠ¤íŠ¸ë§Œë“¤ê¸°ìš©')
	    	console.log(new Date()+'ë¦¬ìŠ¤íŠ¸ë§Œë“¤ê¸°ìš©')
	    	if(new Date(item.bandCalendarStart)<=new Date()){
	    		return false;
	    	}
			//íƒ€ì´í‹€
			let title = item.bandCalendarTitle;
			//íƒ€ì´í‹€ ì €ì¥ë„..
			//ë‚ ì§œ
			let startDay = item.bandCalendarStart;
			let endDay = item.bandCalendarEnd;
			let sYear = startDay.substr(0, 4);
			let eYear = endDay.substr(0, 4);
			
			startDay = new Date(item.bandCalendarStart);
			endDay = new Date(item.bandCalendarEnd);
			
			//ë‹¬
			let sMonth = (1+startDay.getMonth());
			let eMonth = (1+endDay.getMonth());
			//ë‚ 
			let sDay = startDay.getDate();
			let eDay = endDay.getDate();
			//ì‹œê°„
			let startTime = startDay.getHours();
			let endTime = endDay.getHours();
			//ë¶„
			let startTime2 = startDay.getMinutes()
			let endTime2 = endDay.getMinutes()
			//ìƒì„¸ì‹œì‘ì‹œê°„
			let sTime = (startTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" "
				sTime += startTime+"ì‹œ "
				sTime += startTime2+"ë¶„";
			//ìƒì„¸ëë‚˜ëŠ”ì‹œê°„
			let eTime = (endTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" " //ì˜¤ì „ ì˜¤í›„
					 + endTime+"ì‹œ " //12ì‹œê°„í‘œê¸°
					 + endTime2+"ë¶„";
			//ì‹œì‘ ìš”ì¼
			let mon = getDayOfWeek(startDay);
			//ê¸€ì“´ì´
			let writer = item.bandNickname
			//ë§ˆí¬ìƒ‰
			let color = item.bandCalendarMark;
		    let cal  = `<div class='pagingCal' style= "display:none; background-Color:white;" >
		    			<div class='boardC' style= "width: 500x;padding:15px; height: 100px; display: flex; justify-content: space-between; border: 1px solid #eeeeee;" id="calendarModal2">`
		    			cal += `<input type="hidden" value=${item.bandCalendarNo}>`
		    			cal += `<div style="padding:10px;"><h3 id="jsDD" style="margin-bottom:0px; text-align:center;">${sDay}</h3>`
						cal += `<p id="jsDay">${mon}</p></div>`
						cal += `<div style="padding:10px; width:500px;"><h5 style="color:${color};"><span style="color:${color}; margin-right:10px;"><i class="fa-regular fa-calendar-check"></i></span>${title}</h5>`
						cal += `<p id="jsDeDay" style="margin-bottom: 0px;">${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}</p>`
						cal += `</div></div>`;
					
			//ìš”ì¼ë½‘ê¸°
			function getDayOfWeek(ë‚ ì§œë¬¸ìì—´){ //ex) getDayOfWeek('2022-06-13')
		    	const week = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
		    	const dayOfWeek = week[new Date(ë‚ ì§œë¬¸ìì—´).getDay()];
		    	return dayOfWeek;		    	
			}
			$('#articleArea').append(cal);
			//í˜ì´ì§•..ì´ˆê¸°ê°œìˆ˜
		    $('.pagingCal').slice(0, 5).show();
		    console.log($('.pagingCal'));
	    }
	    //í˜ì´ì§•
	    $('#loadBtn').click(function(e){
	    	e.preventDefault();
	    	$('.pagingCal:hidden').slice(0, 5).show();
	    	if($('.pagingCal:hidden').length == 0){
	    		alert('ê²Œì‹œë¬¼ì˜ ëì…ë‹ˆë‹¤.');
	    	}
	    })
	    $('#articleArea').on('click', $('.boardC'), function(e){
	    	//ìº˜ë¦°ë” ë²ˆí˜¸
	    	console.log($(e.target).parentsUntil('#articleArea').find('input').val());
	    	let item = $(e.target).parentsUntil('#articleArea').find('input').val();
	    	let bandCalendarLocationLatlong = MakeModalCal(item);//ëª¨ë‹¬ë¶™ì´ê³  ìƒì„¸ ì¡°íšŒ í›„ ìº˜ë¦°ë”ë„ ë¦¬í„´
	        calModal('my_calendar_modal', bandCalendarLocationLatlong);
	    })
	    
	     //ì‚­ì œ let calendarNo = $('#saveCalendarEach').val();
	    $('#deleteBtn').on('click', function(){
	    	let calendarNo = $('#saveCalendarEach').val();
	    	//ì‚­ì œ ì•„ì‘ìŠ¤
	    	if(confirm('ì¼ì •ì„ ì‚­ì œí•©ë‹ˆë‹¤.')){
	    		$.ajax({
	    			url:'/own/band/deleteCalendar?calendarNo='+calendarNo,
		            method: 'delete',
		            contentType : "application/text; charset=utf-8;",
					beforeSend: function(xhr){
			              xhr.setRequestHeader(header,token);
			            }
	    		}).then(res => {
	    			console.log(res);
	    			console.log('??');
		    			if(res=='success'){
		    				alert('ì‚­ì œì™„ë£Œ');
		    				//ì´ë™
		    				$('#template').load("/own/band/bandGroup/bandCalendar?bandNo="+bandNo);
		    			} else {
		    				alert('ì‚­ì œì‹¤íŒ¨');	    				
		    			}
	    			})
	    	}
	    })
	    
	    
	    function getCalendar(bandNo, month){
			$.ajax({
		            url:'/own/band/bandGroup/bandCalendarNow?bandNo='+bandNo+'&month='+month,
		            dataType: 'json',
		            method: 'get',
		            async : false,//ë¹„ë™ê¸°
		            contentType : "application/text; charset=utf-8;"
		        }).then(result => {
		        	console.log(result);
		        	//resultë¥¼ mapìœ¼ë¡œ ë³€í™˜í•˜ê¸°..
		        	let events = result.map(function(item){
		        		return {
		        			title : item.bandCalendarTitle,
		        			start : SimpleDateTimeFormat(new Date(item.bandCalendarStart)),
		        			end	  : SimpleDateTimeFormat(new Date(item.bandCalendarEnd)),
		        			backgroundColor : item.bandCalendarMark,
		        			borderColor : item.bandCalendarMark,
		        			textColor : 'black',
		        			id : item.bandCalendarNo
		        		}
		        	})
		        	/* var calendar = new FullCalendar.Calendar(calendarEl, {
						events : events,
						 eventTimeFormat: { // like '14:30:00'
						    hour: '2-digit',
						    minute: '2-digit',
						    hour12: false
						  } 
					}); */
					console.log('11')
					getEvents =  events;
		        	console.log(getEvents);
		        	successCallback(getEvents);
				})
		}
	    //ì¼ì • ìƒì„¸ì¡°íšŒ.. ë¦¬í„´ê°’ ì¹´ì¹´ì˜¤ì§€ë„ì— ì´ìš©
	    function MakeModalCal(calendarId){
	    	//ëˆ„ë¥¸ ê²ƒê³¼ ë™ì¼í•œ ì¼ì •ì¶”ì¶œ
	    	//ì™€ objobjë¡œ ì €ì¥ë ê»„ json.parseë¡œ inputì— ì €ì¥í•œ ë’¤ êº¼ë‚´ ì“¸ ë•Œ{}{}{}ì´ë ‡ê²Œ ë˜ë‹ˆê¹Œ jsoní˜•íƒœë¡œ ë§Œë“¤ì–´ì¤€ ë’¤ íŒŒì‹±í•´ì„œ ì“°ë‹ˆê¹Œ ë˜ë„¤ã…‹ã…‹
	    	//let saveCal = '['+$('#saveCalendar').val()+']'
	    	let saveCal = '['+$('#saveCalendar').val()+']'
	    	console.log(saveCal);
	    	saveCal = JSON.parse(saveCal);
	    	console.log(saveCal);
	    	//ëˆ„ë¥¸ ê²ƒê³¼ ë™ì¼í•œ ê²ƒì„ í•„í„°ë§í•´ ì¤Œ
	    	saveCal = saveCal.filter(item => {
	    		return item.bandCalendarNo==calendarId
	    		});
	    	console.log('????'+saveCal);
			//ë°´ë“œ ìƒì„¸ì°½ ë¶™ì´ê¸°
			makeModalDetail(saveCal);
	    	//ë°´ë“œí•œê°œ ë¶™ì—¬ë‘ê¸°
	    	$('#saveCalendarEach').val(saveCal[0].bandCalendarNo);
	    	$('#savesavebandCalendarOptionDay').val(saveCal[0].bandCalendarOptionDay);
	    	console.log(saveCal[0].bandCalendarNo)
	    	//ì¹´ì¹´ì˜¤ì§€ë„ìš©
	    	return saveCal[0].bandCalendarLocationLatlong;
	   	}
	    
	  //ëª¨ë‹¬ ì°¸ì„ì—¬ë¶€ ì™¸ì— ìƒì„¸ì°½
	  function makeModalDetail(calendar){
		  console.log('????'+calendar);
		  //ì§€ì—­ì´ ë¹ ì ¸ì„œ ë’¤ëŠ¦ê²Œ
		 	$('#mapName').text(calendar[0].bandCalendarLocation);
		 
			//íƒ€ì´í‹€
			let title = calendar[0].bandCalendarTitle;
			//íƒ€ì´í‹€ ì €ì¥ë„..
			$('#savebandCalendarTitle').val(title);
			//ë‚ ì§œ
			let startDay = calendar[0].bandCalendarStart;
			let endDay = calendar[0].bandCalendarEnd;
			let sYear = startDay.substr(0, 4);
			let eYear = endDay.substr(0, 4);
			
			startDay = new Date(calendar[0].bandCalendarStart);
			endDay = new Date(calendar[0].bandCalendarEnd);
			
			//ë‹¬
			let sMonth = (1+startDay.getMonth());
			let eMonth = (1+endDay.getMonth());
			//ë‚ 
			let sDay = startDay.getDate();
			let eDay = endDay.getDate();
			//ì‹œê°„
			let startTime = startDay.getHours();
			let endTime = endDay.getHours();
			//ë¶„
			let startTime2 = startDay.getMinutes()
			let endTime2 = endDay.getMinutes()
			//ìƒì„¸ì‹œì‘ì‹œê°„
			let sTime = (startTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" "
				sTime += startTime+"ì‹œ "
				sTime += startTime2+"ë¶„";
			//ìƒì„¸ëë‚˜ëŠ”ì‹œê°„
			let eTime = (endTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" " //ì˜¤ì „ ì˜¤í›„
					 + endTime+"ì‹œ " //12ì‹œê°„í‘œê¸°
					 + endTime2+"ë¶„";
			//ì‹œì‘ ìš”ì¼
			let mon = getDayOfWeek(startDay);
			//ê¸€ì“´ì´
			let writer = calendar[0].bandNickname
			//ë§ˆí¬ìƒ‰
			let color = calendar[0].bandCalendarMark;
		    let cal  = `<div style="width: 500x; height: 100px; display: flex; justify-content: space-between" id="calendarModal2">`
		    			cal += `<input type="hidden" value="${calendar[0].bandCalendarNo}" id="bandCalNo">`
		    			cal += `<div style="padding:10px 30px;"><h3 id="jsDD" style="margin-bottom:0px; text-align:center;">${sDay}</h3>`
						cal += `<p style=" text-align:center;id="jsDay">${mon}</p></div>`
						cal += `<div style="padding:10px 0px 10px 10px;"><h5>${title}</h5>`
						cal += `<p id="jsDeDay" style="margin-bottom: 0px;;">${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}</p>`
						cal += `<span style="color:${color}; margin-right:10px;"><i class="fa-regular fa-calendar-check"></i></span><span>${writer}</span></div>`;
					
		  //ì§€ë„ê°€ ìˆë‹¤ë©´
		    if(calendar[0].bandCalendarLocation!=null){
		    	$('#map').css('display','block');
		    } else {
		    	$('#map').css('display','none');
		    }
			//íˆ¬í‘œê°€ì—†ë‹¤ë©´	
		    if(calendar[0].bandCalendarOption==null){
		    	$('#voteRE').css('display','none');
		    } else {
		    	$('#voteRE').css('display','block');
		    	//ajax ì´ˆëŒ€íˆ¬í‘œì´ë²¤íŠ¸ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì„
		    	$.ajax({
			            url:'/own/band/bandGroup/CalendarAttend?bandCalendarNo='+calendar[0].bandCalendarNo,
			            dataType: 'json',
			            method: 'get',
			            contentType : "application/text; charset=utf-8;"
			        }).then(result => {
			        	//ì°¸ì„ì—¬ë¶€ ë¶™ì—¬ì£¼ê¸°
						console.log(result);
						makeCalModal(result);
			        })
		    }
			//ìš”ì¼ë½‘ê¸°
			function getDayOfWeek(ë‚ ì§œë¬¸ìì—´){ //ex) getDayOfWeek('2022-06-13')
		    	const week = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
		    	const dayOfWeek = week[new Date(ë‚ ì§œë¬¸ìì—´).getDay()];
		    	return dayOfWeek;		    	
			}
			$('#bCalendar').empty();
			$('#bCalendar').append(cal);
			
			//íˆ¬í‘œë§ˆê°ì¼ì´ ìˆë‹¤ë©´
			if(calendar[0].bandCalendarOptionDay!=null){
				let con = calendar[0].bandCalendarOptionDay.substr(0, calendar[0].bandCalendarOptionDay.length-3);
				$('#voteR').text('íˆ¬í‘œ ë§ˆê°ì¼'+con);
			}
			//ë§Œì•½ ì²¨ë¶€ëœ ê¸€ì´ ìˆë‹¤ë©´ calBtn, deletebtn
			let userId = $('#userId').val();
			$('#calBtn').css('display', 'block');
			$('#deleteBtn').css('display', 'block');
			if(calendar[0].bandBoardDetailNo!=null){
				$('#savebandBoardNum').val(calendar[0].bandBoardDetailNo);
				$('#calBtn').text('ì²¨ë¶€ëœ ê¸€ í™•ì¸');
				console.log('ê¸€ë²ˆí˜¸ì €ì¥'+$('#savebandBoardNum').val())
			} else if(calendar[0].userId==userId){
				$('#savebandBoardNum').val(null);
				$('#calBtn').text('ê²Œì‹œê¸€ ì˜¬ë¦¬ê¸°');
			} else {
				$('#calBtn').css('display', 'none');
				$('#deleteBtn').css('display', 'none');
			}
			}
	//ê²Œì‹œê¸€ ì´ë™
	  $('#calBtn').on('click', function(){
		  let boardNo = $('#savebandBoardNum').val();
		  	console.log("????"+boardNo);
		  if(boardNo!=null&&boardNo!=''){
		  	let boardNo = $('#savebandBoardNum').val();
		  	console.log(boardNo);
		  	//ëª¨ë‹¬ì§€ìš°ê¸°
            //ì´ë™
   			$('#mainTemplate').load("/own/band/bandGroup/bandBoardDetail?bandBoardDetailNo="+boardNo);
		  } else {
		  	let calendarNo = $('#saveCalendarEach').val();
			let title = $('#savebandCalendarTitle').val();
			//ì•„ì‘ìŠ¤ë¡œ ê¸€ ì§‘ì–´ë„£ê¸° //ìƒˆì°½ì„ ì—´ì–´ì„œ í•´ì•¼ê² ìŒ
			console.log('ìƒˆì°½ë³´ë‚¼ ê°’'+calendarNo+title+bandNo)
			window.open( "/own/band/bandGroup/bandCalendarInsert?bandCalendarNo="+calendarNo+"&title="+title+"&bandNo="+bandNo,
					"Child", "width=600px, height=530px, top=50%, left=50% resizable = no, scrollbars = no" );	
		  }
	  })
	  //ëª¨ë‹¬ ì°¸ì„ì—¬ë¶€ ìƒì„¸ë§Œë“¤ê¸°
		function makeCalModal(result){
			let attendChk = $('#attendChk');
			attendChk.empty();
			let ulTag = $('<ul style="list-style: none;" />')
			let bk01 = 0; //ì°¸ì„
			let bk01Per = new Array(); //ì°¸ì„ì¸ì›
			let bk02 = 0; //ë¯¸ì°¸ì„
			let bk02Per = new Array(); //ë¯¸ì°¸ì„ì¸ì›
			let bk03 = 0; //ë¯¸ì •
			let bk03Per = new Array(); //ë¯¸ì°¸ì„ì¸ì›
			let myChk = ''; // ë³¸ì¸ ê±° ì²´í¬
			//bandMemberNo=:ë‹‰ë„¤ì„ì´ë“¤ì–´ê°
			$(result).each(function(idx, ele){
				if(ele.bandAttend=="BK01"){
					bk01++;
					bk01Per.push(ele.bandMemberNo);
				} else if(ele.bandAttend=="BK02"){
					bk02++;
					bk02Per.push(ele.bandMemberNo);
				} else if(ele.bandAttend=="BK03"){
					bk03++;
					bk03Per.push(ele.bandMemberNo);
				}
				let userId = $('#userId').val();
				if(ele.bandUserId==userId){
					myChk = ele.bandAttend;
				}
			})
			console.log(bk01Per.toString()+'???')
			//ì°¸ì„ì ë„ˆë¬´ ë§ìœ¼ë©´ ìë¥´ê¸°
			if(bk01Per.length>2){
				bk01Per.splice(2, bk01Per.length, '...');
			}
			if(bk02Per.length>2){
				bk02Per.splice(2, bk02Per.length, '...');
			}
			if(bk03Per.length>2){
				bk03Per.splice(2, bk03Per.length, '...');
			}
			
			//ë‚´ ì²´í¬ í™•ì¸
			let myBk1 = 'ğŸ¤';
			let nameBk1 = 'BK01'
			let myBk2 = 'ğŸ¤';
			let nameBk2 = 'BK02'
			let myBk3 = 'ğŸ¤';
			let nameBk3 = 'BK03'
			console.log(myChk);
			if(myChk == 'BK01'){
				myBk1 = 'ğŸ’–'
				nameBk1 = 'BK01chk'
			} else if(myChk == 'BK02'){
				myBk2 = 'ğŸ’–';
				nameBk2 = 'BK02chk'
			} else if(myChk == 'BK03'){
				myBk3 = 'ğŸ’–';
				nameBk3 = 'BK03chk'
			}
			let liTag = `
				<li class="lis"><span class="attch" name=${nameBk1}>${myBk1}</span>ì°¸ì„<b class="toSt">${bk01Per.toString()}</b><span name="BK01" class="attch2" style="float: right; padding-right:15px;  cursor: pointer;">ğŸŒ•</span></li>
				<li class="lis"><span class="attch" name=${nameBk2}>${myBk2}</span>ë¶ˆì°¸ì„<b class="toSt">${bk02Per.toString()}</b><span name="BK02" class="attch2" style="float: right; padding-right:15px;  cursor: pointer;">ğŸŒ•</span></li>
				<li class="lis"><span class="attch" name=${nameBk3}>${myBk3}</span>ë¯¸ì •<b class="toSt">${bk03Per.toString()}</b><span name="BK03" class="attch2" style="float: right; padding-right:15px;  cursor: pointer;">ğŸŒ•</span></li>
			`;
			attendChk.append(liTag);
			
		}
	  //ëª¨ë‹¬ë²„ì „+ì§€ë„..ê¸€ìƒì„¸ì—ì„  ë³´ë‹ˆê¹Œ ìº˜ë¦°ë” ìƒì„¸ì¡°íšŒë„ í–‡ì—ˆë„¤? ì—¬ê¸´ ê± ì €ì¥ì‹œì¼œ ë‘ 
		function calModal(id, bandCalendarLocationLatlong) {
	        var cModal = document.getElementById(id);
	        // ëª¨ë‹¬ div ë’¤ì— í¬ë„ë¬´ë ˆí•œ ë ˆì´ì–´
	        var bgg = document.createElement('div');
	        bgg.classList.add('bgg');
	        //í…œí”Œë¦¿ì— ë¶™ì´ê¸°
	        $('#template').append(bgg);
	        //document.body.append(bgg);
			
	        cModal.classList.add('cModal');
	        cModal.style.display='block';
	        //document.body.append(cModal);    
	        $('#template').append(cModal);
	        // ë‹«ê¸° ë²„íŠ¼ ì²˜ë¦¬, ì‹œêº¼ë¨¼ ë ˆì´ì–´ì™€ ëª¨ë‹¬ div ì§€ìš°ê¸°
	        cModal.querySelector('.modal_close_btn').addEventListener('click', function() {
	            bgg.remove();
	            cModal.style.display = 'none';
	        });
	        //ê²Œì‹œê¸€ ì˜¬ë¦´ ë•Œë„ ì§€ìš°ê¸°
	        $('#calBtn').on('click', function(){
	        	bgg.remove();
	            cModal.style.display = 'none';
	        })
	      //ì§€ë„..ì—¬ê¸°ì„œ í•´ì•¼í•˜ë‚˜ ë´„...ë¶€ë¥¼ë•Œ ë§ˆë‹¤ ì´ˆê¸°í™”ì‹œì¼œì„œ ë¶€ë¦„
			//ì§€ë„ê°€ ìˆë‹¤ë©´
		    if(bandCalendarLocationLatlong!=null){
		    	kakaoMap(bandCalendarLocationLatlong);
		    }
	    }
		//ì¼ì •ì²´í¬í´ë¦­ëª¨ë‹¬
		$('#attendChk').on('click', $('.attch'), function(e){
			let bandCalendarOptionDay = $('#savesavebandCalendarOptionDay').val();
			console.log(bandCalendarOptionDay);
			//ë§ˆê°ì¼ ì§€ë‚˜ì„œ íˆ¬í‘œ
			console.log('ë§ˆê°ì¼'+new Date(bandCalendarOptionDay))
			console.log('ë§ˆê°ì¼'+new Date())
			if(bandCalendarOptionDay==null || new Date(bandCalendarOptionDay)<new Date()){
				alert('íˆ¬í‘œê¸°í•œì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.');
				return false;
			}
			if($(e.target).attr('class')=='attch'){
				//ì„ íƒí•œ ê²ƒì˜ name
				let heartChk = $(e.target).attr('name');
				//ë‚´ ì²´í¬ í™•ì¸ ìš°ì„  ë‹¤ ì§€ìš°ê³  ëˆŒë¦°ê²Œ ì²´í¬ë¼ë©´ ì²´í¬í•´ì£¼ê¸°...ê·¸ì™¸ì— ì²´í¬=>ë¹„ì²´í¬ë©´ ê·¸ëƒ¥ ë‹¤ ë¹ˆ ì¹¸ë¨
				let nameBk1 = 'BK01'
				let nameBk2 = 'BK02'
				let nameBk3 = 'BK03'
				//ë„˜ê¸¸ ê°’ìš©
				let result = 0;
				if(heartChk=='BK01') {
					nameBk1 = 'BK01chk';
					result = 'BK01';
				} else if (heartChk=='BK02') {
					nameBk2 = 'BK02chk';
					result = 'BK02';
				} else if (heartChk=='BK03') {
					nameBk3 = 'BK03chk';
					result = 'BK03';
				}
				//ì„¸ê°œì˜ name ìƒíƒœê°€ ì¶œë ¥ë¨..( ì´ì¤‘ ì²´í¬ëœ ê²ƒ í˜¹ì€ ì „ë¶€ ë„ì´ë©´ ë„ì¸ ìƒíƒœë¡œ ì•„ì‘ìŠ¤ë¡œ ë³´ë‚¼ ì˜ˆì •)
				/* $(e.currentTarget).find('.attch').each(function(idx,ele){
					console.log($(ele).attr('name'));
				}) */
				let bandCalendarNo = $('#saveCalendarEach').val();
				let bandUserId = $('#userId').val();
				let bandAttend = result==0?null:result;
				console.log('???')
				$.ajax({
					url: '/own/band/bandGroup/calendarUpdel?bandCalendarNo='+bandCalendarNo+'&bandMemberNo='+bandUserId+'&bandAttend='+bandAttend,
					dataType: 'json',
					method: 'get',
					contentType : "application/text; charset=utf-8;"
				}).then(result => {
					console.log(result);
					if(result != null){
						makeCalModal(result)
					}
				})
			}
		})
		//ì°¸ì—¬ì¤‘ì¸ì‚¬ëŒ í™•ì¸ ì°½
		$('#attendChk').on('click', $('.attch2'), function(e){
			if($(e.target).attr('class')=='attch2'){
				let bandCalendarNo = $('#saveCalendarEach').val();
				//ì–´ë˜ ìœ í˜•ì˜ ì²´í¬ë¥¼ ë³¼ ì§€ ì €ì¥
				let type = $(e.target).attr('name');
				window.open( "/own/band/bandCalendarChk?bandAttend="+type+"&bandCalendarNo="+bandCalendarNo, "Child", "width=500px, height=600px, top=50%, left=50% resizable = no, scrollbars = no" );	
			}
		})
		//ì…€ë ‰íŠ¸ë°•ìŠ¤ ë°°ê²½ìƒ‰
		function selectColor(){
		    var color = $("#bandCalendarMark option:checked").css("color");
		    var bgcolor = $("#bandCalendarMark option:checked").css("background-color");
		    $("#bandCalendarMark").css("color",color);		
		    $("#bandCalendarMark").css("background-color",bgcolor);	
		}		
		$("#bandCalendarMark").on('change', function(){
			selectColor();
		})	
	  //ì—¬ê¸´ í•´ê²°
	  function kakaoMap(bandCalendarLocationLatlong){
			
		  console.log(bandCalendarLocationLatlong)
		  if(bandCalendarLocationLatlong != null){
			  $('#map').css('display','block');
		    let latLong = bandCalendarLocationLatlong;
			console.log(latLong);
		    let lat = latLong.substr(1, latLong.indexOf(',')-1);
		    let longg = latLong.substr(latLong.indexOf(' ')+1);
		    longg = longg.substr(0, longg.indexOf(')')-1);
		    console.log(lat+'+'+longg);
				
			var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div 
			mapOption = { 
			    center: new kakao.maps.LatLng(lat, longg), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
			    level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
			};
			
			var map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
			
			//ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ì…ë‹ˆë‹¤ 
			var markerPosition  = new kakao.maps.LatLng(lat, longg); 
			
			//ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
			var marker = new kakao.maps.Marker({
			position: markerPosition
			});
			
			//ë§ˆì»¤ê°€ ì§€ë„ ìœ„ì— í‘œì‹œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
			marker.setMap(map);
			
			//ì•„ë˜ ì½”ë“œëŠ” ì§€ë„ ìœ„ì˜ ë§ˆì»¤ë¥¼ ì œê±°í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤
			//marker.setMap(null);
		} else {
			$('#map').css('display','none');
		}
		}
		function addCalendar(){
			modal('my_calendar_modal_input'); 
		}
	//ì¼ì •ì¶”ê°€
	//ì²´í¬ë°•ìŠ¤ í´ë¦­ì‹œ íˆ¬í‘œë‚ ì§œ ì‹œê°„ì œí•œ
	$('#bandCalendarOption').on('click',function(){
		if($('#bandCalendarOption').prop('checked')){
			$('#checkDate').show();
		} else {
			$('#checkDate').hide();
			//ê°’ë¹„ìš°ê¸°
			$('#bandCalendarOptionDay').val();
		}
	})
	//ë‚ ì§œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ë³´ë‚¼ í¬ë§·
	function timestamp(date){
		let month = date.getMonth() + 1;
        let day = date.getDate();
        let hour = date.getHours();
        let minute = date.getMinutes();
        let second = date.getSeconds();

        month = month >= 10 ? month : '0' + month;
        day = day >= 10 ? day : '0' + day;
        hour = hour >= 10 ? hour : '0' + hour;
        minute = minute >= 10 ? minute : '0' + minute;
        second = second >= 10 ? second : '0' + second;

        return date.getFullYear() + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;
	}
	//+ë²„íŠ¼ ëˆŒë¦¼
	function insertCalendar(){
		alert('ëˆŒë¦¼');
	}
	//ì…ë ¥ë²„íŠ¼ëˆŒë¦¼
	function insertView(){
		//íˆ¬í‘œì¼ì •ì´ ì‡ë‹¤ë©´ ë„£ê¸°
		if($('#bandCalendarOption').prop('checked')){
			let voteDay = new Date($('#bandCalendarOptionDayD').val());
			let voteTime = $('#bandCalendarOptionDayT').val();
			console.log(voteDay);
			console.log(voteTime);
			voteDay.setHours(voteTime.substr(0, 2));
			voteDay.setMinutes(voteTime.substr(3));
			console.log(voteDay);
			$('#bandCalendarOptionDay').val(timestamp(voteDay));
			console.log('ë§ˆê°ì¼'+$('#bandCalendarOptionDay').val());
		}
		//ë°´ë“œìº˜ë¦°ë”ì‹œì‘ì¼ ëë‚˜ëŠ” ë‚  íˆë“  ê°’ ë„£ê¸°
		//ë‚ ì§œ
		let startDay = new Date($('#bandCalendarStartDay').val());
		let endDay = new Date($('#bandCalendarEndDay').val());
		//ì‹œê°„
		let startTime = $('#bandCalendarStartTime').val();
		let endTime = $('#bandCalendarEndTime').val();
		
		console.log(startDay)
		startDay.setHours(startTime.substr(0, 2));
		startDay.setMinutes(startTime.substr(3));
		console.log(startDay)//ì—¬ê¸°ê¹Œì§„ ë³€í™˜ì™„ë£Œ
		$('#bandCalendarStart').val(timestamp(startDay));
		console.log('ì‹œì‘ì¼'+$('#bandCalendarStart').val());
		
		console.log(endDay)
		endDay.setHours(startTime.substr(0, 2));
		endDay.setMinutes(startTime.substr(3));
		console.log(endDay)//ì—¬ê¸°ê¹Œì§„ ë³€í™˜ì™„ë£Œ
		$('#bandCalendarEnd').val(timestamp(endDay))
		//ì…ë ¥ë°ì´í„°
		
		//ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ ì²´í¬
		 if($('#bandCalendarStart').val()>$('#bandCalendarEnd').val()){
				 alert('ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
				 return false;
			 }
		
		//ê¸€ì“°ê¸°
		$.ajax({
			url : '/own/band/insertCalendar',
			method : 'post',
			data : $('#my_calendar_modal_input').serializeObject(),
			dataType : 'json',
			beforeSend: function(xhr){
              xhr.setRequestHeader(header,token);
            }
		}).then( res =>{
			if(res!=null){
				alert('ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
				$('#template').load("/own/band/bandGroup/bandCalendar?bandNo="+bandNo);
			} else {
				alert('ê¸€ì“°ê¸° ì‹¤íŒ¨');
			}
		})
		
	}
	//ì§€ì—­
	$('#bandCalendarLocation').on('click', function(){
		window.open( "/own/band/map", "Child", "width=1000px, height=500px, top=50%, left=50% ,resizable = no, scrollbars = no" );
	})
	//ëª¨ë‹¬
	function modal(id) {
		var cModal = document.getElementById(id);
        // ëª¨ë‹¬ div ë’¤ì— í¬ë„ë¬´ë ˆí•œ ë ˆì´ì–´
        var bgg = document.createElement('div');
        bgg.classList.add('bgg');
        //í…œí”Œë¦¿ì— ë¶™ì´ê¸°
        $('#template').append(bgg);
        //document.body.append(bgg);
		
        cModal.classList.add('cModal');
        cModal.style.display='block';
        //document.body.append(cModal);    
        $('#template').append(cModal);
        // ë‹«ê¸° ë²„íŠ¼ ì²˜ë¦¬, ì‹œêº¼ë¨¼ ë ˆì´ì–´ì™€ ëª¨ë‹¬ div ì§€ìš°ê¸°
        cModal.querySelector('.modal_close_btn_input').addEventListener('click', function() {
            bgg.remove();
            cModal.style.display = 'none';
        });
        //ê²Œì‹œê¸€ ì˜¬ë¦´ ë•Œë„ ì§€ìš°ê¸°
        $('#calBtn').on('click', function(){
        	bgg.remove();
            cModal.style.display = 'none';
        })
        
	}
	 })
	 $(document).ready(function() {
			$('select').niceSelect();
	 })
	  //$()ë
	  $('#bandCalendarMark').on('change', function(){
		  console.log($('.nice-select:eq(1)'));
		  $('.nice-select').css('background-color', $('#bandCalendarMark').val())
	  })
	</script>
	</div>
</body>
</html>