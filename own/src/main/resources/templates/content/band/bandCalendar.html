<html xmlns:th="http://www.thymeleaf.org"lang="ko">
<head>
  <title>Title</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<script src="/css/band/js/jquery-3.2.1.js"></script>
	<script src="/css/band/js/json.min.js"></script>
	<script src="/css/band/calendar/index.global.js"></script>
	<style>
		/*ì§€ë„*/
		.map_wrap {
			position: relative;
			width: 100%;
			height: 350px;
		}
		
		.title {
			font-weight: bold;
			display: block;
		}
		
		.hAddr {
			position: absolute;
			left: 10px;
			top: 10px;
			border-radius: 2px;
			background: #fff;
			background: rgba(255, 255, 255, 0.8);
			z-index: 1;
			padding: 5px;
		}
		
		#centerAddr {
			display: block;
			margin-top: 2px;
			font-weight: normal;
		}
		
		.bAddr {
			padding: 5px;
			text-overflow: ellipsis;
			overflow: hidden;
			white-space: nowrap;
		}
		/*ì§€ë„ ë*/
		#my_calendar_modal {
		display: none;
		width: 650px;
		padding: 20px 30px;
		background-color: #fefefe;
		border: 1px solid #888;
		border-radius: 3px;
		position: fixed;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
	
	#my_calendar_modal .modal_close_btn {
		position: absolute;
		top: 10px;
		right: 10px;
	}
	
	.bgg {
		position: fixed;
		z-index: 500;
		left: 0px;
		top: 0px;
		width: 100%;
		height: 100%;
		overflow: auto;
		/* ë ˆì´ì–´ ìƒ‰ê°ˆì€ ì—¬ê¸°ì„œ ë°”ê¾¸ë©´ ë¨ */
		background-color: rgba(0, 0, 0, 0.4);
	}
	
	.cModal {
		position: fixed;
		display: block;
		box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
			rgba(0, 0, 0, 0.19);
		/* ì‹œêº¼ë¨¼ ë ˆì´ì–´ ë³´ë‹¤ í•œì¹¸ ìœ„ì— ë³´ì´ê¸° */
		z-index: 1000;
		/* div center ì •ë ¬ */
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		-ms-transform: translate(-50%, -50%);
		-webkit-transform: translate(-50%, -50%);
	}
	</style>
</head>

<body>
	<!--== ìº˜ë¦°ë” ==-->
	<div id="template" style="flex-grow: 3; width: 740px">
		<article style="border: 1px solid #eeeeee; padding: 30px;">
			<div id='calendar'></div>
		</article>
	</div>
	<!--== ì´ˆê¸°ì— ì•„ì‘ìŠ¤ë¡œ ë¶ˆëŸ¬ì˜¨ ì¼ì •ë¦¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” ê³³ ==-->
	<input type="hidden" id="saveCalendar">
	<input type="hidden" id="saveCalendarEach"><!-- ìƒì„¸ì¡°íšŒì¤‘ì¸ê±° ì €ì¥ ì´ê±´ë²ˆí˜¸-->
	<input type="hidden" id="savesavebandCalendarOptionDay"><!-- ìƒì„¸ì¡°íšŒì¤‘ì¸ê±° ì €ì¥ ì´ê±´bandCalendarOptionDay-->
	<input type="hidden" id="userId" th:value="${session.loginUser.userId}">
	<!--== ìº˜ë¦°ë” ë ==-->
	<!--== ìº˜ë¦°ë” ìƒì„¸ ëª¨ë‹¬ì°½ ==-->
	<div id="my_calendar_modal">
		<div id="modalform">
			<div>
				<!--================ ì¼ì •ìƒì„¸ =================-->
				<div id="bCalendar">
					<!-- <div style="width: 500x; height: 100px; display: flex; justify-content: space-between" id="calendarModal2">
						<input type="hidden" id="bandCalendarNo">
						<div style="padding: 10px;">
							<h3 id="jsDD" style="margin-bottom: 0px"></h3>
							<p id="jsDay"></p>
						</div>
						<div style="padding: 10px;">
							<h5>íƒ€ì´í‹€</h5>
							<p id="jsDeDay" style="margin-bottom: 0px"></p>
							<span>ğŸ’­</span>
							<span>ê¸€ì“´ì´</span>
						</div>
					</div> -->
				</div>
				<!--================ ì¼ì •ìƒì„¸ ë =================-->
				<!--================ ifì°¸ì„ì—¬ë¶€ =================-->
				<div id="voteRE">
					<h6 class="typo-list">ì°¸ì„ì—¬ë¶€ <b id="voteR"></b><b></b></h6>
					<div id="attendChk"> 
						<!-- <ul style="list-style: none;">
							<!-- bandCalendarOptionDayë³´ë‹¤ ëŠ¦ìœ¼ë©´ ì²´í¬ ëª»í•˜ê²Œ ë§‰ì•„ì•¼í•¨ -->
							<!-- <li><span>ğŸ¤</span>ì°¸ì„<span style="float: right;">ğŸ’§</span></li>
							<li><span>ğŸ¤</span>ë¶ˆì°¸ì„<span style="float: right;">ğŸ’§</span></li>
							<li><span>ğŸ¤</span>ë¯¸ì •<span style="float: right;">ğŸ’§</span></li>
						</ul> -->
					</div>
				</div>
				<!--================ ifì°¸ì„ì—¬ë¶€ ë =================-->
				<!--================ ifì§€ë„ =================-->
				<div>
					<h6 class="typo-list" id="mapName"></h6>
					<div id="map" style="width:100%;height:350px;"></div>
				</div>
				<!--================ ifì§€ë„ ë =================-->
			</div>
			<button type="button" id="calBtn" value=""></button>
		</div>
		<a class="modal_close_btn">:</a>
	</div>
	<!--== ìº˜ë¦°ë” ëª¨ë‹¬ì°½ ë ==-->
	<script src="/css/band/js/time.js"></script>
	<script>
	$(function(){ //2023-03-23íƒ€ì…ì˜ stringìœ¼ë¡œ ê³ ì³ì„œ ë³´ëƒ„..DBì—ì„œ 1ì¼ê³¼ ë§ˆì§€ë§‰ë‚ ì„ êµ¬í•´ì„œ ë³´ë‚¼ ê²ƒ..
		//me í•œë‹¬ì¼ì •ê°€ì ¸ì˜¤ê¸°
		var calendarEl = document.getElementById('calendar');
	    var calendar = new FullCalendar.Calendar(calendarEl, {
	      initialView: 'dayGridMonth',
	    	//ë‚ ì§œí¬ë§·
		    titleFormat: function (date) {
	          // YYYYë…„ MMì›”
	          return `${date.date.year}ë…„ ${date.date.month + 1}ì›”`;
	        },
	        selectable: true,
	        selectMirror: true,
	        select: function(arg) {
	          var title = prompt('Event Title:');
	          if (title) {
	            calendar.addEvent({
	              title: title,
	              start: arg.start,
	              end: arg.end,
	              id: arg.id,
	              backgroundColor:"yellow",
	              textColor:"blue"
	            })
	          }
	          calendar.unselect()
	        },
	        eventClick: function(arg) {
	        	//ëˆ„ë¥¸ ê²ƒì˜ pkì¶œë ¥
	        	console.log(arg.event.id);
	        	let bandCalendarLocationLatlong = MakeModalCal(arg.event.id);//ëª¨ë‹¬ë¶™ì´ê³  ìƒì„¸ ì¡°íšŒ í›„ ìº˜ë¦°ë”ë„ ë¦¬í„´
	        	calModal('my_calendar_modal', bandCalendarLocationLatlong);
	        /* ì‚­ì œ if (confirm('Are you sure you want to delete this event?')) {
	            arg.event.remove()
	          } */
	        },
	        editable: true,
	        dayMaxEvents: true, // allow "more" link when too many events
	        events: function(info, successCallback, failureCallback){
	            $.ajax({
	                   url: '/own/band/bandGroup/bandCalendarNow?bandNo='+bandNo+'&month='+SimpleDateTimeFormat(new Date()),
	                   dataType: 'json',
	                   success: 
	                       function(result) {
	                           var events = [];
	                           if(result!=null){
	                           		   //ìƒì„¸ë³´ê¸° ëŒ€ë¹„input hiddenì— ì €ì¥í•´ë†“ê¸°
	                           		   //ìœ ì‚¬ë°°ì—´ì´ë¼ ê·¸ëŸ°ì§€ íˆë“ ì— ì•ˆë“¤ì–´ê°€ë‹ˆ ê°€ê³µí•´ì„œ..JSON.stringify???[obj][ojb]ë¡œ ë‚˜ì˜´..ì˜¤ ëœë‹¤.
	                           		   let saveArr = []
	                                   $.each(result, function(index, element) {
	                                	saveArr.push(JSON.stringify(element));
                                        events.push({
                                               title: element.bandCalendarTitle,
                                               start: SimpleDateTimeFormat(new Date(element.bandCalendarStart)),
                                               end: SimpleDateTimeFormat(new Date(element.bandCalendarEnd)),
                                               backgroundColor : element.bandCalendarMark,
	                   		        		   borderColor : element.bandCalendarMark,
	                   		        		   textColor : 'black',
	                   		        		   id : element.bandCalendarNo                                                   
                                            }); //.push()
	                                    })//.each()
	                               //ë¦¬ìŠ¤íŠ¸ì €ì¥
	                               $('#saveCalendar').val(saveArr);
	                               console.log(events);
	                           }//if end                           
	                           successCallback(events);                               
	                       }//success: function end                          
	            }); //ajax end
	        }
	    })
	   calendar.render();
	   
	    function getCalendar(bandNo, month){
			$.ajax({
		            url:'/own/band/bandGroup/bandCalendarNow?bandNo='+bandNo+'&month='+month,
		            dataType: 'json',
		            method: 'get',
		            async : false,//ë¹„ë™ê¸°
		            contentType : "application/text; charset=utf-8;"
		        }).then(result => {
		        	console.log(result);
		        	//resultë¥¼ mapìœ¼ë¡œ ë³€í™˜í•˜ê¸°..
		        	let events = result.map(function(item){
		        		return {
		        			title : item.bandCalendarTitle,
		        			start : SimpleDateTimeFormat(new Date(item.bandCalendarStart)),
		        			end	  : SimpleDateTimeFormat(new Date(item.bandCalendarEnd)),
		        			backgroundColor : item.bandCalendarMark,
		        			borderColor : item.bandCalendarMark,
		        			textColor : 'black',
		        			id : item.bandCalendarNo
		        		}
		        	})
		        	/* var calendar = new FullCalendar.Calendar(calendarEl, {
						events : events,
						 eventTimeFormat: { // like '14:30:00'
						    hour: '2-digit',
						    minute: '2-digit',
						    hour12: false
						  } 
					}); */
					console.log('11')
					getEvents =  events;
		        	console.log(getEvents);
		        	successCallback(getEvents);
				})
		}
	    //ì¼ì • ìƒì„¸ì¡°íšŒ.. ë¦¬í„´ê°’ ì¹´ì¹´ì˜¤ì§€ë„ì— ì´ìš©
	    function MakeModalCal(calendarId){
	    	//ëˆ„ë¥¸ ê²ƒê³¼ ë™ì¼í•œ ì¼ì •ì¶”ì¶œ
	    	//ì™€ objobjë¡œ ì €ì¥ë ê»„ json.parseë¡œ inputì— ì €ì¥í•œ ë’¤ êº¼ë‚´ ì“¸ ë•Œ{}{}{}ì´ë ‡ê²Œ ë˜ë‹ˆê¹Œ jsoní˜•íƒœë¡œ ë§Œë“¤ì–´ì¤€ ë’¤ íŒŒì‹±í•´ì„œ ì“°ë‹ˆê¹Œ ë˜ë„¤ã…‹ã…‹
	    	let saveCal = '['+$('#saveCalendar').val()+']'
	    	console.log(JSON.parse(saveCal));
	    	saveCal = JSON.parse(saveCal);
	    	//ëˆ„ë¥¸ ê²ƒê³¼ ë™ì¼í•œ ê²ƒì„ í•„í„°ë§í•´ ì¤Œ
	    	saveCal = saveCal.filter(item => item.bandCalendarNo==calendarId);
	    	console.log(saveCal);
			//ë°´ë“œ ìƒì„¸ì°½ ë¶™ì´ê¸°
			makeModalDetail(saveCal);
	    	//ë°´ë“œí•œê°œ ë¶™ì—¬ë‘ê¸°
	    	$('#saveCalendarEach').val(saveCal[0].bandCalendarNo);
	    	$('#savesavebandCalendarOptionDay').val(saveCal[0].savebandCalendarOptionDay);
	    	console.log('ì™œ??'+saveCal[0].bandCalendarLocationLatlong)
	    		return saveCal[0].bandCalendarLocationLatlong;
	   	}
	  //ëª¨ë‹¬ ì°¸ì„ì—¬ë¶€ ì™¸ì— ìƒì„¸ì°½
	  function makeModalDetail(calendar){
			//íƒ€ì´í‹€
			let title = calendar[0].bandCalendarTitle;
			//ë‚ ì§œ
			let startDay = calendar[0].bandCalendarStart;
			let endDay = calendar[0].bandCalendarEnd;
			let sYear = startDay.substr(0, 4);
			let eYear = endDay.substr(0, 4);
			
			startDay = new Date(calendar[0].bandCalendarStart);
			endDay = new Date(calendar[0].bandCalendarEnd);
			
			//ë‹¬
			let sMonth = (1+startDay.getMonth());
			let eMonth = (1+endDay.getMonth());
			//ë‚ 
			let sDay = startDay.getDate();
			let eDay = endDay.getDate();
			//ì‹œê°„
			let startTime = startDay.getHours();
			let endTime = endDay.getHours();
			//ë¶„
			let startTime2 = startDay.getMinutes()
			let endTime2 = endDay.getMinutes()
			//ìƒì„¸ì‹œì‘ì‹œê°„
			let sTime = (startTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" "
				sTime += startTime+"ì‹œ "
				sTime += startTime2+"ë¶„";
			//ìƒì„¸ëë‚˜ëŠ”ì‹œê°„
			let eTime = (endTime < 12 ? "ì˜¤ì „" : "ì˜¤í›„")+" " //ì˜¤ì „ ì˜¤í›„
					 + endTime+"ì‹œ " //12ì‹œê°„í‘œê¸°
					 + endTime2+"ë¶„";
			//ì‹œì‘ ìš”ì¼
			let mon = getDayOfWeek(startDay);
			//ê¸€ì“´ì´
			let writer = calendar[0].bandNickname
			//ë§ˆí¬ìƒ‰
			let color = calendar[0].bandCalendarMark;
		    let cal  = `<div style="width: 500x; height: 100px; display: flex; justify-content: space-between" id="calendarModal2">`
		    			cal += `<input type="hidden" value="${calendar[0].bandCalendarNo}" id="bandCalNo">`
		    			cal += `<div style="padding:10px;"><h3 id="jsDD"  style="margin-bottom:0px">${sDay}</h3>`
						cal += `<p id="jsDay">${mon}</p></div>`
						cal += `<div style="padding:10px;"><h5>${title}</h5>`
						cal += `<p id="jsDeDay" style="margin-bottom: 0px">${sYear}ë…„ ${sMonth}ì›” ${sDay}ì¼ ${sTime} ~ ${eYear}ë…„ ${eMonth}ì›” ${eDay}ì¼ ${eTime}</p>`
						cal += `<span style="background-color:${color}">ğŸ’­</span><span>${writer}</span></div>`;
					
		  //ì§€ë„ê°€ ìˆë‹¤ë©´
		    if(calendar[0].bandCalendarLocation!=null){
		    	$('#mapName').css('display','none');
		    } else {
		    	$('#mapName').css('display','block');
		    }
			//íˆ¬í‘œê°€ì—†ë‹¤ë©´	
		    if(calendar[0].bandCalendarOption==null){
		    	$('#voteRE').css('display','none');
		    } else {
		    	$('#voteRE').css('display','block');
		    	//ajax ì´ˆëŒ€íˆ¬í‘œì´ë²¤íŠ¸ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì„
		    	$.ajax({
			            url:'/own/band/bandGroup/CalendarAttend?bandCalendarNo='+calendar[0].bandCalendarNo,
			            dataType: 'json',
			            method: 'get',
			            contentType : "application/text; charset=utf-8;"
			        }).then(result => {
			        	//ì°¸ì„ì—¬ë¶€ ë¶™ì—¬ì£¼ê¸°
						console.log(result);
						makeCalModal(result);
			        })
		    }
			//ìš”ì¼ë½‘ê¸°
			function getDayOfWeek(ë‚ ì§œë¬¸ìì—´){ //ex) getDayOfWeek('2022-06-13')
		    	const week = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
		    	const dayOfWeek = week[new Date(ë‚ ì§œë¬¸ìì—´).getDay()];
		    	return dayOfWeek;		    	
			}
			$('#bCalendar').empty();
			$('#bCalendar').append(cal);
			
			//íˆ¬í‘œë§ˆê°ì¼ì´ ìˆë‹¤ë©´
			if(calendar[0].bandCalendarOptionDay!=null){
				let con = calendar[0].bandCalendarOptionDay.substr(0, calendar[0].bandCalendarOptionDay.length-3);
				$('#voteR').text('íˆ¬í‘œ ë§ˆê°ì¼'+con);
			}
			//ë§Œì•½ ì²¨ë¶€ëœ ê¸€ì´ ìˆë‹¤ë©´ calBtn
			if(calendar[0].bandboarddetailno!=null){
				$('#calBtn').val(calendar[0].bandboarddetailno);
				$('#calBtn').text('ì´ ì¼ì •ì´ ì²¨ë¶€ëœ ê¸€ í™•ì¸í•˜ê¸°');
			} else {
				$('#calBtn').text('ê²Œì‹œê¸€ ì˜¬ë¦¬ê¸°');
			}
	  }
	//ê²Œì‹œê¸€ ì´ë™
	  $('#calBtn').on('click', function(){
		  if($('#calBtn').val()!=null){
		  	let boardNo = $('#calBtn').val();
   			$('#mainTemplate').load("/own/band/bandGroup/bandBoardDetail?bandBoardDetailNo="+boardNo);
		  } else {
			//ì•„ì‘ìŠ¤ë¡œ ê¸€ ì§‘ì–´ë„£ê¸°
			let calendarNo = $('#saveCalendarEach').val();
			
		  }
	  })
	  //ëª¨ë‹¬ ì°¸ì„ì—¬ë¶€ ìƒì„¸ë§Œë“¤ê¸°
		function makeCalModal(result){
			let attendChk = $('#attendChk');
			attendChk.empty();
			let ulTag = $('<ul style="list-style: none;" />')
			let bk01 = 0; //ì°¸ì„
			let bk01Per = new Array(); //ì°¸ì„ì¸ì›
			let bk02 = 0; //ë¯¸ì°¸ì„
			let bk02Per = new Array(); //ë¯¸ì°¸ì„ì¸ì›
			let bk03 = 0; //ë¯¸ì •
			let bk03Per = new Array(); //ë¯¸ì°¸ì„ì¸ì›
			let myChk = ''; // ë³¸ì¸ ê±° ì²´í¬
			$(result).each(function(idx, ele){
				if(ele.bandAttend=="BK01"){
					bk01++;
					bk01Per.push(ele.bandMemberNo);
				} else if(ele.bandAttend=="BK02"){
					bk02++;
					bk02Per.push(ele.bandMemberNo);
				} else if(ele.bandAttend=="BK03"){
					bk03++;
					bk03Per.push(ele.bandMemberNo);
				}
				let userId = $('#userId').val();
				if(ele.bandUserId==userId){
					myChk = ele.bandAttend;
				}
			})
			//ë‚´ ì²´í¬ í™•ì¸
			let myBk1 = 'ğŸ¤';
			let nameBk1 = 'BK01'
			let myBk2 = 'ğŸ¤';
			let nameBk2 = 'BK02'
			let myBk3 = 'ğŸ¤';
			let nameBk3 = 'BK03'
			console.log(myChk);
			if(myChk == 'BK01'){
				myBk1 = 'â¤'
				nameBk1 = 'BK01chk'
			} else if(myChk == 'BK02'){
				myBk2 = 'â¤';
				nameBk2 = 'BK02chk'
			} else if(myChk == 'BK03'){
				myBk3 = 'â¤';
				nameBk3 = 'BK03chk'
			}
			let liTag = `
				<li><span class="attch" name=${nameBk1}>${myBk1}</span>ì°¸ì„<b>${bk01Per.toString()}</b><span name="BK01" class="attch2" style="float: right;">ğŸ’§</span></li>
				<li><span class="attch" name=${nameBk2}>${myBk2}</span>ë¶ˆì°¸ì„<b>${bk02Per.toString()}</b><span name="BK02" class="attch2" style="float: right;">ğŸ’§</span></li>
				<li><span class="attch" name=${nameBk3}>${myBk3}</span>ë¯¸ì •<b>${bk03Per.toString()}</b><span name="BK03" class="attch2" style="float: right;">ğŸ’§</span></li>
			`;
			attendChk.append(liTag);
		}
	  //ëª¨ë‹¬ë²„ì „+ì§€ë„..ê¸€ìƒì„¸ì—ì„  ë³´ë‹ˆê¹Œ ìº˜ë¦°ë” ìƒì„¸ì¡°íšŒë„ í–‡ì—ˆë„¤? ì—¬ê¸´ ê± ì €ì¥ì‹œì¼œ ë‘ 
		function calModal(id, bandCalendarLocationLatlong) {
	        var cModal = document.getElementById(id);
			console.log(cModal);	
	        // ëª¨ë‹¬ div ë’¤ì— í¬ë„ë¬´ë ˆí•œ ë ˆì´ì–´
	        var bgg = document.createElement('div');
	        console.log(bgg);
	        bgg.classList.add('bgg');
	        document.body.append(bgg);
			
	        cModal.classList.add('cModal');
	        cModal.style.display='block';
	        document.body.append(cModal);        
	        // ë‹«ê¸° ë²„íŠ¼ ì²˜ë¦¬, ì‹œêº¼ë¨¼ ë ˆì´ì–´ì™€ ëª¨ë‹¬ div ì§€ìš°ê¸°
	        cModal.querySelector('.modal_close_btn').addEventListener('click', function() {
	            bgg.remove();
	            cModal.style.display = 'none';
	        });
	        //ì§€ë„..ì—¬ê¸°ì„œ í•´ì•¼í•˜ë‚˜ ë´„...ë¶€ë¥¼ë•Œ ë§ˆë‹¤ ì´ˆê¸°í™”ì‹œì¼œì„œ ë¶€ë¦„
       		kakaoMap(bandCalendarLocationLatlong);
	    }
		//ì¼ì •ì²´í¬í´ë¦­ëª¨ë‹¬
		$('#attendChk').on('click', $('.attch'), function(e){
			let bandCalendarOptionDay = $('#savesavebandCalendarOptionDay').val();
			console.log(bandCalendarOptionDay);
			//ë§ˆê°ì¼ ì§€ë‚˜ì„œ íˆ¬í‘œ
			console.log('ë§ˆê°ì¼'+new Date(bandCalendarOptionDay))
			console.log('ë§ˆê°ì¼'+new Date())
			if(bandCalendarOptionDay==null || new Date(bandCalendarOptionDay)<new Date()){
				alert('íˆ¬í‘œê¸°í•œì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.');
				return false;
			}
			if($(e.target).attr('class')=='attch'){
				//ì„ íƒí•œ ê²ƒì˜ name
				let heartChk = $(e.target).attr('name');
				//ë‚´ ì²´í¬ í™•ì¸ ìš°ì„  ë‹¤ ì§€ìš°ê³  ëˆŒë¦°ê²Œ ì²´í¬ë¼ë©´ ì²´í¬í•´ì£¼ê¸°...ê·¸ì™¸ì— ì²´í¬=>ë¹„ì²´í¬ë©´ ê·¸ëƒ¥ ë‹¤ ë¹ˆ ì¹¸ë¨
				let myBk1 = 'ğŸ¤';
				let nameBk1 = 'BK01'
				let myBk2 = 'ğŸ¤';
				let nameBk2 = 'BK02'
				let myBk3 = 'ğŸ¤';
				let nameBk3 = 'BK03'
				//ë„˜ê¸¸ ê°’ìš©
				let result = 0;
				if(heartChk=='BK01') {
					myBk1 = 'â¤';
					nameBk1 = 'BK01chk';
					result = 'BK01';
				} else if (heartChk=='BK02') {
					myBk2 = 'â¤';
					nameBk2 = 'BK02chk';
					result = 'BK02';
				} else if (heartChk=='BK03') {
					myBk3 = 'â¤';
					nameBk3 = 'BK03chk';
					result = 'BK03';
				}
				//ì„¸ê°œì˜ name ìƒíƒœê°€ ì¶œë ¥ë¨..( ì´ì¤‘ ì²´í¬ëœ ê²ƒ í˜¹ì€ ì „ë¶€ ë„ì´ë©´ ë„ì¸ ìƒíƒœë¡œ ì•„ì‘ìŠ¤ë¡œ ë³´ë‚¼ ì˜ˆì •)
				/* $(e.currentTarget).find('.attch').each(function(idx,ele){
					console.log($(ele).attr('name'));
				}) */
				let bandCalendarNo = $('#saveCalendarEach').val();
				let bandUserId = $('#userId').val();
				let bandAttend = result==0?null:result;
				
				$.ajax({
					url: '/own/band/bandGroup/calendarUpdel?bandCalendarNo='+bandCalendarNo+'&bandMemberNo='+bandUserId+'&bandAttend='+bandAttend,
					dataType: 'json',
					method: 'get',
					contentType : "application/text; charset=utf-8;"
				}).then(result => {
					console.log(result);
					if(result != null){
						makeCalModal(result)
					}
				})
			}
		})
		//ì°¸ì—¬ì¤‘ì¸ì‚¬ëŒ í™•ì¸ ì°½
		$('#attendChk').on('click', $('.attch2'), function(e){
			if($(e.target).attr('class')=='attch2'){
				let bandCalendarNo = $('#saveCalendarEach').val();
				//ì–´ë˜ ìœ í˜•ì˜ ì²´í¬ë¥¼ ë³¼ ì§€ ì €ì¥
				let type = $(e.target).attr('name');
				window.open( "/own/band/bandCalendarChk?bandAttend="+type+"&bandCalendarNo="+bandCalendarNo, "Child", "width=500px, height=600px, top=50%, left=50% resizable = no, scrollbars = no" );	
			}
		})
		
	  //ì—¬ê¸´ í•´ê²°
	  function kakaoMap(bandCalendarLocationLatlong){
		  console.log(bandCalendarLocationLatlong)
		  if(bandCalendarLocationLatlong != null){
			  $('#map').css('display','block');
		    let latLong = bandCalendarLocationLatlong;
			console.log(latLong);
		    let lat = latLong.substr(1, latLong.indexOf(',')-1);
		    let longg = latLong.substr(latLong.indexOf(' ')+1);
		    longg = longg.substr(0, longg.indexOf(')')-1);
		    console.log(lat+'+'+longg);
				
			var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div 
			mapOption = { 
			    center: new kakao.maps.LatLng(lat, longg), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
			    level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
			};
			
			var map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
			
			//ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ì…ë‹ˆë‹¤ 
			var markerPosition  = new kakao.maps.LatLng(lat, longg); 
			
			//ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
			var marker = new kakao.maps.Marker({
			position: markerPosition
			});
			
			//ë§ˆì»¤ê°€ ì§€ë„ ìœ„ì— í‘œì‹œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
			marker.setMap(map);
			
			//ì•„ë˜ ì½”ë“œëŠ” ì§€ë„ ìœ„ì˜ ë§ˆì»¤ë¥¼ ì œê±°í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤
			//marker.setMap(null);
		} else {
			$('#map').css('display','none');
		}
	  }
		
	})
	</script>
</body>
</html>