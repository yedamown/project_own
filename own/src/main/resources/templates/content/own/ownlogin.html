<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
      
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<div layout:fragment="content">
<body>
        <h1>로그인 페이지</h1>
        <div id = "container">
            <fieldset>
            <legend>로그인입력</legend>
            <ul>
                <li><label>아이디</label>
                    <input id="u_id" type="text" placeholder="여백없이 입력"></li>
                <li><label>비밀번호</label>
                    <input id="u_pw" type="password" placeholder="연락가능한 번호"></li>
                
             </ul>
        </fieldset>
            <br>
        </div>
        <button type="button" id="btnsignin">로그인</button></td>
        <button type="button" id="btnlogout">로그아웃</button></td>
        <script>
    		$('#btnsignin').on("click",function(){
    			let id = $('#u_id').val();
                let passwd = $('#u_pw').val();
                console.log('아이디 ' + id)
                console.log('비밀번호 ' + passwd);
                $.ajax({
        			url : '/login',
        			method : 'post',
        			data :  JSON.stringify({userId:id,
        									userPasswd:passwd}),
					//dataType : 'object' ,//응답결과랑 타입이 같아야함
					contentType : "application/json" //json으로 보낼때 타입이 이렇다..
        		}).then(res=>{
        			if(res==1){
        				alert('로그인됨')
        				location.href = "/own/home";
        			}
        			else{
        				alert('로그인 실패')
        			}
        		})                
    		})        
    		
        </script>
</body>
</div>
</html>