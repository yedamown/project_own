<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

    <!-- ========== Meta Tags ========== -->
   <meta charset="UTF-8">
   <meta name="description" content="Cocoon -Portfolio">
   <meta name="keywords" content="Cocoon , Portfolio">
   <meta name="author" content="Pharaohlab">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <!-- ========== Title ========== -->
   <title> Cocoon -Portfolio</title>
   <!-- ========== Favicon Ico ========== -->
   <!--<link rel="icon" href="fav.ico">-->
   <!-- ========== STYLESHEETS ========== -->
   <!-- Bootstrap CSS -->
   <link href="/css/sns/css/bootstrap.min.css" rel="stylesheet">
   <!-- Fonts Icon CSS -->
   <link href="/css/sns/css/font-awesome.min.css" rel="stylesheet">
   <link href="/css/sns/css/et-line.css" rel="stylesheet">
   <link href="/css/sns/css/ionicons.min.css" rel="stylesheet">
   <!-- Carousel CSS -->
   <link href="/css/sns/css/slick.css" rel="stylesheet">
   <!-- Magnific-popup -->
   <link rel="stylesheet" href="/css/sns/css/magnific-popup.css">
   <!-- Animate CSS -->
   <link rel="stylesheet" href="/css/sns/css/animate.min.css">
   <!-- Custom styles for this template -->
   <link href="/css/sns/css/main.css" rel="stylesheet">

   <style>
       .modal {
           display: none; /* Hidden by default */
           position: fixed; /* Stay in place */
           z-index: 1; /* Sit on top */
           left: 0;
           top: 0;
           width: 100%; /* Full width */
           height: 100%; /* Full height */
           overflow: auto; /* Enable scroll if needed */
           background-color: rgb(0, 0, 0); /* Fallback color */
           background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
       }
       /* Modal Content/Box */
       .modal-content {
           background-color: #fefefe;
           margin: 0% auto; /* 15% from the top and centered */
           padding: 20px;
           border: 1px solid #888;
           width: 70%; /* Could be more or less, depending on screen size */
           font-size: 16px;
       }
       /* The Close Button */
       .close {
           color: #aaa;
           float: right;
           font-size: 28px;
           font-weight: bold;
       }
       
       .close:hover, .close:focus {
           color: black;
           text-decoration: none;
           cursor: pointer;
       }
       
       .modalBtn {
           font-size: 13px;
           color: black;
       }
       
       #att_zone {
           width: 660px;
           min-height: 150px;
           padding: 10px;
           border: 1px dotted #00f;
       }
       
       #att_zone:empty:before {
           content: attr(data-placeholder);
           color: #999;
           font-size: .9em;
       }
       .followBtn{
       	   position: absolute;
       	   top:5px;
       	   left:400px;
           width: 70px; 
           height: 30px; 
           font-size: 13px; 
           background-color: skyblue;
           border-color: white;
           color: white;
           font-weight: 700;
       }
       .btnIcon{
           width: 30px;
           height: 25px;
       }
       .profile{
       	width:700px; 
       	height: 200px; 
       	margin: 0 auto; 
       	position: relative;
       }
       .profile > p{
      		position: absolute;
      		top:35px; 
      		left:300px; 
      		font-size:11px; 
      		color:blue;
       }
       #instaImg{
       		width:130px; 
       		height:130px; 
       		border-radius: 50%; 
       		position: absolute;
       		top:1px; 
       		left:81px;
       }
       .profileImg {
       		position: absolute;
       		top:4px;
       		left:84px; 
       		border-radius: 50%;
       		width:124px; 
       		height:124px; 
       		object-fit: cover;
       }
       
       .feedCount{
       		font-size: 14px;
       		font-weight: 600;
       		padding-left:10px;
       }
       #feedCount{
       		position:absolute;
       		top:50px;
       		left:300px;
       }
       #profileContent{
       		width:200px;
       		position:absolute;
       		top:90px;
       		left:300px;
       		font-size:14px;
       		text-align:left;
       }
       
       </style>
</head>
<body>
	<div class="loader">
	    <div class="loader-outter"></div>
	    <div class="loader-inner"></div>
	</div>
	
	<div class="body-container container-fluid">
	    <a class="menu-btn" href="javascript:void(0)">
	        <i class="ion ion-grid"></i>
	    </a>
	    <div class="row justify-content-center">
        <!--=================== side menu ====================-->
       <div class="col-lg-2 col-md-3 col-12 menu_block">

           <!--logo -->
           <div class="logo_box">
               <a href="#">
                   <img src="/css/sns/img/logo.png" alt="cocoon">
               </a>
           </div>
           <!--logo end-->

           <!--main menu -->
           <div class="side_menu_section">
               <ul class="menu_nav">
                   <li> <a href="/own/home">Home</a></li>
                   
                   <li class="active" th:if="${userId.snsNickname == snsInfo.snsNickname}">
                   	<a th:href="@{snsFeed(snsNickname=${userId.snsNickname})}">ë‚˜ì˜ í”¼ë“œ</a>
                   </li>
                   <li th:if="${userId.snsNickname != snsInfo.snsNickname}">    
                        <a th:href="@{snsFeed(snsNickname=${userId.snsNickname})}">ë‚˜ì˜ í”¼ë“œ</a></li>
                   <li>
                       <a href="services.html">
                           Services
                       </a>
                   </li>
                   <li>
                       <a href="/own/sns">
                           snsë©”ì¸
                       </a>
                   </li>
                   <li>
                       <a href="contact.html">
                           Contact
                       </a>
                   </li>
               </ul>
           </div>
           <!--main menu end -->

           <!--filter menu -->
           <div class="side_menu_section">
               <h4 class="side_title">filter by:</h4>
               <ul  id="filtr-container"  class="filter_nav">
                   <li  data-filter="*" class="active"><a href="javascript:void(0)" >all</a></li>
                   <li data-filter=".branding"> <a href="javascript:void(0)">branding</a></li>
                   <li data-filter=".design"><a href="javascript:void(0)">design</a></li>
                   <li data-filter=".photography"><a href="javascript:void(0)">photography</a></li>
                   <li data-filter=".architecture"><a href="javascript:void(0)">architecture</a></li>
               </ul>
           </div>
           <!--filter menu end -->


           <!--social and copyright -->
           <div class="side_menu_bottom">
               <div class="side_menu_bottom_inner">
                   <ul class="social_menu">
                       <li>
                           <a href="#"> <i class="ion ion-social-pinterest"></i> </a>
                       </li>
                       <li>
                           <a href="#"> <i class="ion ion-social-facebook"></i> </a>
                       </li>
                       <li>
                           <a href="#"> <i class="ion ion-social-twitter"></i> </a>
                       </li>
                       <li>
                           <a href="#"> <i class="ion ion-social-dribbble"></i> </a>
                       </li>
                   </ul>
                   <div class="copy_right">
                       <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                       <p class="copyright">Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
                       <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                   </div>
               </div>
           </div>
           <!--social and copyright end -->

       </div>
       <!--=================== side menu end====================-->

       <!--=================== content body ====================-->
       <div class="col-lg-10 col-md-9 col-12 body_block  align-content-center">
           <!--=================== filter portfolio start====================-->
           <div id="snsprofilebox" style="border: 1px solid black; text-align: center;">
					<br>
                           <div class="profile">
                               <img id="instaImg" src="/css/sns/img/insta.png">
                               <span class="modalBtn">
							   <img th:if="${profileImg == null}" 
									class="profileImg" src="/css/sns/img/defaultUser.png">
							   <span th:unless="${profileImg == null}" >
							   		<img class="profileImg" th:src="|/imgView/${profileImg.mediaServerFile}" ></span>
							   </span>
							   		 
                               <span th:text="${snsInfo.snsNickname}" th:value="${snsInfo.snsAccountNo}" style="position: absolute; top:10px; left:300px; font-size:16px; font-weight:700;"></span>
                               
                               <p th:if="${userId.snsNickname == snsInfo.snsNickname}" 
                                  class="modalBtn">í”„ë¡œí•„ ë³€ê²½</p>
                               <td th:if="${userId.snsNickname != snsInfo.snsNickname}">
                                   <button th:if="${isCheckFollow == 0}" class="followBtn" data-follow="0" value="íŒ”ë¡œìš°">íŒ”ë¡œìš°</button>
                                   <button th:unless="${isCheckFollow == 0}" class="followBtn" data-follow="1" value="íŒ”ë¡œì‰" style="background-color: white; color:black">íŒ”ë¡œì‰</button>
                               </td>                        
                               <div id="feedCount">
                                <span style="font-size: 13px; color:black">ê²Œì‹œê¸€</span>
                                       <span class="feedCount" th:text="${snsFeedCount}"></span>&nbsp;&nbsp;
                                <span class="modalBtn">íŒ”ë¡œìš°</span><span class="feedCount" th:text="${snsFollow}"></span>&nbsp;&nbsp;
                                <span class="modalBtn">íŒ”ë¡œì›Œ</span><span class="feedCount" th:text="${snsFollower}" id="followerCnt"></span>
                                </div>
                                <div id="profileContent">
		                        <div th:if="${snsInfo.snsProfile != null}">
		                               <span th:text="${snsInfo.snsProfile}"></span></div>
								<div th:unless="${snsInfo.snsProfile != null}">í”„ë¡œí•„ ì†Œê°œê¸€ì„ì…ë ¥í•˜ì„¸ìš”.</div>
		
								<div th:if="${snsInfo.snsWebsite != null}">
							        <a th:href="${snsInfo.snsWebsite}" th:text="${snsInfo.snsWebsite}" style="color: skyblue;"></a></div>
								<div th:unless="${snsInfo.snsWebsite != null}">ì›¹ì‚¬ì´íŠ¸ ë§í¬ë¹„ì–´ìˆìŒ</div>
								</div>
                           </div>
                                    <!-- ìŠ¤í† ë¦¬ ë“±ë¡-->
                                    <div th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modal" >
                                        <div class="modal-content">
                                            <span class="close">&times;</span> 
                                            <p>ìŠ¤í† ë¦¬ ë“±ë¡ ëª¨ë‹¬</p>
                                        </div>
                                    </div>                             
                                  <div th:if="${userId.snsNickname != snsInfo.snsNickname}" class="modal" >
                                        <div class="modal-content">
                                            <span class="close">&times;</span> 
                                            <p>ë‹¤ë¥¸ì‚¬ëŒ ìŠ¤í† ë¦¬ ëª¨ë‹¬</p>
                                        </div>
                                    </div>   
                                   <!-- í”„ë¡œí•„ -->
                                   <div th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modal" >
									<div class="modal-content">
										<span class="close">&times;</span> 
										<p>í”„ë¡œí•„ ë³€ê²½í•˜ì‹œê² ìŠ´ê¹Œ</p>
										<form action="/own/snsProfile" method="post" enctype="multipart/form-data">
											<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
											<input th:value="${userId.snsAccountNo}" name="snsAccountNo"  type="hidden">
											<input th:value="${userId.snsNickname}" name="snsNickname">
											<input name="uploadProfile" type="file" id="uploadProfile">
											<label for="uploadProfile">ì‚¬ì§„ì²¨ë¶€</label>
											<textarea style="width:400px; height:100px;" placeholder="í”„ë¡œí•„ ì†Œê°œê¸€ì„ ì…ë ¥í•˜ì„¸ìš”."
													  name="snsProfile" th:value="${snsInfo.snsProfile}">
											</textarea>
											<textarea stlye="width:500px; height:80px;" placeholder="ì›¹ì‚¬ì´íŠ¸ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
													  name="snsWebsite" th:value="${snsInfo.snsWebsite}">
											</textarea>
											<input type="submit" role="button" value="í™•ì¸" />
										</form>
									</div>
								</div>
								
								
								<!-- íŒ”ë¡œìš° Modal -->
								<div class="modal">
									<div class="modal-content">
										<span class="close">&times;</span> 
										<p>ë‚´ê°€ íŒ”ë¡œìš° í•œ ì‚¬ëŒ</p>
											<table border="1px">
												<thead>
													<tr>
														<th>íŒ”ë¡œìš° ëª©ë¡</th>
													</tr>
												</thead>
												<tbody>
													<tr th:each="snsfol : ${snsFollowerList}">
														<td th:text="${snsfol.follower}"></td>
												</tbody>
											</table>
									</div>
								</div>
								<!-- íŒ”ë¡œì›Œ Modal -->
								<div class="modal">
									<div class="modal-content">
										<span class="close">&times;</span> 
										<p>ë‚˜ë¥¼ íŒ”ë¡œìš° í•œ ì‚¬ëŒ</p>
										<table border="1px">
											<thead>
												<tr>
													<th>íŒ”ë¡œì›Œ ëª©ë¡</th>
												</tr>
											</thead>
											<tbody>
												<tr th:each="snsf : ${snsFollowList}">
													<td th:text="${snsf.follow}"></td>
											</tbody>
										</table>
									</div>
								</div>
						



					<img src="/css/sns/img/user.png" alt="author"> í•˜ì´ë¼ì´íŠ¸
					&nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png" alt="author">
					í•˜ì´ë¼ì´íŠ¸ &nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png"
						alt="author"> í•˜ì´ë¼ì´íŠ¸ &nbsp;&nbsp;&nbsp;&nbsp; <img
						src="/css/sns/img/user.png" alt="author"> í•˜ì´ë¼ì´íŠ¸
					&nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png" alt="author">
					í•˜ì´ë¼ì´íŠ¸ <br> <br>
				</div><hr>

				<!-- ê¸€ì‘ì„± ëª¨ë‹¬ì„ ì—¬ëŠ” í´ë˜ìŠ¤ -->
				<h1 th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modalBtn" style="text-align: right;">ğŸ“ê¸€ ì‘ì„±</h1><p>
				<div th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modal">
					<div class="modal-content">
						<span class="close">&times;</span>
						<div id="image_preview">
							<!--ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°-->
							<form action="/own/snsWriteFeed" method="post"
								class="snsWriteFrm" enctype="multipart/form-data">
								<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">	
								<input name="uploadfile" type="file" id="btnAtt"
									multiple="multiple">
								<!--<label for="btnAtt">ì´ë¯¸ì§€ ì²¨ë¶€</label> ë¼ë²¨ì´ ì•ˆë¨¹í˜€ìš” ã… ã…  ë„ì™€ì£¼ì‹¤ë¶„-->

								<div id="att_zone" data-placeholder='ì‚¬ì§„ì„ ì²¨ë¶€í•˜ì„¸ìš”'></div>
								<br>

								<textarea style="width: 600px; height: 200px;"
									name="snsBoardContent" id="inputContent"></textarea>
								<input th:value="${userId.snsAccountNo}"
									name="snsAccountNo" type="hidden"></input> 
                                   <input th:value="${userId.snsNickname}" type="hidden" name="snsNickname"/>
                                       <input type="submit" role="button" value="ê¸€ì“°ê¸°" />
							</form>
						</div>
					</div>
				</div>
				<br>

           <div class="portfolio gutters grid img-container">
               <div class="grid-sizer col-sm-12 col-md-6 col-lg-3"></div>

               <th:block th:each="snsimg :${snsImg}">
                   <div class="modalBtn">
                       <input type="hidden" id="boardNo" th:value="${snsimg.identifyId}">
                       <div class="grid-item branding  col-sm-12 col-md-6 col-lg-3">
                           <div class="project_box_one">                      
                               <img th:src="|/imgView/${snsimg.mediaServerFile}" />
                           <div class="product_info">
                               <div class="product_info_text">
                                   <div class="product_info_text_inner">
                                       <i class="ion ion-plus"></i>
                                       <h4>ì¢‹ì•„ìš” ìˆ˜/ ëŒ“ê¸€ ìˆ˜</h4>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
                   <!--</a>-->
               </div>
           </th:block>
           </div>

           <!-- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° Modal -->

           <th:block th:each="snsLength :${snsImg}">   
           <div class="modal" >
             <!-- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° Modalì˜ ë‚´ìš© -->
             <div class="modal-content" style="width: 1200px; height: 900px;">
               <span class="close">&times;</span>
               <div class="modalP" style="width : 800px; height: 700px; position: relative;">
                   <div class="boardBtnDiv">ë²„íŠ¼ì´ìš”</div>
                       <div class="contentBox">
                       <p class="bContent">ê¸€ë‚´ìš©:</p>
                       <p class="bWriter">ì‘ì„±ì:</p>
                       <p class="bDate">ì‘ì„±ì¼ì:</p>
                       <p class="bNo" style="display: none;">ê¸€ë²ˆí˜¸</p>
                           <table style="border: 1px solid black; font-size: 14px; width: 500px;">
                               <thead>
                                   <tr>
                                       <th>ëŒ“ê¸€ ì‘ì„±ì</th>
                                       <th>ëŒ“ê¸€ ë‚´ìš©</th>
                                       <th>ëŒ“ê¸€ ì‘ì„±ì¼ì</th>
                                   </tr>
                               </thead>
                                   <tbody id="tableBody">
                                       <tr>
                                           <td>ëŒ“ê¸€ ë‚´ìš© í…ŒìŠ¤íŠ¸</td>
                                       </tr>
                                   </tbody>
                           </table>
                     </div>
                     <div class="btnIcon">
                       <img src="/css/sns/img/update.png" id="updateBtn">
                       <img src="/css/sns/img/trash.png" id="trashBtn">
                     </div>
                     <br>
                     <br>
               </div>
              </div>
           </div>
           </th:block>
           <!--=================== filter portfolio end====================-->
       </div>
       <!--=================== content body end ====================-->
    </div>
</div>
	<!--===================ìŠ¤í¬ë¦½íŠ¸====================-->
<script th:inline="javascript">
	 /*<![CDATA[*/
	  var header = /*[[${_csrf.headerName}]]*/'defalut';
	  var token = /*[[${_csrf.token}]]*/'defalut';
	  /*]]>*/
    $('#trashBtn').on("click", function(){
        console.log('ì“°ë ˆê¸°í†µë²„íŠ¼ í´ë¦­')
        let bNo = $('#boardNo').val()
        console.log(bNo)
        if(window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
            console.log("ë„¤") 
            $.ajax({
                url: '/own/boardDelete',
                method: 'post',
                data: {snsBoardNo: bNo},
                beforeSend :function(xhr){
            		        xhr.setRequestHeader(header, token);
                },
                success: function(res){
                    $('.modal').css({"display" : "none"});
                    location.href = "/own/snsFeed";
                    alert("ì‚­ì œ ì™„ë£Œ")
                    
                },error: function(err){
                    console.log(err)
                }
            })
        }else{
            console.log("ì•„ë‹ˆì˜¤")
        }
    })
    $('#updateBtn').on("click", function(){
        console.log('ì—…ë°ì´íŠ¸ë²„íŠ¼ í´ë¦­')
    })

    var followId =   "[(${snsInfo.snsAccountNo})]"
    var followerId = "[(${userId.snsAccountNo})]"
    var followNickname = "[(${snsInfo.snsNickname})]"


//íŒ”ë¡œìš°ë²„íŠ¼
    $('.followBtn').on("click", function(){
        if(this.value == 'íŒ”ë¡œìš°'){
                        console.log('íŒ”ë¡œìš°ë²„íŠ¼ í´ë¦­');
                        this.style.backgroundColor = "white";
                        this.style.color="black";
                        this.value = 'íŒ”ë¡œì‰';
                        this.textContent = "íŒ”ë¡œì‰";
                        $.ajax({
                            url: '/own/follow',
                            method: 'post',
                            data: {snsFollowId : followId,
                                   snsFollowerId : followerId,
                                   nickname : followNickname},
                            beforeSend :  function(xhr){
            		                      xhr.setRequestHeader(header, token);
                        }, success : function(res){
                            console.log(res)
                            $('#followerCnt').text(res-1);
                        }, error : function(err){
                            console.log(err);
                        }

                        })
                        
                    }else if (this.value=='íŒ”ë¡œì‰'){
                        console.log('íŒ”ë¡œì‰ë²„íŠ¼ í´ë¦­')
                        this.style.backgroundColor = "skyblue";
                        this.style.color="white";
                        this.value="íŒ”ë¡œìš°";
                        this.textContent = "íŒ”ë¡œìš°";
                        $.ajax({
                            url : '/own/unfollow',
                            method: 'post',
                            data : {snsFollowId: followId,
                                    snsFollowerId: followerId,
                                    nickname: followNickname},
                            beforeSend :  function(xhr){
            		                  xhr.setRequestHeader(header, token);        
                            },
                            success: function(res){
                                console.log("ì–¸íŒ”ì™„")
                                $('#followerCnt').text(res);
                            }, error : function(err){
                                console.log(err);
                            }
                        })
                    }
    })

    //ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ajax
        $('.modalBtn').each(function(){
            $(this).on("click", function(){
                console.log(this);
                let boardNo = $(this).children('#boardNo').val();
                console.log(boardNo);

                if(boardNo != null){
                    console.log('ëª¨ë‹¬ ì•„ì‘ìŠ¤ ë³´ëƒ…ë‹ˆë‹¤')
                    $.ajax({
                        url: '/own/snsFeed',
                        method: 'post',
                        data: {snsBoardNo: boardNo},
                        beforeSend :  function(xhr){
            		        xhr.setRequestHeader(header, token);
                        },  
                        success: function(res){
                            console.log(res)
                            $('.bContent').text(res.svo.snsBoardContent);

                            for(let i=res.imgList.length-1; i>=0; i--){
                                if(res.imgList[i]!=null){
                                let img = $('<img>').attr({"src" : "/imgView/"+res.imgList[i].mediaServerFile,
                                                           "class" : "boardImg", "name": "img"+i});
                                img.css({"width":"200px", "height": "300px", "position" : "absolute"});
                                
                                let boardBtn = $('<div>').css({"width":"15px", "height":"13px", 
                                                            "background-color":"lightgray",
                                                            "border-radius":"50%", "border":"1px black solid"})
                                boardBtn.attr("class", "pageBtn");
                                $('.boardBtnDiv').append(boardBtn);
                                $('.modalP').append(img);

                                for(let i=0; i<res.reply.length; i++){
                                    var tableTd ='<tr>'
                                        tableTd += '<td>'+res.reply[i].userId+'</td>';
                                        tableTd += '<td>'+res.reply[i].replyContent+'</td>';
                                        tableTd += '<td>'+res.reply[i].replyDate+'</td>';
                                        tableTd += '</tr>';
                                        $('#tableBody').append(tableTd);
                                }
                            }else{
                                console.log('ì´ë¯¸ì§€ìƒì„±ì¤‘'+i)
                            }
                            
                            }
                            let time = res.svo.snsBoardDate
                            time = new Date(time);
                            console.log(time);
                            $('.bWriter').text(res.svo.snsNickname);
                            $('.bDate').text(elapsedText(time));
                            
                        },
                        error: function(error){
                        	console.log(error);
                        }
                    })
                }else{
                    console.log('ëª¨ë‹¬ì°½ ë„ìš°ê¸°')
                }
                
            })
        })
        
        // $('.pageBtn').on("click", function(e){
        //     e.preventDefault();
        //     var i = $(this).index();
        //     console.log(i+'ë²ˆì§¸ ë²„íŠ¼ í´ë¦­')
        // })


        //í˜ì´ì§• ë²„íŠ¼ ë„ì „
        $(document).on('click', '.pageBtn', function(e){
            e.preventDefault();
            var i = $(this).index();
            console.log(i+"ë²ˆì§¸ ë²„íŠ¼")
            $('.modalP').children().hide();
            $('.modalP').children().eq(i).show();
            console.log( $('.modalP img').eq(0));
           // $(`.modalP>img:not(:eq(${i}))`).show();
           $(this).css('background-color', 'skyblue');
           $('.pageBtn').not($(this)).css('background-color', 'lightgray');
           //$('.modalP img(:eq('+i+'))').css("display", "block");
              
        })

        // Modalì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
        var modals = document.getElementsByClassName("modal");
        // Modalì„ ë„ìš°ëŠ” í´ë˜ìŠ¤ ì´ë¦„ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
        var btns = document.getElementsByClassName("modalBtn");
        // Modalì„ ë‹«ëŠ” close í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        var spanes = document.getElementsByClassName("close");
        var funcs = [];
        
        // Modalì„ ë„ìš°ê³  ë‹«ëŠ” í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì •ì˜í•œ í•¨ìˆ˜
        function Modal(num) {
        return function() {
            // í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë‚´ìš©ì„ í´ë¦­í•˜ë©´ Modalì„ ë„ì›ë‹ˆë‹¤.
            btns[num].onclick =  function() {
                modals[num].style.display = "block";
                event.stopPropagation();
                console.log(num);
          
            };
        
            // <span> íƒœê·¸(X ë²„íŠ¼)ë¥¼ í´ë¦­í•˜ë©´ Modalì´ ë‹«ìŠµë‹ˆë‹¤.
            spanes[num].onclick = function() {
                console.log('ëª¨ë‹¬ë‹«ê¸°ë²„íŠ¼í´ë¦­')
                modals[num].style.display = "none";
                $('.modalP').children('img').remove();
                $('.boardBtnDiv').children('div').remove();
            };
        };
        }
            
        // ì›í•˜ëŠ” Modal ìˆ˜ë§Œí¼ Modal í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ funcs í•¨ìˆ˜ì— ì •ì˜í•©ë‹ˆë‹¤.
        for(var i = 0; i < btns.length; i++) {
            funcs[i] = Modal(i);
        }
        
        // ì›í•˜ëŠ” Modal ìˆ˜ë§Œí¼ funcs í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
        for(var j = 0; j < btns.length; j++) {
            funcs[j]();
        }
        
        // Modal ì˜ì—­ ë°–ì„ í´ë¦­í•˜ë©´ Modalì„ ë‹«ìŠµë‹ˆë‹¤.
        window.onclick = function(event) {
        if (event.target.className == "modal") {
            event.target.style.display = "none";
            $('.modalP')[0].reset();
        }
        };

//ì²¨ë¶€íŒŒì¼ ì´ë¯¸ì§€ 
    ( /* att_zone : ì´ë¯¸ì§€ë“¤ì´ ë“¤ì–´ê°ˆ ìœ„ì¹˜ id, btn : file tag id */
        imageView = function imageView(att_zone, btn){

            var attZone = document.getElementById(att_zone);
            var btnAtt = document.getElementById(btn)
            var sel_files = [];
            
            // ì´ë¯¸ì§€ì™€ ì²´í¬ ë°•ìŠ¤ë¥¼ ê°ì‹¸ê³  ìˆëŠ” div ì†ì„±
            var div_style = 'display:inline-block;position:relative;'
                        + 'width:150px;height:120px;margin:5px;border:1px solid #00f;z-index:1';
            // ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ì†ì„±
            var img_style = 'width:100%;height:100%;z-index:none';
            // ì´ë¯¸ì§€ì•ˆì— í‘œì‹œë˜ëŠ” ì²´í¬ë°•ìŠ¤ì˜ ì†ì„±
            var chk_style = 'width:30px;height:30px;position:absolute;font-size:24px;'
                        + 'right:0px;bottom:0px;z-index:999;background-color:rgba(255,255,255,0.1);color:#f00';
        
            btnAtt.onchange = function(e){
            var files = e.target.files;
            var fileArr = Array.prototype.slice.call(files)
            for(f of fileArr){
                imageLoader(f);
            }
            }  
            
        
            // íƒìƒ‰ê¸°ì—ì„œ ë“œë˜ê·¸ì•¤ ë“œë¡­ ì‚¬ìš©
            attZone.addEventListener('dragenter', function(e){
            e.preventDefault();
            e.stopPropagation();
            }, false)
            
            attZone.addEventListener('dragover', function(e){
            e.preventDefault();
            e.stopPropagation();
            
            }, false)
        
            attZone.addEventListener('drop', function(e){
            var files = {};
            e.preventDefault();
            e.stopPropagation();
            var dt = e.dataTransfer;
            files = dt.files;
            for(f of files){
                imageLoader(f);
            }
            
            }, false)
            

            
            /*ì²¨ë¶€ëœ ì´ë¯¸ë¦¬ì¦ì„ ë°°ì—´ì— ë„£ê³  ë¯¸ë¦¬ë³´ê¸° */
            imageLoader = function(file){
            sel_files.push(file);
            var reader = new FileReader();
            reader.onload = function(ee){
                let img = document.createElement('img')
                img.setAttribute('style', img_style)
                img.src = ee.target.result;
                attZone.appendChild(makeDiv(img, file));
            }
            
            reader.readAsDataURL(file);
            }
            
            /*ì²¨ë¶€ëœ íŒŒì¼ì´ ìˆëŠ” ê²½ìš° checkboxì™€ í•¨ê»˜ attZoneì— ì¶”ê°€í•  divë¥¼ ë§Œë“¤ì–´ ë°˜í™˜ */
            makeDiv = function(img, file){
            var div = document.createElement('div')
            div.setAttribute('style', div_style)
            
            var btn = document.createElement('input')
            btn.setAttribute('type', 'button')
            btn.setAttribute('value', 'x')
            btn.setAttribute('delFile', file.name);
            btn.setAttribute('style', chk_style);
            btn.onclick = function(ev){
                var ele = ev.srcElement;
                var delFile = ele.getAttribute('delFile');
                for(var i=0 ;i<sel_files.length; i++){
                if(delFile== sel_files[i].name){
                    sel_files.splice(i, 1);      
                }
                }
                
                dt = new DataTransfer();
                for(f in sel_files) {
                var file = sel_files[f];
                dt.items.add(file);
                }
                btnAtt.files = dt.files;
                var p = ele.parentNode;
                attZone.removeChild(p)
            }
            div.appendChild(img)
            div.appendChild(btn)
            return div
            }
        }
        )('att_zone', 'btnAtt')

//ì‹œê°„ê³„ì‚° í•¨ìˆ˜
 function elapsedText(date) {
                console.log(date);
                date = new Date(date);
                // ì´ˆ (ë°€ë¦¬ì´ˆ)
                const seconds = 1;
                // ë¶„
                const minute = seconds * 60;
                // ì‹œ
                const hour = minute * 60;
                // ì¼
                const day = hour * 24;
                
                var today = new Date();
                var elapsedTime = Math.trunc((today.getTime() - date.getTime()) / 1000);
                
                var elapsedText = "";
                if (elapsedTime < seconds) {
                    elapsedText = "ë°©ê¸ˆ ì „";
                } else if (elapsedTime < minute) {
                    elapsedText = elapsedTime + "ì´ˆ ì „";
                } else if (elapsedTime < hour) {
                    elapsedText = Math.trunc(elapsedTime / minute) + "ë¶„ ì „";
                } else if (elapsedTime < day) {
                    elapsedText = Math.trunc(elapsedTime / hour) + "ì‹œê°„ ì „";
                } else if (elapsedTime < (day * 3)) {
                    elapsedText = Math.trunc(elapsedTime / day) + "ì¼ ì „";
                } else {
                    elapsedText = SimpleDateTimeFormat(date, "yyyy-MM-dd");
                }
                
                return elapsedText;
            }

    </script>



<!-- jquery -->
<script src="/css/sns/js/jquery.min.js"></script>
<!-- bootstrap -->
<script src="/css/sns/js/popper.js"></script>
<script src="/css/sns/js/bootstrap.min.js"></script>
<script src="/css/sns/js/waypoints.min.js"></script>
<!--slick carousel -->
<script src="/css/sns/js/slick.min.js"></script>
<!--Portfolio Filter-->
<script src="/css/sns/js/imgloaded.js"></script>
<script src="/css/sns/js/isotope.js"></script>
<!-- Magnific-popup -->
<script src="/css/sns/js/jquery.magnific-popup.min.js"></script>
<!--Counter-->
<script src="/css/sns/js/jquery.counterup.min.js"></script>
<!-- WOW JS -->
<script src="/css/sns/js/wow.min.js"></script>
<!-- Custom js -->
<script src="/css/sns/js/main.js"></script>
</body>
</html>