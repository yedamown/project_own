<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>-->
    <!-- SlidesJS Required: Link to jquery.slides.js -->

    <!-- End SlidesJS Required -->
        
    <!-- ========== Meta Tags ========== -->
    <meta charset="UTF-8">
    <meta name="description" content="Cocoon -Portfolio">
    <meta name="keywords" content="Cocoon , Portfolio">
    <meta name="author" content="Pharaohlab">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- ========== Title ========== -->
    <title> Cocoon -Portfolio</title>
    <!-- ========== Favicon Ico ========== -->
    <!--<link rel="icon" href="fav.ico">-->
    <!-- ========== STYLESHEETS ========== -->
    <!-- Bootstrap CSS -->
    <link href="/css/sns/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts Icon CSS -->
    <link href="/css/sns/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/sns/css/et-line.css" rel="stylesheet">
    <link href="/css/sns/css/ionicons.min.css" rel="stylesheet">
    <!-- Carousel CSS -->
    <link href="/css/sns/css/slick.css" rel="stylesheet">
    <!-- Magnific-popup -->
    <link rel="stylesheet" href="/css/sns/css/magnific-popup.css">
    <!-- Animate CSS -->
    <link rel="stylesheet" href="/css/sns/css/animate.min.css">
    <!-- Custom styles for this template -->
    <link href="/css/sns/css/main.css" rel="stylesheet">
    <style>
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 21;
            /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content/Box */
        .modal-content {
            background-color: #fefefe;
            margin: 0% auto;
            /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 70%;
            /* Could be more or less, depending on screen size */
            font-size: 16px;
        }

        /* The Close Button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .modalBtn {
            font-size: 13px;
            color: black;
        }

        #att_zone {
            width: 900px;
            min-height: 150px;
            padding: 10px;
            border: 1px dotted #00f;
        }

        #att_zone:empty:before {
            content: attr(data-placeholder);
            color: #999;
            font-size: .9em;
        }

        .followBtn {
            position: absolute;
            top: 5px;
            left: 400px;
            width: 70px;
            height: 30px;
            font-size: 13px;
            background-color: skyblue;
            border-color: white;
            color: white;
            font-weight: 700;
        }

        .btnIcon {
            width: 30px;
            height: 25px;
        }

        .profile {
            width: 700px;
            height: 200px;
            margin: 0 auto;
            position: relative;
        }

        .profile>p {
            position: absolute;
            top: 35px;
            left: 300px;
            font-size: 11px;
            color: blue;
        }

        #instaImg {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            position: absolute;
            top: 1px;
            left: 81px;
        }

        .profileImg {
            position: absolute;
            top: 4px;
            left: 84px;
            border-radius: 50%;
            width: 124px;
            height: 124px;
            object-fit: cover;
        }

        .feedCount {
            font-size: 14px;
            font-weight: 600;
            padding-left: 10px;
        }

        #feedCount {
            position: absolute;
            top: 50px;
            left: 300px;
        }

        #profileContent {
            width: 200px;
            position: absolute;
            top: 90px;
            left: 300px;
            font-size: 14px;
            text-align: left;
        }

        .storyProfileImg {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            position: absolute;
            top: -5px;
            left: -10px;
        }

        .storyProfileName {
            font-size: 15px;
            position: absolute;
            top: 6px;
            left: 57px;
            font-weight: 600;
        }

        .storyImg {
            width: 600px;
            height: 518px;
            position: absolute;
            top: 0px;
            left: -20px;
            object-fit: cover;
        }

        .storyProfileDate {
            position: absolute;
            top: 6px;
            right: 25px;
            font-size: 14px;
        }

        .Feedmodal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 21; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        /* Modal Content/Box */
        .Feedmodal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 50%; /* Could be more or less, depending on screen size */
        }
        li.dot{
            background-color: lightgray;
            margin-top: 20px;
            margin-left: 10px;
        }
        li.dot:hover {
            background-color: lightblue;
        }
        li.dot.active {
            background-color: skyblue;
        }

        .boardImg{
            opacity: 0;
        }
        .boardImg.active{
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
            z-index: 20;
        }

    </style>
    
    <!-- jquery -->
    <script src="/css/sns/js/jquery.min.js"></script>
    <!-- bootstrap -->
    <script src="/css/sns/js/popper.js"></script>
    <script src="/css/sns/js/bootstrap.min.js"></script>
    <script src="/css/sns/js/waypoints.min.js"></script>
    <!--slick carousel -->
    <script src="/css/sns/js/slick.min.js"></script>
    <!--Portfolio Filter-->
    <script src="/css/sns/js/imgloaded.js"></script>
    <script src="/css/sns/js/isotope.js"></script>
    <!-- Magnific-popup -->
    <script src="/css/sns/js/jquery.magnific-popup.min.js"></script>
    <!--Counter-->
    <script src="/css/sns/js/jquery.counterup.min.js"></script>
    <!-- WOW JS -->
    <script src="/css/sns/js/wow.min.js"></script>
    <!-- Custom js -->
    <script src="/css/sns/js/main.js"></script>

</head>

<body>
    <div class="loader">
        <div class="loader-outter"></div>
        <div class="loader-inner"></div>
    </div>

    <div class="body-container container-fluid">
        <a class="menu-btn" href="javascript:void(0)">
            <i class="ion ion-grid"></i>
        </a>
        <div class="row justify-content-center">
            <!--=================== side menu ====================-->
            <div class="col-lg-2 col-md-3 col-12 menu_block">

                <!--logo -->
                <div class="logo_box">
                    <a href="#">
                        <img src="/css/sns/img/logo.png" alt="cocoon">
                    </a>
                </div>
                <!--logo end-->

                <!--main menu -->
                <div class="side_menu_section">
                    <ul class="menu_nav">
                        <li> <a href="/own/home">Home</a></li>

                        <li class="active" th:if="${userId.snsNickname == snsInfo.snsNickname}">
                            <a th:href="@{snsFeed(snsNickname=${userId.snsNickname})}">ë‚˜ì˜ í”¼ë“œ</a>
                        </li>
                        <li th:if="${userId.snsNickname != snsInfo.snsNickname}">
                            <a th:href="@{snsFeed(snsNickname=${userId.snsNickname})}">ë‚˜ì˜ í”¼ë“œ</a></li>
                        <li>
                            <a href="services.html">
                                Services
                            </a>
                        </li>
                        <li>
                            <a href="/own/sns">
                                snsë©”ì¸
                            </a>
                        </li>
                        <li>
                            <a href="contact.html">
                                Contact
                            </a>
                        </li>
                    </ul>
                </div>
                <!--main menu end -->

                <!--filter menu -->
                <div class="side_menu_section">
                    <h4 class="side_title">filter by:</h4>
                    <ul id="filtr-container" class="filter_nav">
                        <li data-filter="*" class="active"><a href="javascript:void(0)">all</a></li>
                        <li data-filter=".branding"> <a href="javascript:void(0)">branding</a></li>
                        <li data-filter=".design"><a href="javascript:void(0)">design</a></li>
                        <li data-filter=".photography"><a href="javascript:void(0)">photography</a></li>
                        <li data-filter=".architecture"><a href="javascript:void(0)">architecture</a></li>
                    </ul>
                </div>
                <!--filter menu end -->


                <!--social and copyright -->
                <div class="side_menu_bottom">
                    <div class="side_menu_bottom_inner">
                        <ul class="social_menu">
                            <li>
                                <a href="#"> <i class="ion ion-social-pinterest"></i> </a>
                            </li>
                            <li>
                                <a href="#"> <i class="ion ion-social-facebook"></i> </a>
                            </li>
                            <li>
                                <a href="#"> <i class="ion ion-social-twitter"></i> </a>
                            </li>
                            <li>
                                <a href="#"> <i class="ion ion-social-dribbble"></i> </a>
                            </li>
                        </ul>
                        <div class="copy_right">
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            <p class="copyright">Copyright &copy;<script>
                                    document.write(new Date().getFullYear());
                                </script> All rights reserved | This template is made with <i class="fa fa-heart-o"
                                    aria-hidden="true"></i> by <a href="https://colorlib.com"
                                    target="_blank">Colorlib</a></p>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        </div>
                    </div>
                </div>
                <!--social and copyright end -->

            </div>
            <!--=================== side menu end====================-->

            <!--=================== content body ====================-->
            <div class="col-lg-10 col-md-9 col-12 body_block  align-content-center">
                <!--=================== filter portfolio start====================-->
                <div id="snsprofilebox" style="border: 1px solid lightgray; text-align: center;">
                    <br>
                    <div class="profile">
                        <img id="instaImg" src="/css/sns/img/insta.png">
                        <span class="modalBtn">
                            <img th:if="${profileImg == null}" class="profileImg" src="/css/sns/img/defaultUser.png">
                            <span th:unless="${profileImg == null}">
                                <img class="profileImg" th:src="|/imgView/${profileImg.mediaServerFile}"></span>
                        </span>

                        <span id="snsNickname" th:text="${snsInfo.snsNickname}" th:value="${snsInfo.snsAccountNo}"
                            style="position: absolute; top:10px; left:300px; font-size:16px; font-weight:700;"></span>

                        <p th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modalBtn">í”„ë¡œí•„ ë³€ê²½</p>
                        <td th:if="${userId.snsNickname != snsInfo.snsNickname}">
                            <button th:if="${isCheckFollow == 0}" class="followBtn" data-follow="0"
                                value="íŒ”ë¡œìš°">íŒ”ë¡œìš°</button>
                            <button th:unless="${isCheckFollow == 0}" class="followBtn" data-follow="1" value="íŒ”ë¡œì‰"
                                style="background-color: white; color:black">íŒ”ë¡œì‰</button>
                        </td>
                        <div id="feedCount">
                            <span style="font-size: 13px; color:black">ê²Œì‹œê¸€</span>
                            <span class="feedCount" th:text="${snsFeedCount}"></span>&nbsp;&nbsp;
                            <span class="modalBtn">íŒ”ë¡œìš°</span><span class="feedCount"
                                th:text="${snsFollow}"></span>&nbsp;&nbsp;
                            <span class="modalBtn">íŒ”ë¡œì›Œ</span><span class="feedCount" th:text="${snsFollower}"
                                id="followerCnt"></span>
                        </div>
                        <div id="profileContent">
                            <div th:if="${snsInfo.snsProfile != null}">
                                <span th:text="${snsInfo.snsProfile}"></span></div>
                            <div th:unless="${snsInfo.snsProfile != null}">í”„ë¡œí•„ ì†Œê°œê¸€ì„ì…ë ¥í•˜ì„¸ìš”.</div>

                            <div th:if="${snsInfo.snsWebsite != null}">
                                <a th:href="${snsInfo.snsWebsite}" th:text="${snsInfo.snsWebsite}"
                                    style="color: skyblue;"></a></div>
                            <div th:unless="${snsInfo.snsWebsite != null}">ì›¹ì‚¬ì´íŠ¸ ë§í¬ë¹„ì–´ìˆìŒ</div>
                        </div>
                    </div>
                    <!-- ìŠ¤í† ë¦¬ ë“±ë¡-->
                    <div th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <p>ìŠ¤í† ë¦¬ ë“±ë¡</p>
                            <form action="/own/snsStory" method="post" enctype="multipart/form-data">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                <input th:value="${userId.snsNickname}" name="snsNickname" type="hidden">
                                <input th:value="${userId.snsAccountNo}" name="snsAccountNo" type="hidden">
                                <input name="uploadStory" type="file" id="uploadStory">
                                <label for="uploadStory">ì‚¬ì§„ì²¨ë¶€</label>
                                <input type="submit" role="button" value="í™•ì¸" />
                            </form>
                        </div>
                    </div>
                    <!-- ë‹¤ë¥¸ì‚¬ëŒ ìŠ¤í† ë¦¬-->
                    <div th:if="${userId.snsNickname != snsInfo.snsNickname}" class="modal">
                        <div class="modal-content" style="width: 500px; height: 600px;">
                            
                            <div class="storyProfile" style="position:relative; width: 450px; height: 60px;">
                                <span class="close" style="padding-left: 16px; padding-top:2px;">&times;</span>
                            </div>
                            <div class="storyContent" style="position:relative; width:498px;">

                            </div>
                            

                        </div>
                    </div>
                    <!-- í”„ë¡œí•„ -->
                    <div th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modal">
                        <div class="modal-content" style="width: 800px; height: 700px;">
                            <span class="close">&times;</span>
                            <p>í”„ë¡œí•„ ë³€ê²½</p>
                            <form id="form1" action="/own/snsProfile" method="post" enctype="multipart/form-data">
                                <div style="width: 300px; height: 300px; border-radius: 50%; border:1px #00f dotted;">
                                <img id="blah" style="width: 300px; height: 300px; border-radius: 50%; object-fit: cover;"/></div>
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                <input th:value="${userId.snsAccountNo}" name="snsAccountNo" type="hidden">
                                <input th:value="${userId.snsNickname}" name="snsNickname">
                                <input name="uploadProfile" type="file" id="imgInp" />
                                <textarea style="width:400px; height:100px;" placeholder="í”„ë¡œí•„ ì†Œê°œê¸€ì„ ì…ë ¥í•˜ì„¸ìš”."
                                    name="snsProfile" th:value="${snsInfo.snsProfile}">
											</textarea>
                                <textarea stlye="width:500px; height:80px;" placeholder="ì›¹ì‚¬ì´íŠ¸ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                                    name="snsWebsite" th:value="${snsInfo.snsWebsite}">
											</textarea>
                                <input type="submit" role="button" value="í™•ì¸" />
                            </form>
                        </div>
                    </div>


                    <!-- íŒ”ë¡œìš° Modal -->
                    <div class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <p>ë‚´ê°€ íŒ”ë¡œìš° í•œ ì‚¬ëŒ</p>
                            <table border="1px">
                                <thead>
                                    <tr>
                                        <th>íŒ”ë¡œìš° ëª©ë¡</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="snsfol : ${snsFollowerList}">
                                        <td th:text="${snsfol.follower}"></td>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- íŒ”ë¡œì›Œ Modal -->
                    <div class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <p>ë‚˜ë¥¼ íŒ”ë¡œìš° í•œ ì‚¬ëŒ</p>
                            <table border="1px">
                                <thead>
                                    <tr>
                                        <th>íŒ”ë¡œì›Œ ëª©ë¡</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="snsf : ${snsFollowList}">
                                        <td th:text="${snsf.follow}"></td>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <img src="/css/sns/img/user.png" alt="author"> í•˜ì´ë¼ì´íŠ¸
                    &nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png" alt="author">
                    í•˜ì´ë¼ì´íŠ¸ &nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png" alt="author"> í•˜ì´ë¼ì´íŠ¸
                    &nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png" alt="author"> í•˜ì´ë¼ì´íŠ¸
                    &nbsp;&nbsp;&nbsp;&nbsp; <img src="/css/sns/img/user.png" alt="author">
                    í•˜ì´ë¼ì´íŠ¸ <br> <br>
                </div>
                <hr>
              	<p>ì—¬ê¸° í…ŒìŠ¤íŠ¸</p>
         
                <!-- ê¸€ì‘ì„± ëª¨ë‹¬ì„ ì—¬ëŠ” í´ë˜ìŠ¤ -->
                <h1 th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modalBtn" style="text-align: right; cursor:pointer;">
               		 ğŸ“ê¸€ì‘ì„±</h1>
                <p>
                    <div th:if="${userId.snsNickname == snsInfo.snsNickname}" class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <div id="image_preview">
                                <!--ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°-->
                                <form action="/own/snsWriteFeed" method="post" class="snsWriteFrm"
                                    enctype="multipart/form-data">
                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                    <input name="uploadfile" type="file" id="btnAtt" multiple="multiple">
                                    <!--<label for="btnAtt">ì´ë¯¸ì§€ ì²¨ë¶€</label> ë¼ë²¨ì´ ì•ˆë¨¹í˜€ìš” ã… ã…  ë„ì™€ì£¼ì‹¤ë¶„-->

                                    <div id="att_zone" data-placeholder='ì‚¬ì§„ì„ ì²¨ë¶€í•˜ì„¸ìš”'></div>
                                    <br>

                                    <textarea style="width: 600px; height: 200px;" name="snsBoardContent"
                                        id="inputContent"></textarea>
                                    <input th:value="${userId.snsAccountNo}" name="snsAccountNo" type="hidden"></input>
                                    <input th:value="${userId.snsNickname}" type="hidden" name="snsNickname" />
                                    <input type="submit" role="button" value="ê¸€ì“°ê¸°" />
                                </form>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="portfolio gutters grid img-container">
                        <div class="grid-sizer col-sm-12 col-md-6 col-lg-3"></div>

                        <th:block th:each="snsimg :${snsImg}">
                                <div class="grid-item branding  col-sm-12 col-md-6 col-lg-3" >
                                    <div class="project_box_one">
                                        <img th:src="|/imgView/${snsimg.mediaServerFile}" />
                                        <div class="product_info"  th:value="${snsimg.identifyId}">
                                            <div class="product_info_text">
                                                <div class="product_info_text_inner">
                                                    <i class="ion ion-plus"></i>
                                                    <h4>ì¢‹ì•„ìš” ìˆ˜/ ëŒ“ê¸€ ìˆ˜</h4>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--</a>-->
                            </th:block>

                    </div>

                    <!-- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° Modal -->                  
                        <div class="Feedmodal">
                            <div class="Feedmodal-content" style="width: 1100px; height: 800px;">
                                <span class="close"></span>
                                <div class="boardContent" style="float: right; width: 500px;border-bottom: 1px lightgray solid; padding-bottom: 16px;">
                                  
                                </div>
                                
                                <div class="boardImgList" style="position:relative; width: 500px; height: 600px; float:left">
                                </div>
                                <div class="replyContent" style="width:500px; float: right; border-bottom: 1px lightgray solid; padding-top: 16px; padding-bottom: 16px; margin-bottom: 10px;">
                                    ì—¬ê¸°ëŠ” ëŒ“ê¸€ìë¦¬ì…ë‹ˆë‹¤
                                </div>   
                                <div class="replyInsert" style="width:500px; height: 200px;float:right;">
                                    <div class="replyInput" style="cursor:pointer;">ğŸ“ëŒ“ê¸€ì“°ê¸°</div>
                                    <div class="realReply"></div>
                                </div>
                                <div class="container-dots">
                                    <ul class="dots-parent" style="list-style: none; margin-left: 150px; width: 300px; height: 50px;">
                                        
                                    </ul>
                                </div>

                                

                                <div class="btnIcon">
                                    <img src="/css/sns/img/update.png" id="updateBtn">
                                    <img src="/css/sns/img/trash.png" id="trashBtn">
                                </div>
                                
                            </div>
                        </div>
                    <!--=================== filter portfolio end====================-->
            </div>
            <!--=================== content body end ====================-->
        </div>
    </div>
    <!--===================ìŠ¤í¬ë¦½íŠ¸====================-->
    <script th:inline="javascript">
        /*<![CDATA[*/
        var header = /*[[${_csrf.headerName}]]*/ 'defalut';
        var token = /*[[${_csrf.token}]]*/ 'defalut';
        /*]]>*/

        //ì´ë¯¸ì§€ë¯¸ë¦¬ë³´ê¸°
        $(function() {
            $("#imgInp").on('change', function(){
                readURL(this);
            });
        });

        function readURL(input) {
            if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                    $('#blah').attr('src', e.target.result);
                }

              reader.readAsDataURL(input.files[0]);
            }
        }
   
        "[(${snsInfo.snsAccountNo})]"
        var replyId = "[(${userId.userId})]"
        var categoryNo = '';

    //ëŒ“ê¸€ ì…ë ¥ ì°½ ìƒì„±
    $('.replyInsert').on("click",'.replyInput', function(e){
        console.log('ëŒ“ê¸€ì“°ê¸° ë²„íŠ¼ í´ë¦­')

        $(e.target).remove();
            let replyArea = $('<textarea>').css({"width":"500px","height" : "200px"})
                replyArea.attr({"class":"replyText"})
            let insertBtn = $('<button>').text("ì…ë ¥")
                insertBtn.attr({"class": "insertBtn"})
            let delBtn = $('<button>').text("ì·¨ì†Œ")
                delBtn.attr({"class" : "delBtn"})

            $('.realReply').append(replyArea, insertBtn, delBtn);

    })
    //ëŒ“ê¸€ ì…ë ¥
        $('.realReply').on("click", '.insertBtn', function(){
                console.log("ì…ë ¥ë²„íŠ¼ í´ë¦­");
                console.log(replyId);
                console.log(categoryNo);
                let replyText = $('.realReply').children('.replyText').val();
                console.log(replyText);

                $.ajax({
                    url : '/own/snsReply',
                    method : 'post',
                    data: {
                        replyContent : replyText,
                        userId : replyId,
                        categoryNo : categoryNo
                    },  
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader(header, token);
                    },
                    success: function(res){
                        console.log(res)

                    },
                    error : function(err){
                        console.log(err);
                    }

                })
        })

        //ëŒ“ê¸€ì·¨ì†Œ
        $('.realReply').on("click", '.delBtn', function(){
            console.log("ì·¨ì†Œë²„íŠ¼ í´ë¦­")
            $('.replyInsert').children('.realReply').children().remove();
            $('.replyInsert').children('.replyInput').remove();
            let replyInput = $('<div>').text('ğŸ“ëŒ“ê¸€ì“°ê¸°');
                replyInput.attr({"class" : "replyInput"})
                replyInput.css({"cursor":"pointer"})
            $('.replyInsert').append(replyInput);
            
        })


    //ê²Œì‹œê¸€ í•œê±´ ì‚­ì œ 
        $('#trashBtn').on("click", function () {
            console.log('ì“°ë ˆê¸°í†µë²„íŠ¼ í´ë¦­')
            let bNo = $('.boardContent').children('.boardNo').attr("value");
            console.log(bNo)
            if (window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                console.log("ë„¤")
                $.ajax({
                    url: '/own/boardDelete',
                    method: 'post',
                    data: {
                        snsBoardNo: bNo
                    },
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader(header, token);
                    },
                    success: function (res) {
                        $('.modal').css({
                            "display": "none"
                        });
                        location.href = "/own/snsFeed";
                        alert("ì‚­ì œ ì™„ë£Œ")

                    },
                    error: function (err) {
                        console.log(err)
                    }
                })
            } else {
                console.log("ì•„ë‹ˆì˜¤")
            }
        })
        $('#updateBtn').on("click", function () {
            console.log('ì—…ë°ì´íŠ¸ë²„íŠ¼ í´ë¦­')
        })

        var followId = "[(${snsInfo.snsAccountNo})]"
        var followerId = "[(${userId.snsAccountNo})]"
        var followNickname = "[(${snsInfo.snsNickname})]"
    
    //ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸° ì´ë¯¸ì§€ í˜ì´ì§•
        $('.dots-parent').on("click", '.dot', function(e){
            console.log("ë‹¨ì¶”í´ë¦­")
            let btnData = $(e.target).attr("data-item");
            console.log(this);
            $('.dot').not(this).removeClass("active");
            $(this).addClass("active");
            console.log(this);
            console.log('ë‹¨ì¶”í´ë¦­');
            console.log($(this).attr("data-item"));
            $('.boardImg').not('[data-item="'+btnData+'"]').removeClass("active")
            $('.boardImg[data-item="'+btnData+'"]').addClass("active")
        })
        //íŒ”ë¡œìš°ë²„íŠ¼
        $('.followBtn').on("click", function () {
            if (this.value == 'íŒ”ë¡œìš°') {
                console.log('íŒ”ë¡œìš°ë²„íŠ¼ í´ë¦­');
                this.style.backgroundColor = "white";
                this.style.color = "black";
                this.value = 'íŒ”ë¡œì‰';
                this.textContent = "íŒ”ë¡œì‰";
                $.ajax({
                    url: '/own/follow',
                    method: 'post',
                    data: {
                        snsFollowId: followId,
                        snsFollowerId: followerId,
                        nickname: followNickname
                    },
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader(header, token);
                    },
                    success: function (res) {
                        console.log(res)
                        $('#followerCnt').text(res);
                    },
                    error: function (err) {
                        console.log(err);
                    }

                })

            } else if (this.value == 'íŒ”ë¡œì‰') {
                console.log('íŒ”ë¡œì‰ë²„íŠ¼ í´ë¦­')
                this.style.backgroundColor = "skyblue";
                this.style.color = "white";
                this.value = "íŒ”ë¡œìš°";
                this.textContent = "íŒ”ë¡œìš°";
                $.ajax({
                    url: '/own/unfollow',
                    method: 'post',
                    data: {
                        snsFollowId: followId,
                        snsFollowerId: followerId,
                        nickname: followNickname
                    },
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader(header, token);
                    },
                    success: function (res) {
                        console.log("ì–¸íŒ”ì™„")
                        $('#followerCnt').text(res);
                    },
                    error: function (err) {
                        console.log(err);
                    }
                })
            }
        })

        //ìŠ¤í† ë¦¬ ìƒì„¸ë³´ê¸° ajax
        $('.profileImg').on("click", function () {
            console.log(followNickname); //ìœ„ì— ì„ ì–¸ë˜ì–´ìˆëŠ” í”¼ë“œ sns ë‹‰ë„¤ì„
            $.ajax({
                url: '/own/snsStoryList',
                method: 'post',
                data: {
                    snsNickname: followNickname
                },
                beforeSend: function (xhr) {
                    xhr.setRequestHeader(header, token);
                },
                success: function (res) {
                    console.log(res)
                    console.log(res.storyImg)
                    console.log(res.profileImg)
                    console.log(res.storyInfo)
                    let storyProfileImg = $('<img>').attr({
                        "src": "/imgView/" + res.profileImg.mediaServerFile,
                        "class": "storyProfileImg"
                    })
                    let storyProfileName = $('<span>').text(res.storyInfo[0].snsNickname)
                    storyProfileName.attr('class', "storyProfileName")


                    $('.storyProfile').append(storyProfileImg);
                    $('.storyProfile').append(storyProfileName);

                    for (let i = res.storyImg.length - 1; i >= 0; i--) {
                        let storyImg = $('<img>').attr({
                            "src": "/imgView/" + res.storyImg[i].mediaServerFile,
                            "class": "storyImg"
                        })
                        let storyProfileDate = $('<span>').text(elapsedText(res.storyInfo[i]
                            .snsStoryDate))
                        storyProfileDate.attr('class', "storyProfileDate");
                        $('.storyProfile').append(storyProfileDate);
                        $('.storyContent').append(storyImg);
                    }
                },
                error: function (err) {
                    console.log(err)
                }
            })
        })

        //ê²Œì‹œê¸€ ìƒì„¸ ë³´ê¸° ajax
        $('.portfolio').on("click", '.grid-item', function(e){
            console.log($(this));
            console.log($(e.target).attr("value"));
            let boardNo = $(e.target).attr("value");
            console.log('ê²Œì‹œê¸€ í´ë¦­ì…ë‹ˆë‹¤')
            if(boardNo != null){
                    $(".Feedmodal").show();
                    console.log("ëª¨ë‹¬ ì•„ì‘ìŠ¤ ë³´ëƒ…ë‹ˆë‹¤");
                        $.ajax({
                            url : '/own/snsFeed',
                            method : 'post',
                            data: {
                                snsBoardNo : boardNo
                            },
                            beforeSend: function (xhr) {
                                xhr.setRequestHeader(header, token);
                            },
                            success: function (res){
                                console.log(res);
                                let boardNo = $('<div>').attr({"value": res.svo.snsBoardNo,
                                                               "class" : "boardNo"});
                                let boardDate = $('<div>').text(res.svo.snsBoardDate);
                                let boardContent = $('<div>').text(res.svo.snsBoardContent);
                                     $('.boardContent').append(boardNo, boardDate, boardContent);
                                
                                for(let i=res.imgList.length-1; i>= 0; i--){
                                    let boardImg = $('<img>').attr({
                                        "src" : "/imgView/" + res.imgList[i].mediaServerFile,
                                        "class": "boardImg",
                                        "data-item" : i})
                                        boardImg.css({"width":"500px", "height":"600px", "object-fit":"cover",
                                                      "position" : "absolute"})
                                    
                                    $('.boardImgList').append(boardImg);  
                                }
                                for(let i=0; i<res.imgList.length; i++){
                                    let liTag = $('<li>').attr({"data-item" : i,
                                                                "class" : "dot"})
                                        liTag.css({"width":"20px", "height" : "20px", 
                                                   "border-radius":"50%","cursor" :"pointer",
                                                   "float" : "left"})
                                    $('.dots-parent').append(liTag);
                                }

                                $(".boardImgList .boardImg:last-child").addClass("active");
                                $(".dots-parent .dot:first-child").addClass("active");

                                for(let i=res.reply.length-1; i>=0; i--){
                                    // let replyContent = $('<div>').text(res.reply[i].replyContent);
                                    // let replyUserId = $('<div>').text(res.reply[i].userId);
                                    // let replyDate =$('<div>').text(res.reply[i].replyDate);

                                        $('.replyContent').append(makeReply(res.reply[i]));
                                }
                                categoryNo = boardNo.attr("value");
                                
                            },error: function (err){
                                console.log(err)
                            }
                        })
                }else{
                    console.log("ì˜ëª»í´ë¦­")
                }
        })
        
        function makeReply(reply){
            // let replyTag = $('<div>').text(reply.replyContent);
            // let replyUserId = $('<div>').text(reply.userId);
            // let replyDate =$('<div>').text(reply.replyDate);

            let Tag = `<div>${reply.replyContent}</div>
                       <div>${reply.userId}</div>
                       <div>${reply.replyDate}</div>
                       <input type="hidden" value="${reply.replyNo}" />`
            return Tag;
        }
   
              
        // Modalì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
        var modals = document.getElementsByClassName("modal");
        // Modalì„ ë„ìš°ëŠ” í´ë˜ìŠ¤ ì´ë¦„ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
        var btns = document.getElementsByClassName("modalBtn");
        // Modalì„ ë‹«ëŠ” close í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        var spanes = document.getElementsByClassName("close");
        var funcs = [];

        // Modalì„ ë„ìš°ê³  ë‹«ëŠ” í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì •ì˜í•œ í•¨ìˆ˜
        function Modal(num) {
            return function () {
                // í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë‚´ìš©ì„ í´ë¦­í•˜ë©´ Modalì„ ë„ì›ë‹ˆë‹¤.
                btns[num].onclick = function () {
                    modals[num].style.display = "block";
                    event.stopPropagation();
                    console.log(num);

                };

                // <span> íƒœê·¸(X ë²„íŠ¼)ë¥¼ í´ë¦­í•˜ë©´ Modalì´ ë‹«ìŠµë‹ˆë‹¤.
                spanes[num].onclick = function () {
                    console.log('ëª¨ë‹¬ë‹«ê¸°ë²„íŠ¼í´ë¦­')
                    modals[num].style.display = "none";
                    $('.storyContent').children('img').remove();
                    $('.storyProfile').children().not('.close').remove();
                };
            };
        }

        // ì›í•˜ëŠ” Modal ìˆ˜ë§Œí¼ Modal í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ funcs í•¨ìˆ˜ì— ì •ì˜í•©ë‹ˆë‹¤.
        for (var i = 0; i < btns.length; i++) {
            funcs[i] = Modal(i);
        }

        // ì›í•˜ëŠ” Modal ìˆ˜ë§Œí¼ funcs í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
        for (var j = 0; j < btns.length; j++) {
            funcs[j]();
        }

        // // Modal ì˜ì—­ ë°–ì„ í´ë¦­í•˜ë©´ Modalì„ ë‹«ìŠµë‹ˆë‹¤.
        window.onclick = function (event) {
            if (event.target.className == "modal" ) {
                event.target.style.display = "none";
                $('.storyContent').children('img').remove();           
                $('.storyProfile').children().remove();
            }
        };

        window.onclick = function (event) {
            if (event.target.className == "Feedmodal") {
                event.target.style.display = "none";
                $('.boardContent').children().remove();
                $('.boardImgList').children().remove();
                $('.dots-parent').children().remove();
                $('.replyContent').children().remove();
                $('.replyInsert').children().remove();
            }
        };

        //ì²¨ë¶€íŒŒì¼ ì´ë¯¸ì§€ 
        ( /* att_zone : ì´ë¯¸ì§€ë“¤ì´ ë“¤ì–´ê°ˆ ìœ„ì¹˜ id, btn : file tag id */
            imageView = function imageView(att_zone, btn) {

                var attZone = document.getElementById(att_zone);
                var btnAtt = document.getElementById(btn)
                var sel_files = [];

                // ì´ë¯¸ì§€ì™€ ì²´í¬ ë°•ìŠ¤ë¥¼ ê°ì‹¸ê³  ìˆëŠ” div ì†ì„±
                var div_style = 'display:inline-block;position:relative;' +
                    'width:150px;height:120px;margin:5px;border:1px solid white;z-index:1';
                // ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ì†ì„±
                var img_style = 'width:100%;height:100%;z-index:none';
                // ì´ë¯¸ì§€ì•ˆì— í‘œì‹œë˜ëŠ” ì²´í¬ë°•ìŠ¤ì˜ ì†ì„±
                var chk_style = 'width:30px;height:30px;position:absolute;font-size:18px;' +
                    'right:0px;bottom:0px;z-index:999;background-color:lightgray;color:white; border:none; opacity:0.9;';

                btnAtt.onchange = function (e) {
                    var files = e.target.files;
                    var fileArr = Array.prototype.slice.call(files)
                    for (f of fileArr) {
                        imageLoader(f);
                    }
                }


                // íƒìƒ‰ê¸°ì—ì„œ ë“œë˜ê·¸ì•¤ ë“œë¡­ ì‚¬ìš©
                attZone.addEventListener('dragenter', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }, false)

                attZone.addEventListener('dragover', function (e) {
                    e.preventDefault();
                    e.stopPropagation();

                }, false)

                attZone.addEventListener('drop', function (e) {
                    var files = {};
                    e.preventDefault();
                    e.stopPropagation();
                    var dt = e.dataTransfer;
                    files = dt.files;
                    for (f of files) {
                        imageLoader(f);
                    }

                }, false)



                /*ì²¨ë¶€ëœ ì´ë¯¸ë¦¬ì¦ì„ ë°°ì—´ì— ë„£ê³  ë¯¸ë¦¬ë³´ê¸° */
                imageLoader = function (file) {
                    sel_files.push(file);
                    var reader = new FileReader();
                    reader.onload = function (ee) {
                        let img = document.createElement('img')
                        img.setAttribute('style', img_style)
                        img.src = ee.target.result;
                        attZone.appendChild(makeDiv(img, file));
                    }

                    reader.readAsDataURL(file);
                }

                /*ì²¨ë¶€ëœ íŒŒì¼ì´ ìˆëŠ” ê²½ìš° checkboxì™€ í•¨ê»˜ attZoneì— ì¶”ê°€í•  divë¥¼ ë§Œë“¤ì–´ ë°˜í™˜ */
                makeDiv = function (img, file) {
                    var div = document.createElement('div')
                    div.setAttribute('style', div_style)

                    var btn = document.createElement('input')
                    btn.setAttribute('type', 'button')
                    btn.setAttribute('value', 'x')
                    btn.setAttribute('delFile', file.name);
                    btn.setAttribute('style', chk_style);
                    btn.onclick = function (ev) {
                        var ele = ev.srcElement;
                        var delFile = ele.getAttribute('delFile');
                        for (var i = 0; i < sel_files.length; i++) {
                            if (delFile == sel_files[i].name) {
                                sel_files.splice(i, 1);
                            }
                        }

                        dt = new DataTransfer();
                        for (f in sel_files) {
                            var file = sel_files[f];
                            dt.items.add(file);
                        }
                        btnAtt.files = dt.files;
                        var p = ele.parentNode;
                        attZone.removeChild(p)
                    }
                    div.appendChild(img)
                    div.appendChild(btn)
                    return div
                }
            }
        )('att_zone', 'btnAtt')

        //ì‹œê°„ê³„ì‚° í•¨ìˆ˜
        function elapsedText(date) {
            console.log(date);
            date = new Date(date);
            // ì´ˆ (ë°€ë¦¬ì´ˆ)
            const seconds = 1;
            // ë¶„
            const minute = seconds * 60;
            // ì‹œ
            const hour = minute * 60;
            // ì¼
            const day = hour * 24;

            var today = new Date();
            var elapsedTime = Math.trunc((today.getTime() - date.getTime()) / 1000);

            var elapsedText = "";
            if (elapsedTime < seconds) {
                elapsedText = "ë°©ê¸ˆ ì „";
            } else if (elapsedTime < minute) {
                elapsedText = elapsedTime + "ì´ˆ ì „";
            } else if (elapsedTime < hour) {
                elapsedText = Math.trunc(elapsedTime / minute) + "ë¶„ ì „";
            } else if (elapsedTime < day) {
                elapsedText = Math.trunc(elapsedTime / hour) + "ì‹œê°„ ì „";
            } else if (elapsedTime < (day * 3)) {
                elapsedText = Math.trunc(elapsedTime / day) + "ì¼ ì „";
            } else {
                elapsedText = SimpleDateTimeFormat(date, "yyyy-MM-dd");
            }

            return elapsedText;
        }
    </script>



</body>

</html>